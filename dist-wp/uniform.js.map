{"version":3,"file":"./uniform.js","mappings":"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","sources":["webpack://uniform-ts/webpack/bootstrap","webpack://uniform-ts/webpack/runtime/import chunk loading","webpack://uniform-ts/./src/$core$/Interface/ObjectProxy.ts","webpack://uniform-ts/./src/$core$/Library/Handlers/RemoteHandler.ts","webpack://uniform-ts/./src/$core$/Library/Handlers/MemoryHandler.ts","webpack://uniform-ts/./src/$core$/Library/FLOW/ExChanger.ts","webpack://uniform-ts/./src/$core$/Library/Utils/SharedChannel.ts","webpack://uniform-ts/./src/$core$/Library/Utils/PromiseStack.ts","webpack://uniform-ts/./src/$core$/Library/FLOW/FLOW.ts","webpack://uniform-ts/./src/$core$/Library/PreCoding/TypeDetector.ts","webpack://uniform-ts/./src/$core$/Library/Handlers/UniversalHandler.ts","webpack://uniform-ts/./src/$core$/Library/PreCoding/PreCoding.ts","webpack://uniform-ts/./src/$core$/Library/FLOW/MessageChannel.ts","webpack://uniform-ts/./src/$core$/Library/Handlers/DataHandler.ts","webpack://uniform-ts/./src/$core$/Library/Handlers/PromiseHandler.ts","webpack://uniform-ts/./src/$core$/Library/Utils/Alias.ts","webpack://uniform-ts/./src/$core$/Library/Utils/InstructionType.ts","webpack://uniform-ts/./src/$core$/Library/Utils/OrganicType.ts","webpack://uniform-ts/./src/$core$/Library/Utils/UUIDMap.ts","webpack://uniform-ts/./src/$core$/Library/Utils/Useful.ts","webpack://uniform-ts/./src/$core$/Library/FLOW/ lazy ^.*$ namespace object","webpack://uniform-ts/./src/$core$/Workers/ lazy namespace object","webpack://uniform-ts/webpack/runtime/define property getters","webpack://uniform-ts/webpack/runtime/ensure chunk","webpack://uniform-ts/webpack/runtime/get javascript chunk filename","webpack://uniform-ts/webpack/runtime/hasOwnProperty shorthand","webpack://uniform-ts/webpack/runtime/make namespace object","webpack://uniform-ts/./src/$core$/Workers/MakeLoader.ts","webpack://uniform-ts/./src/$worker$/index.ts","webpack://uniform-ts/./src/$core$/Workers/ExChangerUnit.ts","webpack://uniform-ts/./src/$main$/index.ts","webpack://uniform-ts/./src/$main$/loader.ts"],"sourcesContent":["// The module cache\nvar __webpack_module_cache__ = {};\n\n// The require function\nfunction __webpack_require__(moduleId) {\n\t// Check if module is in cache\n\tvar cachedModule = __webpack_module_cache__[moduleId];\n\tif (cachedModule !== undefined) {\n\t\treturn cachedModule.exports;\n\t}\n\t// Create a new module (and put it into the cache)\n\tvar module = __webpack_module_cache__[moduleId] = {\n\t\t// no module.id needed\n\t\t// no module.loaded needed\n\t\texports: {}\n\t};\n\n\t// Execute the module function\n\t__webpack_modules__[moduleId](module, module.exports, __webpack_require__);\n\n\t// Return the exports of the module\n\treturn module.exports;\n}\n\n// expose the modules object (__webpack_modules__)\n__webpack_require__.m = __webpack_modules__;\n\n","// no baseURI\n\n// object to store loaded and loading chunks\n// undefined = chunk not loaded, null = chunk preloaded/prefetched\n// [resolve, Promise] = chunk loading, 0 = chunk loaded\nvar installedChunks = {\n\t792: 0\n};\n\nvar installChunk = (data) => {\n\tvar {ids, modules, runtime} = data;\n\t// add \"modules\" to the modules object,\n\t// then flag all \"ids\" as loaded and fire callback\n\tvar moduleId, chunkId, i = 0;\n\tfor(moduleId in modules) {\n\t\tif(__webpack_require__.o(modules, moduleId)) {\n\t\t\t__webpack_require__.m[moduleId] = modules[moduleId];\n\t\t}\n\t}\n\tif(runtime) runtime(__webpack_require__);\n\tfor(;i < ids.length; i++) {\n\t\tchunkId = ids[i];\n\t\tif(__webpack_require__.o(installedChunks, chunkId) && installedChunks[chunkId]) {\n\t\t\tinstalledChunks[chunkId][0]();\n\t\t}\n\t\tinstalledChunks[ids[i]] = 0;\n\t}\n\n}\n\n__webpack_require__.f.j = (chunkId, promises) => {\n\t\t// import() chunk loading for javascript\n\t\tvar installedChunkData = __webpack_require__.o(installedChunks, chunkId) ? installedChunks[chunkId] : undefined;\n\t\tif(installedChunkData !== 0) { // 0 means \"already installed\".\n\n\t\t\t// a Promise means \"currently loading\".\n\t\t\tif(installedChunkData) {\n\t\t\t\tpromises.push(installedChunkData[1]);\n\t\t\t} else {\n\t\t\t\tif(true) { // all chunks have JS\n\t\t\t\t\t// setup Promise in chunk cache\n\t\t\t\t\tvar promise = import(\"./\" + __webpack_require__.u(chunkId)).then(installChunk, (e) => {\n\t\t\t\t\t\tif(installedChunks[chunkId] !== 0) installedChunks[chunkId] = undefined;\n\t\t\t\t\t\tthrow e;\n\t\t\t\t\t});\n\t\t\t\t\tvar promise = Promise.race([promise, new Promise((resolve) => (installedChunkData = installedChunks[chunkId] = [resolve]))])\n\t\t\t\t\tpromises.push(installedChunkData[1] = promise);\n\t\t\t\t}\n\t\t\t}\n\t\t}\n};\n\n// no prefetching\n\n// no preloaded\n\n// no external install chunk\n\n// no on chunks loaded","// deno-lint-ignore-file no-explicit-any ban-types no-explicit-any\nexport default class ObjectProxy {\n    #handlerUtils = {};\n    //\n    constructor(handlerUtils = {}) {\n        this.#handlerUtils = handlerUtils;\n    }\n    //\n    access(target, ...args) {\n        return this.#handlerUtils.$hnd(\"access\", target, ...args);\n    }\n    //\n    get(target, ...args) {\n        return this.#handlerUtils.$hnd(\"get\", target, ...args);\n    }\n    //\n    set(target, ...args) {\n        return this.#handlerUtils.$hnd(\"set\", target, ...args);\n    }\n    //\n    has(target, ...args) {\n        return this.#handlerUtils.$hnd(\"has\", target, ...args);\n    }\n    //\n    call(target, ...args) {\n        return this.#handlerUtils.$hnd(\"call\", target, ...args);\n    }\n    //\n    apply(target, ...args) {\n        return this.#handlerUtils.$hnd(\"apply\", target, ...args);\n    }\n    //\n    construct(target, ...args) {\n        return this.#handlerUtils.$hnd(\"construct\", target, ...args);\n    }\n    //\n    deleteProperty(target, ...args) {\n        return this.#handlerUtils.$hnd(\"deleteProperty\", target, ...args);\n    }\n}\n//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiT2JqZWN0UHJveHkuanMiLCJzb3VyY2VSb290IjoiIiwic291cmNlcyI6WyJPYmplY3RQcm94eS50cyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiQUFBQSxrRUFBa0U7QUFDbEUsTUFBTSxDQUFDLE9BQU8sT0FBTyxXQUFXO0lBQzVCLGFBQWEsR0FBUSxFQUFFLENBQUM7SUFFeEIsRUFBRTtJQUNGLFlBQVksWUFBWSxHQUFHLEVBQUU7UUFDekIsSUFBSSxDQUFDLGFBQWEsR0FBRyxZQUFZLENBQUM7SUFDdEMsQ0FBQztJQUVELEVBQUU7SUFDRixNQUFNLENBQUMsTUFBUyxFQUFFLEdBQUcsSUFBZTtRQUNoQyxPQUFPLElBQUksQ0FBQyxhQUFhLENBQUMsSUFBSSxDQUFDLFFBQVEsRUFBRSxNQUFNLEVBQUUsR0FBRyxJQUFJLENBQUMsQ0FBQztJQUM5RCxDQUFDO0lBRUQsRUFBRTtJQUNGLEdBQUcsQ0FBQyxNQUFTLEVBQUUsR0FBRyxJQUFlO1FBQzdCLE9BQU8sSUFBSSxDQUFDLGFBQWEsQ0FBQyxJQUFJLENBQUMsS0FBSyxFQUFFLE1BQU0sRUFBRSxHQUFHLElBQUksQ0FBQyxDQUFDO0lBQzNELENBQUM7SUFFRCxFQUFFO0lBQ0YsR0FBRyxDQUFDLE1BQVMsRUFBRSxHQUFHLElBQWU7UUFDN0IsT0FBTyxJQUFJLENBQUMsYUFBYSxDQUFDLElBQUksQ0FBQyxLQUFLLEVBQUUsTUFBTSxFQUFFLEdBQUcsSUFBSSxDQUFDLENBQUM7SUFDM0QsQ0FBQztJQUVELEVBQUU7SUFDRixHQUFHLENBQUMsTUFBUyxFQUFFLEdBQUcsSUFBZTtRQUM3QixPQUFPLElBQUksQ0FBQyxhQUFhLENBQUMsSUFBSSxDQUFDLEtBQUssRUFBRSxNQUFNLEVBQUUsR0FBRyxJQUFJLENBQUMsQ0FBQztJQUMzRCxDQUFDO0lBRUQsRUFBRTtJQUNGLElBQUksQ0FBQyxNQUFTLEVBQUUsR0FBRyxJQUFlO1FBQzlCLE9BQU8sSUFBSSxDQUFDLGFBQWEsQ0FBQyxJQUFJLENBQUMsTUFBTSxFQUFFLE1BQU0sRUFBRSxHQUFHLElBQUksQ0FBQyxDQUFDO0lBQzVELENBQUM7SUFFRCxFQUFFO0lBQ0YsS0FBSyxDQUFDLE1BQVMsRUFBRSxHQUFHLElBQWU7UUFDL0IsT0FBTyxJQUFJLENBQUMsYUFBYSxDQUFDLElBQUksQ0FBQyxPQUFPLEVBQUUsTUFBTSxFQUFFLEdBQUcsSUFBSSxDQUFDLENBQUM7SUFDN0QsQ0FBQztJQUVELEVBQUU7SUFDRixTQUFTLENBQUMsTUFBUyxFQUFFLEdBQUcsSUFBZTtRQUNuQyxPQUFPLElBQUksQ0FBQyxhQUFhLENBQUMsSUFBSSxDQUFDLFdBQVcsRUFBRSxNQUFNLEVBQUUsR0FBRyxJQUFJLENBQUMsQ0FBQztJQUNqRSxDQUFDO0lBRUQsRUFBRTtJQUNGLGNBQWMsQ0FBQyxNQUFTLEVBQUUsR0FBRyxJQUFlO1FBQ3hDLE9BQU8sSUFBSSxDQUFDLGFBQWEsQ0FBQyxJQUFJLENBQUMsZ0JBQWdCLEVBQUUsTUFBTSxFQUFFLEdBQUcsSUFBSSxDQUFDLENBQUM7SUFDdEUsQ0FBQztDQUNKIiwic291cmNlc0NvbnRlbnQiOlsiLy8gZGVuby1saW50LWlnbm9yZS1maWxlIG5vLWV4cGxpY2l0LWFueSBiYW4tdHlwZXMgbm8tZXhwbGljaXQtYW55XHJcbmV4cG9ydCBkZWZhdWx0IGNsYXNzIE9iamVjdFByb3h5PFQgZXh0ZW5kcyBvYmplY3R8RnVuY3Rpb24+IGltcGxlbWVudHMgUHJveHlIYW5kbGVyPFQ+IHtcclxuICAgICNoYW5kbGVyVXRpbHM6IGFueSA9IHt9O1xyXG5cclxuICAgIC8vXHJcbiAgICBjb25zdHJ1Y3RvcihoYW5kbGVyVXRpbHMgPSB7fSkge1xyXG4gICAgICAgIHRoaXMuI2hhbmRsZXJVdGlscyA9IGhhbmRsZXJVdGlscztcclxuICAgIH1cclxuXHJcbiAgICAvL1xyXG4gICAgYWNjZXNzKHRhcmdldDogVCwgLi4uYXJnczogdW5rbm93bltdKSB7XHJcbiAgICAgICAgcmV0dXJuIHRoaXMuI2hhbmRsZXJVdGlscy4kaG5kKFwiYWNjZXNzXCIsIHRhcmdldCwgLi4uYXJncyk7XHJcbiAgICB9XHJcblxyXG4gICAgLy9cclxuICAgIGdldCh0YXJnZXQ6IFQsIC4uLmFyZ3M6IHVua25vd25bXSkge1xyXG4gICAgICAgIHJldHVybiB0aGlzLiNoYW5kbGVyVXRpbHMuJGhuZChcImdldFwiLCB0YXJnZXQsIC4uLmFyZ3MpO1xyXG4gICAgfVxyXG5cclxuICAgIC8vXHJcbiAgICBzZXQodGFyZ2V0OiBULCAuLi5hcmdzOiB1bmtub3duW10pIHtcclxuICAgICAgICByZXR1cm4gdGhpcy4jaGFuZGxlclV0aWxzLiRobmQoXCJzZXRcIiwgdGFyZ2V0LCAuLi5hcmdzKTtcclxuICAgIH1cclxuXHJcbiAgICAvL1xyXG4gICAgaGFzKHRhcmdldDogVCwgLi4uYXJnczogdW5rbm93bltdKSB7XHJcbiAgICAgICAgcmV0dXJuIHRoaXMuI2hhbmRsZXJVdGlscy4kaG5kKFwiaGFzXCIsIHRhcmdldCwgLi4uYXJncyk7XHJcbiAgICB9XHJcblxyXG4gICAgLy9cclxuICAgIGNhbGwodGFyZ2V0OiBULCAuLi5hcmdzOiB1bmtub3duW10pIHtcclxuICAgICAgICByZXR1cm4gdGhpcy4jaGFuZGxlclV0aWxzLiRobmQoXCJjYWxsXCIsIHRhcmdldCwgLi4uYXJncyk7XHJcbiAgICB9XHJcblxyXG4gICAgLy9cclxuICAgIGFwcGx5KHRhcmdldDogVCwgLi4uYXJnczogdW5rbm93bltdKSB7XHJcbiAgICAgICAgcmV0dXJuIHRoaXMuI2hhbmRsZXJVdGlscy4kaG5kKFwiYXBwbHlcIiwgdGFyZ2V0LCAuLi5hcmdzKTtcclxuICAgIH1cclxuXHJcbiAgICAvL1xyXG4gICAgY29uc3RydWN0KHRhcmdldDogVCwgLi4uYXJnczogdW5rbm93bltdKSB7XHJcbiAgICAgICAgcmV0dXJuIHRoaXMuI2hhbmRsZXJVdGlscy4kaG5kKFwiY29uc3RydWN0XCIsIHRhcmdldCwgLi4uYXJncyk7XHJcbiAgICB9XHJcblxyXG4gICAgLy9cclxuICAgIGRlbGV0ZVByb3BlcnR5KHRhcmdldDogVCwgLi4uYXJnczogdW5rbm93bltdKSB7XHJcbiAgICAgICAgcmV0dXJuIHRoaXMuI2hhbmRsZXJVdGlscy4kaG5kKFwiZGVsZXRlUHJvcGVydHlcIiwgdGFyZ2V0LCAuLi5hcmdzKTtcclxuICAgIH1cclxufVxyXG5cclxuIl19","// deno-lint-ignore-file no-explicit-any\nimport { isSymbol, FORBIDDEN_KEYS, META_KEYS } from \"../Utils/Useful\";\nimport { extract } from \"../Utils/InstructionType\";\nimport ORG from \"../Utils/OrganicType\";\n//\nimport DataHandler from \"./DataHandler\";\n//\nexport default class RemoteReferenceHandler extends DataHandler {\n    #exChanger;\n    //\n    constructor(exChanger) {\n        super();\n        this.#exChanger = exChanger;\n    }\n    //\n    get /*@__MANGLE_PROP__*/ $exc() { return this.#exChanger; }\n    //\n    /*@__MANGLE_PROP__*/ $data(t) { return extract(t) ?? t; }\n    /*@__MANGLE_PROP__*/ $hnd(cmd, meta, ...args) {\n        const data = this.$data(meta);\n        // return meta as is\n        if (cmd == \"get\") {\n            if (args[0] == ORG.data) {\n                return data;\n            }\n            ;\n            if (args[0] == ORG.exc) {\n                return this.$exc ?? data?.[ORG.exc] ?? data?.then?.((e) => e?.[ORG.exc]) ?? null;\n            }\n            ;\n            if ( // forbidden actions\n            isSymbol(args?.[0]) ||\n                FORBIDDEN_KEYS.has(args?.[0]) ||\n                META_KEYS.has?.(args?.[0])) {\n                return null;\n            }\n            ;\n        }\n        /*@__MANGLE_PROP__*/\n        return this.#exChanger?.$request(cmd, meta, args);\n    }\n    //\n    /*@__MANGLE_PROP__*/ $get(_) { return null; }\n    ;\n}\n//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiUmVtb3RlSGFuZGxlci5qcyIsInNvdXJjZVJvb3QiOiIiLCJzb3VyY2VzIjpbIlJlbW90ZUhhbmRsZXIudHMiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IkFBQUEsd0NBQXdDO0FBQ3hDLE9BQU8sRUFBRSxRQUFRLEVBQUUsY0FBYyxFQUFFLFNBQVMsRUFBRSxNQUFNLGlCQUFpQixDQUFDO0FBQ3RFLE9BQU8sRUFBRSxPQUFPLEVBQUUsTUFBTSwwQkFBMEIsQ0FBQztBQUNuRCxPQUFPLEdBQUcsTUFBTSxzQkFBc0IsQ0FBQztBQUV2QyxFQUFFO0FBQ0YsT0FBTyxXQUFXLE1BQU0sZUFBZSxDQUFDO0FBRXhDLEVBQUU7QUFDRixNQUFNLENBQUMsT0FBTyxPQUFPLHNCQUF1QixTQUFRLFdBQVc7SUFDM0QsVUFBVSxDQUFXO0lBRXJCLEVBQUU7SUFDRixZQUFZLFNBQW1CO1FBQzNCLEtBQUssRUFBRSxDQUFDO1FBQ1IsSUFBSSxDQUFDLFVBQVUsR0FBRyxTQUFTLENBQUM7SUFDaEMsQ0FBQztJQUVELEVBQUU7SUFDRixJQUFJLG9CQUFvQixDQUFDLElBQUksS0FBSyxPQUFPLElBQUksQ0FBQyxVQUFVLENBQUMsQ0FBQyxDQUFDO0lBRTNELEVBQUU7SUFDRixvQkFBb0IsQ0FBQyxLQUFLLENBQUMsQ0FBVSxJQUFJLE9BQU8sT0FBTyxDQUFDLENBQUMsQ0FBQyxJQUFJLENBQUMsQ0FBQyxDQUFDLENBQUM7SUFDbEUsb0JBQW9CLENBQUMsSUFBSSxDQUFDLEdBQVcsRUFBRSxJQUFhLEVBQUUsR0FBRyxJQUFlO1FBQ3BFLE1BQU0sSUFBSSxHQUFRLElBQUksQ0FBQyxLQUFLLENBQUMsSUFBSSxDQUFDLENBQUM7UUFFbkMsb0JBQW9CO1FBQ3BCLElBQUksR0FBRyxJQUFJLEtBQUssRUFBRSxDQUFDO1lBQ2YsSUFBSSxJQUFJLENBQUMsQ0FBQyxDQUFDLElBQUksR0FBRyxDQUFDLElBQUksRUFBRSxDQUFDO2dCQUFDLE9BQU8sSUFBSSxDQUFDO1lBQUMsQ0FBQztZQUFBLENBQUM7WUFDMUMsSUFBSSxJQUFJLENBQUMsQ0FBQyxDQUFDLElBQUksR0FBRyxDQUFDLEdBQUcsRUFBRSxDQUFDO2dCQUFDLE9BQU8sSUFBSSxDQUFDLElBQUksSUFBSSxJQUFJLEVBQUUsQ0FBQyxHQUFHLENBQUMsR0FBRyxDQUFDLElBQUksSUFBSSxFQUFFLElBQUksRUFBRSxDQUFDLENBQUMsQ0FBTSxFQUFDLEVBQUUsQ0FBQSxDQUFDLEVBQUUsQ0FBQyxHQUFHLENBQUMsR0FBRyxDQUFDLENBQUMsSUFBSSxJQUFJLENBQUM7WUFBQyxDQUFDO1lBQUEsQ0FBQztZQUNqSCxLQUFLLG9CQUFvQjtZQUNyQixRQUFRLENBQUMsSUFBSSxFQUFFLENBQUMsQ0FBQyxDQUFDLENBQUM7Z0JBQ25CLGNBQWMsQ0FBQyxHQUFHLENBQUMsSUFBSSxFQUFFLENBQUMsQ0FBQyxDQUFXLENBQUM7Z0JBQ3ZDLFNBQVMsQ0FBQyxHQUFHLEVBQUUsQ0FBQyxJQUFJLEVBQUUsQ0FBQyxDQUFDLENBQVEsQ0FBQyxFQUNuQyxDQUFDO2dCQUFDLE9BQU8sSUFBSSxDQUFDO1lBQUMsQ0FBQztZQUFBLENBQUM7UUFDdkIsQ0FBQztRQUVELG9CQUFvQjtRQUNwQixPQUFPLElBQUksQ0FBQyxVQUFVLEVBQUUsUUFBUSxDQUFDLEdBQUcsRUFBRSxJQUFJLEVBQUUsSUFBSSxDQUFDLENBQUM7SUFDdEQsQ0FBQztJQUVELEVBQUU7SUFDRixvQkFBb0IsQ0FBQyxJQUFJLENBQUMsQ0FBc0IsSUFBUyxPQUFPLElBQUksQ0FBQyxDQUFDLENBQUM7SUFBQSxDQUFDO0NBQzNFIiwic291cmNlc0NvbnRlbnQiOlsiLy8gZGVuby1saW50LWlnbm9yZS1maWxlIG5vLWV4cGxpY2l0LWFueVxyXG5pbXBvcnQgeyBpc1N5bWJvbCwgRk9SQklEREVOX0tFWVMsIE1FVEFfS0VZUyB9IGZyb20gXCIuLi9VdGlscy9Vc2VmdWxcIjtcclxuaW1wb3J0IHsgZXh0cmFjdCB9IGZyb20gXCIuLi9VdGlscy9JbnN0cnVjdGlvblR5cGVcIjtcclxuaW1wb3J0IE9SRyBmcm9tIFwiLi4vVXRpbHMvT3JnYW5pY1R5cGVcIjtcclxuXHJcbi8vXHJcbmltcG9ydCBEYXRhSGFuZGxlciBmcm9tIFwiLi9EYXRhSGFuZGxlclwiO1xyXG5cclxuLy9cclxuZXhwb3J0IGRlZmF1bHQgY2xhc3MgUmVtb3RlUmVmZXJlbmNlSGFuZGxlciBleHRlbmRzIERhdGFIYW5kbGVyIHtcclxuICAgICNleENoYW5nZXI6IGFueXxudWxsO1xyXG5cclxuICAgIC8vXHJcbiAgICBjb25zdHJ1Y3RvcihleENoYW5nZXI6IGFueXxudWxsKXtcclxuICAgICAgICBzdXBlcigpO1xyXG4gICAgICAgIHRoaXMuI2V4Q2hhbmdlciA9IGV4Q2hhbmdlcjtcclxuICAgIH1cclxuXHJcbiAgICAvL1xyXG4gICAgZ2V0IC8qQF9fTUFOR0xFX1BST1BfXyovICRleGMoKSB7IHJldHVybiB0aGlzLiNleENoYW5nZXI7IH1cclxuXHJcbiAgICAvL1xyXG4gICAgLypAX19NQU5HTEVfUFJPUF9fKi8gJGRhdGEodDogdW5rbm93bikgeyByZXR1cm4gZXh0cmFjdCh0KSA/PyB0OyB9XHJcbiAgICAvKkBfX01BTkdMRV9QUk9QX18qLyAkaG5kKGNtZDogc3RyaW5nLCBtZXRhOiB1bmtub3duLCAuLi5hcmdzOiB1bmtub3duW10pIHtcclxuICAgICAgICBjb25zdCBkYXRhOiBhbnkgPSB0aGlzLiRkYXRhKG1ldGEpO1xyXG5cclxuICAgICAgICAvLyByZXR1cm4gbWV0YSBhcyBpc1xyXG4gICAgICAgIGlmIChjbWQgPT0gXCJnZXRcIikge1xyXG4gICAgICAgICAgICBpZiAoYXJnc1swXSA9PSBPUkcuZGF0YSkgeyByZXR1cm4gZGF0YTsgfTtcclxuICAgICAgICAgICAgaWYgKGFyZ3NbMF0gPT0gT1JHLmV4YykgeyByZXR1cm4gdGhpcy4kZXhjID8/IGRhdGE/LltPUkcuZXhjXSA/PyBkYXRhPy50aGVuPy4oKGU6IGFueSk9PmU/LltPUkcuZXhjXSkgPz8gbnVsbDsgfTtcclxuICAgICAgICAgICAgaWYgKCAvLyBmb3JiaWRkZW4gYWN0aW9uc1xyXG4gICAgICAgICAgICAgICAgaXNTeW1ib2woYXJncz8uWzBdKSB8fFxyXG4gICAgICAgICAgICAgICAgRk9SQklEREVOX0tFWVMuaGFzKGFyZ3M/LlswXSBhcyBzdHJpbmcpIHx8IFxyXG4gICAgICAgICAgICAgICAgTUVUQV9LRVlTLmhhcz8uKGFyZ3M/LlswXSBhcyBhbnkpXHJcbiAgICAgICAgICAgICkgeyByZXR1cm4gbnVsbDsgfTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIC8qQF9fTUFOR0xFX1BST1BfXyovXHJcbiAgICAgICAgcmV0dXJuIHRoaXMuI2V4Q2hhbmdlcj8uJHJlcXVlc3QoY21kLCBtZXRhLCBhcmdzKTtcclxuICAgIH1cclxuXHJcbiAgICAvL1xyXG4gICAgLypAX19NQU5HTEVfUFJPUF9fKi8gJGdldChfOiB1bmtub3dufHN0cmluZ3xudWxsKTogYW55IHsgcmV0dXJuIG51bGw7IH07XHJcbn1cclxuIl19","// deno-lint-ignore-file no-explicit-any\nimport UUIDMap from \"../Utils/UUIDMap\";\nimport { ORG } from \"../Utils/OrganicType\";\nimport { extract } from \"../Utils/InstructionType\";\n//\nimport DataHandler from \"./DataHandler\";\nexport default class ObjectPoolMemberHandler extends DataHandler {\n    #memoryPool;\n    //\n    constructor(memoryPool = new UUIDMap()) {\n        super();\n        this.#memoryPool = memoryPool;\n    }\n    // there is may not be meta object\n    /*@__MANGLE_PROP__*/ $data(t) {\n        return super.$data((() => {\n            const wrap = (extract(t) ?? t);\n            const uuid = wrap?.[ORG.uuid] ?? wrap ?? t;\n            if (typeof uuid == \"string\") {\n                return this.#memoryPool?.get(uuid) ?? t;\n            }\n            return t;\n        })());\n    }\n    //\n    /*@__MANGLE_PROP__*/ $get(t) {\n        const wrap = (extract(t) ?? t);\n        const uuid = (wrap?.[ORG.uuid] ?? wrap) ?? t;\n        if (typeof uuid == \"string\") {\n            return this.#memoryPool?.get(uuid);\n        }\n        return null;\n    }\n    ;\n}\n//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiTWVtb3J5SGFuZGxlci5qcyIsInNvdXJjZVJvb3QiOiIiLCJzb3VyY2VzIjpbIk1lbW9yeUhhbmRsZXIudHMiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IkFBQUEsd0NBQXdDO0FBQ3hDLE9BQU8sT0FBTyxNQUFNLGtCQUFrQixDQUFDO0FBQ3ZDLE9BQU8sRUFBRSxHQUFHLEVBQUUsTUFBTyxzQkFBc0IsQ0FBQztBQUM1QyxPQUFPLEVBQUUsT0FBTyxFQUFFLE1BQU0sMEJBQTBCLENBQUM7QUFFbkQsRUFBRTtBQUNGLE9BQU8sV0FBVyxNQUFNLGVBQWUsQ0FBQztBQUd4QyxNQUFNLENBQUMsT0FBTyxPQUFPLHVCQUF3QixTQUFRLFdBQVc7SUFDNUQsV0FBVyxDQUFpQjtJQUU1QixFQUFFO0lBQ0YsWUFBWSxhQUE2QixJQUFJLE9BQU8sRUFBRTtRQUNsRCxLQUFLLEVBQUUsQ0FBQztRQUNSLElBQUksQ0FBQyxXQUFXLEdBQUcsVUFBVSxDQUFDO0lBQ2xDLENBQUM7SUFFRCxrQ0FBa0M7SUFDbEMsb0JBQW9CLENBQUMsS0FBSyxDQUFDLENBQXNCO1FBQzdDLE9BQU8sS0FBSyxDQUFDLEtBQUssQ0FBQyxDQUFDLEdBQUUsRUFBRTtZQUNwQixNQUFNLElBQUksR0FBRyxDQUFDLE9BQU8sQ0FBQyxDQUFDLENBQUMsSUFBSSxDQUFDLENBQVEsQ0FBQztZQUN0QyxNQUFNLElBQUksR0FBSSxJQUFZLEVBQUUsQ0FBQyxHQUFHLENBQUMsSUFBSSxDQUFDLElBQUksSUFBSSxJQUFJLENBQUMsQ0FBQztZQUNwRCxJQUFJLE9BQU8sSUFBSSxJQUFJLFFBQVEsRUFBRSxDQUFDO2dCQUMxQixPQUFPLElBQUksQ0FBQyxXQUFXLEVBQUUsR0FBRyxDQUFDLElBQUksQ0FBQyxJQUFJLENBQUMsQ0FBQztZQUM1QyxDQUFDO1lBQ0QsT0FBTyxDQUFDLENBQUM7UUFDYixDQUFDLENBQUMsRUFBRSxDQUFDLENBQUM7SUFDVixDQUFDO0lBRUQsRUFBRTtJQUNGLG9CQUFvQixDQUFDLElBQUksQ0FBQyxDQUFzQjtRQUM1QyxNQUFNLElBQUksR0FBRyxDQUFDLE9BQU8sQ0FBQyxDQUFDLENBQUMsSUFBSSxDQUFDLENBQVEsQ0FBQztRQUN0QyxNQUFNLElBQUksR0FBRyxDQUFFLElBQVksRUFBRSxDQUFDLEdBQUcsQ0FBQyxJQUFJLENBQUMsSUFBSSxJQUFJLENBQVcsSUFBSSxDQUFDLENBQUM7UUFDaEUsSUFBSSxPQUFPLElBQUksSUFBSSxRQUFRLEVBQUUsQ0FBQztZQUMxQixPQUFPLElBQUksQ0FBQyxXQUFXLEVBQUUsR0FBRyxDQUFDLElBQUksQ0FBQyxDQUFDO1FBQ3ZDLENBQUM7UUFDRCxPQUFPLElBQUksQ0FBQztJQUNoQixDQUFDO0lBQUEsQ0FBQztDQUNMIiwic291cmNlc0NvbnRlbnQiOlsiLy8gZGVuby1saW50LWlnbm9yZS1maWxlIG5vLWV4cGxpY2l0LWFueVxyXG5pbXBvcnQgVVVJRE1hcCBmcm9tIFwiLi4vVXRpbHMvVVVJRE1hcFwiO1xyXG5pbXBvcnQgeyBPUkcgfSAgZnJvbSBcIi4uL1V0aWxzL09yZ2FuaWNUeXBlXCI7XHJcbmltcG9ydCB7IGV4dHJhY3QgfSBmcm9tIFwiLi4vVXRpbHMvSW5zdHJ1Y3Rpb25UeXBlXCI7XHJcblxyXG4vL1xyXG5pbXBvcnQgRGF0YUhhbmRsZXIgZnJvbSBcIi4vRGF0YUhhbmRsZXJcIjtcclxuXHJcblxyXG5leHBvcnQgZGVmYXVsdCBjbGFzcyBPYmplY3RQb29sTWVtYmVySGFuZGxlciBleHRlbmRzIERhdGFIYW5kbGVyIHtcclxuICAgICNtZW1vcnlQb29sOiBVVUlETWFwIHwgbnVsbDtcclxuXHJcbiAgICAvL1xyXG4gICAgY29uc3RydWN0b3IobWVtb3J5UG9vbDogVVVJRE1hcCB8IG51bGwgPSBuZXcgVVVJRE1hcCgpKXtcclxuICAgICAgICBzdXBlcigpO1xyXG4gICAgICAgIHRoaXMuI21lbW9yeVBvb2wgPSBtZW1vcnlQb29sO1xyXG4gICAgfVxyXG5cclxuICAgIC8vIHRoZXJlIGlzIG1heSBub3QgYmUgbWV0YSBvYmplY3RcclxuICAgIC8qQF9fTUFOR0xFX1BST1BfXyovICRkYXRhKHQ6IHVua25vd258c3RyaW5nfG51bGwpOiBhbnkge1xyXG4gICAgICAgIHJldHVybiBzdXBlci4kZGF0YSgoKCk9PntcclxuICAgICAgICAgICAgY29uc3Qgd3JhcCA9IChleHRyYWN0KHQpID8/IHQpIGFzIGFueTtcclxuICAgICAgICAgICAgY29uc3QgdXVpZCA9ICh3cmFwIGFzIGFueSk/LltPUkcudXVpZF0gPz8gd3JhcCA/PyB0O1xyXG4gICAgICAgICAgICBpZiAodHlwZW9mIHV1aWQgPT0gXCJzdHJpbmdcIikge1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuIHRoaXMuI21lbW9yeVBvb2w/LmdldCh1dWlkKSA/PyB0O1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIHJldHVybiB0O1xyXG4gICAgICAgIH0pKCkpO1xyXG4gICAgfVxyXG5cclxuICAgIC8vXHJcbiAgICAvKkBfX01BTkdMRV9QUk9QX18qLyAkZ2V0KHQ6IHVua25vd258c3RyaW5nfG51bGwpOiBhbnkge1xyXG4gICAgICAgIGNvbnN0IHdyYXAgPSAoZXh0cmFjdCh0KSA/PyB0KSBhcyBhbnk7XHJcbiAgICAgICAgY29uc3QgdXVpZCA9ICgod3JhcCBhcyBhbnkpPy5bT1JHLnV1aWRdID8/IHdyYXApIGFzIHN0cmluZyA/PyB0O1xyXG4gICAgICAgIGlmICh0eXBlb2YgdXVpZCA9PSBcInN0cmluZ1wiKSB7XHJcbiAgICAgICAgICAgIHJldHVybiB0aGlzLiNtZW1vcnlQb29sPy5nZXQodXVpZCk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHJldHVybiBudWxsO1xyXG4gICAgfTtcclxufVxyXG4iXX0=","// deno-lint-ignore-file no-explicit-any ban-types\nimport ObjectProxy from \"../../Interface/ObjectProxy\";\n//\nimport { doOnlyAfterResolve, isPromise, UUIDv4 } from \"../Utils/Useful\";\nimport { extract, MakeReference } from \"../Utils/InstructionType\";\n//\nimport RemoteReferenceHandler from \"../Handlers/RemoteHandler\";\nimport MemoryHandler from \"../Handlers/MemoryHandler\";\nimport DataHandler from \"../Handlers/DataHandler\";\nimport PromiseHandler from \"../Handlers/PromiseHandler\";\nimport FLOW from \"./FLOW\";\n//\nimport * as $M from \"./MessageChannel\";\nimport { ORG, bindWithContext } from \"../Utils/OrganicType\";\nimport { TS } from \"../Utils/Alias\";\n//\nexport default class ExChanger {\n    #flow = null;\n    #handler = null;\n    #memoryPool = null;\n    #coder = null;\n    //\n    constructor(context) {\n        if (typeof context != TS.udf && context != null) {\n            bindWithContext(context, this);\n            this.#flow = new FLOW(context);\n        }\n        else {\n            console.warn(\"Context not bounded!\");\n        }\n    }\n    //\n    initialize() {\n        if (this.#flow?.importToSelf?.($M) != null) {\n            this.#coder = this.#flow?.$imports?.$cd ?? this.#coder;\n            this.#memoryPool = this.#flow?.$imports?.$mp ?? this.#memoryPool;\n        }\n        else {\n            throw Error(\"Worker Engine Not Defined!\");\n        }\n        //\n        if ((this.#handler = (this.#flow?.$imports?.$dh ?? this.#handler)) != null) {\n            this.#handler?.$addHandler(\"loc\", new MemoryHandler(this.#memoryPool));\n            this.#handler?.$addHandler(\"rmt\", new RemoteReferenceHandler(this));\n            this.#handler?.$addHandler(\"pms\", new PromiseHandler());\n            this.#handler?.$addHandler(\"dir\", new DataHandler());\n        }\n        else {\n            throw Error(\"Invalid Native Module!\");\n        }\n        //\n        return this; //.sync();\n    }\n    //\n    get /*@__MANGLE_PROP__*/ $imports() { return this.#flow?.$imports || {}; }\n    get /*@__MANGLE_PROP__*/ /*@__PURE__*/ $sync() { return this.#flow?.sync?.(); }\n    async /*@__PURE__*/ sync() { await this.$sync; return this; }\n    //doOnlyAfterResolve\n    /*@__MANGLE_PROP__*/ $makePromise(target) {\n        //\n        try {\n            const ext = target?.[ORG.data] ?? target;\n            if (isPromise(target)) {\n                return (new Proxy(MakeReference(ext), new ObjectProxy(this.#handler?.$getHandler?.(\"pms\"))));\n            }\n            return target;\n        }\n        catch (e) {\n            console.error(e);\n            return null;\n        }\n        //return null;\n    }\n    //\n    /*@__MANGLE_PROP__*/ $act(result, cb) {\n        try {\n            return this.$makePromise(doOnlyAfterResolve(result, cb));\n        }\n        catch (e) {\n            console.error(e);\n            return null;\n        }\n    }\n    //\n    /*@__MANGLE_PROP__*/ $request(cmd, meta, args) {\n        const transfer = [];\n        const encoded = this.#coder?.encode([cmd, meta, ...args], transfer);\n        const result = this.#flow?.callTask?.(encoded, transfer);\n        //\n        try {\n            return this.$act(result, (res) => this.#coder?.decode?.(res, transfer));\n        }\n        catch (e) {\n            console.error(e);\n            return null;\n        }\n    }\n    //\n    //unwrap(obj) { return obj?.[$data] ?? obj; }\n    //local(name) { return wrapMeta({ORG.uuid: name, ORG.type: \"reference\"}, this.#handler); }\n    //\n    /*@__MANGLE_PROP__*/ $importToUnit(source) { return this.#flow?.importToUnit(source); }\n    /*@__MANGLE_PROP__*/ $importToSelf(module) { return this.#flow?.importToSelf(module); }\n    //\n    register(object, name = \"\") {\n        return this.#memoryPool?.add?.(object, name) || \"\";\n    }\n    //\n    access(name = \"\") {\n        const com = this.$request(\"access\", {\n            [ORG.type]: \"ref\",\n            [ORG.uuid]: name\n        }, []);\n        return com;\n    }\n    // lazy transfer (for passing as arguments)\n    transfer($node = null, name = \"\") {\n        return this.$act($node, (node) => {\n            const meta = extract(node);\n            const uuid = (name || meta?.[ORG.uuid] || UUIDv4());\n            const real = meta?.[ORG.node] ?? this.#memoryPool?.get?.(uuid) ?? node;\n            //\n            if (this.#handler) {\n                return new Proxy(MakeReference({\n                    [ORG.type]: \"tf\",\n                    [ORG.uuid]: uuid,\n                    [ORG.node]: real\n                }), new ObjectProxy(this.#handler));\n            }\n            //\n            return null;\n        });\n    }\n    // transfer from remote to host, or transfer actively (default is getter, setter/sender when has node argument)\n    doTransfer($name = \"\", node = null) {\n        return this.$act($name, (name) => {\n            return this.$act(node, (result) => {\n                // @ts-ignore \"sometimes, may got new UUID, or exists\"\n                const esm = extract(name);\n                // also you can do it with wrapped already (i.e. getting)\n                const meta = extract(result);\n                const uuid = (esm?.[ORG.uuid] || name || meta?.[ORG.uuid] || UUIDv4() || \"\");\n                const real = meta?.[ORG.node] ?? this.#memoryPool?.get?.(uuid) ?? result ?? esm?.[ORG.node];\n                // @ts-ignore \"make meta uuid equal\"\n                if (esm != null) {\n                    esm[ORG.uuid] = (uuid || \"\");\n                }\n                ; // assign uuid to meta\n                // @ts-ignore \"make meta uuid equal\"\n                if (meta != null) {\n                    meta[ORG.uuid] = (uuid || \"\");\n                }\n                ; // assign uuid to meta\n                // don't needs to transfer from remote\n                if (!result && real) {\n                    return real;\n                }\n                ;\n                // active transfer as argument to remote\n                result = (real != null ? this.$request(\"access\", {\n                    [ORG.type]: \"tf\",\n                    [ORG.uuid]: uuid,\n                    [ORG.node]: real\n                }, []) : this.$request(\"transfer\", (esm ?? {\n                    [ORG.type]: \"ref\",\n                    [ORG.uuid]: uuid\n                }), []));\n                //this.#flow?.sync?.();\n                return result;\n            });\n        });\n    }\n}\n//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiRXhDaGFuZ2VyLmpzIiwic291cmNlUm9vdCI6IiIsInNvdXJjZXMiOlsiRXhDaGFuZ2VyLnRzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiJBQUFBLGtEQUFrRDtBQUNsRCxPQUFPLFdBQVcsTUFBTSw2QkFBNkIsQ0FBQztBQUV0RCxFQUFFO0FBQ0YsT0FBTyxFQUFFLGtCQUFrQixFQUFFLFNBQVMsRUFBRSxNQUFNLEVBQWMsTUFBTSxpQkFBaUIsQ0FBQztBQUNwRixPQUFPLEVBQUUsT0FBTyxFQUFFLGFBQWEsRUFBRSxNQUFNLDBCQUEwQixDQUFDO0FBRWxFLEVBQUU7QUFDRixPQUFPLHNCQUFzQixNQUFNLDJCQUEyQixDQUFDO0FBQy9ELE9BQU8sYUFBYSxNQUFNLDJCQUEyQixDQUFDO0FBQ3RELE9BQU8sV0FBVyxNQUFNLHlCQUF5QixDQUFDO0FBQ2xELE9BQU8sY0FBYyxNQUFNLDRCQUE0QixDQUFDO0FBTXhELE9BQU8sSUFBSSxNQUFNLFFBQVEsQ0FBQztBQUUxQixFQUFFO0FBQ0YsT0FBTyxLQUFLLEVBQUUsTUFBTSxrQkFBa0IsQ0FBQztBQUN2QyxPQUFPLEVBQUUsR0FBRyxFQUFTLGVBQWUsRUFBRSxNQUFNLHNCQUFzQixDQUFDO0FBQ25FLE9BQU8sRUFBRSxFQUFFLEVBQUUsTUFBTSxnQkFBZ0IsQ0FBQztBQUVwQyxFQUFFO0FBQ0YsTUFBTSxDQUFDLE9BQU8sT0FBTyxTQUFTO0lBQzFCLEtBQUssR0FBZ0IsSUFBSSxDQUFDO0lBQzFCLFFBQVEsR0FBNEIsSUFBSSxDQUFDO0lBQ3pDLFdBQVcsR0FBbUIsSUFBSSxDQUFDO0lBQ25DLE1BQU0sR0FBcUIsSUFBSSxDQUFDO0lBRWhDLEVBQUU7SUFDRixZQUFZLE9BQVk7UUFDcEIsSUFBSSxPQUFPLE9BQU8sSUFBSSxFQUFFLENBQUMsR0FBRyxJQUFJLE9BQU8sSUFBSSxJQUFJLEVBQUUsQ0FBQztZQUM5QyxlQUFlLENBQUMsT0FBTyxFQUFFLElBQUksQ0FBQyxDQUFDO1lBQy9CLElBQUksQ0FBQyxLQUFL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Q0FBQztnQkFFVCx1QkFBdUI7Z0JBQ3ZCLE9BQU8sTUFBa0IsQ0FBQztZQUM5QixDQUFDLENBQUMsQ0FBQztRQUNQLENBQUMsQ0FBQyxDQUFDO0lBQ1AsQ0FBQztDQUNKIiwic291cmNlc0NvbnRlbnQiOlsiLy8gZGVuby1saW50LWlnbm9yZS1maWxlIG5vLWV4cGxpY2l0LWFueSBiYW4tdHlwZXNcclxuaW1wb3J0IE9iamVjdFByb3h5IGZyb20gXCIuLi8uLi9JbnRlcmZhY2UvT2JqZWN0UHJveHlcIjtcclxuXHJcbi8vXHJcbmltcG9ydCB7IGRvT25seUFmdGVyUmVzb2x2ZSwgaXNQcm9taXNlLCBVVUlEdjQsIHR5cGUgSVdyYXAgfSBmcm9tIFwiLi4vVXRpbHMvVXNlZnVsXCI7XHJcbmltcG9ydCB7IGV4dHJhY3QsIE1ha2VSZWZlcmVuY2UgfSBmcm9tIFwiLi4vVXRpbHMvSW5zdHJ1Y3Rpb25UeXBlXCI7XHJcblxyXG4vL1xyXG5pbXBvcnQgUmVtb3RlUmVmZXJlbmNlSGFuZGxlciBmcm9tIFwiLi4vSGFuZGxlcnMvUmVtb3RlSGFuZGxlclwiO1xyXG5pbXBvcnQgTWVtb3J5SGFuZGxlciBmcm9tIFwiLi4vSGFuZGxlcnMvTWVtb3J5SGFuZGxlclwiO1xyXG5pbXBvcnQgRGF0YUhhbmRsZXIgZnJvbSBcIi4uL0hhbmRsZXJzL0RhdGFIYW5kbGVyXCI7XHJcbmltcG9ydCBQcm9taXNlSGFuZGxlciBmcm9tIFwiLi4vSGFuZGxlcnMvUHJvbWlzZUhhbmRsZXJcIjtcclxuaW1wb3J0IHR5cGUgVW5pdmVyc2FsSGFuZGxlciBmcm9tIFwiLi4vSGFuZGxlcnMvVW5pdmVyc2FsSGFuZGxlclwiO1xyXG5cclxuLy9cclxuaW1wb3J0IHR5cGUgUHJlQ29kaW5nIGZyb20gXCIuLi9QcmVDb2RpbmcvUHJlQ29kaW5nXCI7XHJcbmltcG9ydCB0eXBlIFVVSURNYXAgZnJvbSBcIi4uL1V0aWxzL1VVSURNYXBcIjtcclxuaW1wb3J0IEZMT1cgZnJvbSBcIi4vRkxPV1wiO1xyXG5cclxuLy9cclxuaW1wb3J0ICogYXMgJE0gZnJvbSBcIi4vTWVzc2FnZUNoYW5uZWxcIjtcclxuaW1wb3J0IHsgT1JHLCBJTWV0YSwgYmluZFdpdGhDb250ZXh0IH0gZnJvbSBcIi4uL1V0aWxzL09yZ2FuaWNUeXBlXCI7XHJcbmltcG9ydCB7IFRTIH0gZnJvbSBcIi4uL1V0aWxzL0FsaWFzXCI7XHJcblxyXG4vL1xyXG5leHBvcnQgZGVmYXVsdCBjbGFzcyBFeENoYW5nZXIge1xyXG4gICAgI2Zsb3c6IEZMT1cgfCBudWxsID0gbnVsbDtcclxuICAgICNoYW5kbGVyOiBVbml2ZXJzYWxIYW5kbGVyIHwgbnVsbCA9IG51bGw7XHJcbiAgICAjbWVtb3J5UG9vbDogVVVJRE1hcCB8IG51bGwgPSBudWxsO1xyXG4gICAgI2NvZGVyOiBQcmVDb2RpbmcgfCBudWxsID0gbnVsbDtcclxuXHJcbiAgICAvL1xyXG4gICAgY29uc3RydWN0b3IoY29udGV4dDogYW55KSB7XHJcbiAgICAgICAgaWYgKHR5cGVvZiBjb250ZXh0ICE9IFRTLnVkZiAmJiBjb250ZXh0ICE9IG51bGwpIHtcclxuICAgICAgICAgICAgYmluZFdpdGhDb250ZXh0KGNvbnRleHQsIHRoaXMpO1xyXG4gICAgICAgICAgICB0aGlzLiNmbG93ID0gbmV3IEZMT1coY29udGV4dCk7XHJcbiAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgY29uc29sZS53YXJuKFwiQ29udGV4dCBub3QgYm91bmRlZCFcIik7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIC8vXHJcbiAgICBpbml0aWFsaXplKCkge1xyXG4gICAgICAgIGlmICh0aGlzLiNmbG93Py5pbXBvcnRUb1NlbGY/LigkTSkgIT0gbnVsbCkge1xyXG4gICAgICAgICAgICB0aGlzLiNjb2RlciAgICAgID0gdGhpcy4jZmxvdz8uJGltcG9ydHM/LiRjZCAgICAgID8/IHRoaXMuI2NvZGVyO1xyXG4gICAgICAgICAgICB0aGlzLiNtZW1vcnlQb29sID0gdGhpcy4jZmxvdz8uJGltcG9ydHM/LiRtcCAgPz8gdGhpcy4jbWVtb3J5UG9vbDtcclxuICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICB0aHJvdyBFcnJvcihcIldvcmtlciBFbmdpbmUgTm90IERlZmluZWQhXCIpO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgLy9cclxuICAgICAgICBpZiAoKHRoaXMuI2hhbmRsZXIgPSAodGhpcy4jZmxvdz8uJGltcG9ydHM/LiRkaCA/PyB0aGlzLiNoYW5kbGVyKSkgIT0gbnVsbCkge1xyXG4gICAgICAgICAgICB0aGlzLiNoYW5kbGVyPy4kYWRkSGFuZGxlcihcImxvY1wiLCBuZXcgTWVtb3J5SGFuZGxlcih0aGlzLiNtZW1vcnlQb29sKSk7XHJcbiAgICAgICAgICAgIHRoaXMuI2hhbmRsZXI/LiRhZGRIYW5kbGVyKFwicm10XCIsIG5ldyBSZW1vdGVSZWZlcmVuY2VIYW5kbGVyKHRoaXMpKTtcclxuICAgICAgICAgICAgdGhpcy4jaGFuZGxlcj8uJGFkZEhhbmRsZXIoXCJwbXNcIiwgbmV3IFByb21pc2VIYW5kbGVyKCkpO1xyXG4gICAgICAgICAgICB0aGlzLiNoYW5kbGVyPy4kYWRkSGFuZGxlcihcImRpclwiLCBuZXcgRGF0YUhhbmRsZXIoKSk7XHJcbiAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgdGhyb3cgRXJyb3IoXCJJbnZhbGlkIE5hdGl2ZSBNb2R1bGUhXCIpO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgLy9cclxuICAgICAgICByZXR1cm4gdGhpczsvLy5zeW5jKCk7XHJcbiAgICB9XHJcblxyXG4gICAgLy9cclxuICAgIGdldCAgIC8qQF9fTUFOR0xFX1BST1BfXyovICRpbXBvcnRzKCkgeyByZXR1cm4gdGhpcy4jZmxvdz8uJGltcG9ydHMgfHwge307IH1cclxuICAgIGdldCAgIC8qQF9fTUFOR0xFX1BST1BfXyovIC8qQF9fUFVSRV9fKi8gJHN5bmMoKSB7IHJldHVybiB0aGlzLiNmbG93Py5zeW5jPy4oKTsgfVxyXG4gICAgYXN5bmMgLypAX19QVVJFX18qLyBzeW5jKCkgeyBhd2FpdCB0aGlzLiRzeW5jOyByZXR1cm4gdGhpczsgfVxyXG5cclxuICAgIC8vZG9Pbmx5QWZ0ZXJSZXNvbHZlXHJcbiAgICAvKkBfX01BTkdMRV9QUk9QX18qLyAkbWFrZVByb21pc2U8VCBleHRlbmRzIHVua25vd24+KHRhcmdldDogVHxQcm9taXNlPFQ+KTogSVdyYXA8VD58bnVsbCB7XHJcbiAgICAgICAgLy9cclxuICAgICAgICB0cnkge1xyXG4gICAgICAgICAgICBjb25zdCBleHQgPSAodGFyZ2V0IGFzIGFueSk/LltPUkcuZGF0YV0gPz8gdGFyZ2V0O1xyXG4gICAgICAgICAgICBpZiAoaXNQcm9taXNlKHRhcmdldCkpIHsgcmV0dXJuICgobmV3IFByb3h5KE1ha2VSZWZlcmVuY2UoZXh0KSwgbmV3IE9iamVjdFByb3h5KHRoaXMuI2hhbmRsZXI/LiRnZXRIYW5kbGVyPy4oXCJwbXNcIikpKSkgYXMgSVdyYXA8VD4pOyB9XHJcbiAgICAgICAgICAgIHJldHVybiB0YXJnZXQgYXMgSVdyYXA8VD47XHJcbiAgICAgICAgfSBjYXRjaCAoZSkge1xyXG4gICAgICAgICAgICBjb25zb2xlLmVycm9yKGUpO1xyXG4gICAgICAgICAgICByZXR1cm4gbnVsbDtcclxuICAgICAgICB9XHJcbiAgICAgICAgLy9yZXR1cm4gbnVsbDtcclxuICAgIH1cclxuXHJcbiAgICAvL1xyXG4gICAgLypAX19NQU5HTEVfUFJPUF9fKi8gJGFjdDxUIGV4dGVuZHMgdW5rbm93bj4ocmVzdWx0OiBUfFByb21pc2U8VD4sIGNiOiAocmVzdWx0OiBUKSA9PiB2b2lkKTogSVdyYXA8VD58bnVsbCB7XHJcbiAgICAgICAgdHJ5IHtcclxuICAgICAgICAgICAgcmV0dXJuIHRoaXMuJG1ha2VQcm9taXNlKGRvT25seUFmdGVyUmVzb2x2ZShyZXN1bHQsIGNiKSk7XHJcbiAgICAgICAgfSBjYXRjaCAoZSkge1xyXG4gICAgICAgICAgICBjb25zb2xlLmVycm9yKGUpO1xyXG4gICAgICAgICAgICByZXR1cm4gbnVsbDtcclxuICAgICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgLy9cclxuICAgIC8qQF9fTUFOR0xFX1BST1BfXyovICRyZXF1ZXN0PFQgZXh0ZW5kcyB1bmtub3duPihjbWQ6IHN0cmluZywgbWV0YTogdW5rbm93biwgYXJncyA6IHVua25vd25bXSk6IElXcmFwPFQ+fG51bGwge1xyXG4gICAgICAgIGNvbnN0IHRyYW5zZmVyOiB1bmtub3duW10gPSBbXTtcclxuICAgICAgICBjb25zdCBlbmNvZGVkID0gdGhpcy4jY29kZXI/LmVuY29kZShbY21kLCBtZXRhLCAuLi5hcmdzXSwgdHJhbnNmZXIpIGFzIGFueVtdO1xyXG4gICAgICAgIGNvbnN0IHJlc3VsdCA9IHRoaXMuI2Zsb3c/LmNhbGxUYXNrPy4oZW5jb2RlZCwgdHJhbnNmZXIpO1xyXG5cclxuICAgICAgICAvL1xyXG4gICAgICAgIHRyeSB7XHJcbiAgICAgICAgICAgIHJldHVybiB0aGlzLiRhY3QocmVzdWx0LCAocmVzKT0+dGhpcy4jY29kZXI/LmRlY29kZT8uKHJlcywgdHJhbnNmZXIpKSBhcyBJV3JhcDxUPnxudWxsO1xyXG4gICAgICAgIH0gY2F0Y2ggKGUpIHtcclxuICAgICAgICAgICAgY29uc29sZS5lcnJvcihlKVxyXG4gICAgICAgICAgICByZXR1cm4gbnVsbDtcclxuICAgICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgLy9cclxuICAgIC8vdW53cmFwKG9iaikgeyByZXR1cm4gb2JqPy5bJGRhdGFdID8/IG9iajsgfVxyXG4gICAgLy9sb2NhbChuYW1lKSB7IHJldHVybiB3cmFwTWV0YSh7T1JHLnV1aWQ6IG5hbWUsIE9SRy50eXBlOiBcInJlZmVyZW5jZVwifSwgdGhpcy4jaGFuZGxlcik7IH1cclxuXHJcbiAgICAvL1xyXG4gICAgLypAX19NQU5HTEVfUFJPUF9fKi8gJGltcG9ydFRvVW5pdChzb3VyY2U6IHN0cmluZykgIHsgcmV0dXJuIHRoaXMuI2Zsb3c/LmltcG9ydFRvVW5pdChzb3VyY2UpOyB9XHJcbiAgICAvKkBfX01BTkdMRV9QUk9QX18qLyAkaW1wb3J0VG9TZWxmKG1vZHVsZTogdW5rbm93bikgeyByZXR1cm4gdGhpcy4jZmxvdz8uaW1wb3J0VG9TZWxmKG1vZHVsZSk7IH1cclxuXHJcbiAgICAvL1xyXG4gICAgcmVnaXN0ZXI8VCBleHRlbmRzIG9iamVjdHxGdW5jdGlvbj4ob2JqZWN0OiBULCBuYW1lID0gXCJcIik6IHN0cmluZyB8IG51bGwge1xyXG4gICAgICAgIHJldHVybiB0aGlzLiNtZW1vcnlQb29sPy5hZGQ/LihvYmplY3QsIG5hbWUpfHxcIlwiO1xyXG4gICAgfVxyXG5cclxuICAgIC8vXHJcbiAgICBhY2Nlc3M8VCBleHRlbmRzIHVua25vd24+KG5hbWUgPSBcIlwiKTogSVdyYXA8VD58bnVsbCB7XHJcbiAgICAgICAgY29uc3QgY29tID0gdGhpcy4kcmVxdWVzdChcImFjY2Vzc1wiLCB7XHJcbiAgICAgICAgICAgIFtPUkcudHlwZV06IFwicmVmXCIsXHJcbiAgICAgICAgICAgIFtPUkcudXVpZF06IG5hbWVcclxuICAgICAgICB9LCBbXSkgYXMgSVdyYXA8VD58bnVsbDtcclxuICAgICAgICByZXR1cm4gY29tO1xyXG4gICAgfVxyXG5cclxuICAgIC8vIGxhenkgdHJhbnNmZXIgKGZvciBwYXNzaW5nIGFzIGFyZ3VtZW50cylcclxuICAgIHRyYW5zZmVyPFQgZXh0ZW5kcyB1bmtub3duPigkbm9kZTogVCB8IG51bGwgPSBudWxsLCBuYW1lOiBzdHJpbmcgPSBcIlwiKSB7XHJcbiAgICAgICAgcmV0dXJuIHRoaXMuJGFjdCgkbm9kZSwgKG5vZGUpPT57XHJcbiAgICAgICAgICAgIGNvbnN0IG1ldGE6IElNZXRhID0gKGV4dHJhY3Qobm9kZSkgYXMgSU1ldGEpO1xyXG4gICAgICAgICAgICBjb25zdCB1dWlkOiBzdHJpbmcgPSAobmFtZSB8fCAobWV0YSBhcyBhbnkpPy5bT1JHLnV1aWRdIHx8IFVVSUR2NCgpKSBhcyBzdHJpbmc7XHJcbiAgICAgICAgICAgIGNvbnN0IHJlYWw6IFQgPSAobWV0YSBhcyBhbnkpPy5bT1JHLm5vZGVdID8/IHRoaXMuI21lbW9yeVBvb2w/LmdldD8uKHV1aWQpID8/IG5vZGU7XHJcblxyXG4gICAgICAgICAgICAvL1xyXG4gICAgICAgICAgICBpZiAodGhpcy4jaGFuZGxlcikge1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuIG5ldyBQcm94eShNYWtlUmVmZXJlbmNlKHtcclxuICAgICAgICAgICAgICAgICAgICBbT1JHLnR5cGVdOiBcInRmXCIsIFxyXG4gICAgICAgICAgICAgICAgICAgIFtPUkcudXVpZF06IHV1aWQsIFxyXG4gICAgICAgICAgICAgICAgICAgIFtPUkcubm9kZV06IHJlYWxcclxuICAgICAgICAgICAgICAgIH0pLCBuZXcgT2JqZWN0UHJveHkodGhpcy4jaGFuZGxlcikpO1xyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAvL1xyXG4gICAgICAgICAgICByZXR1cm4gbnVsbDtcclxuICAgICAgICB9KTtcclxuICAgICAgICBcclxuICAgIH1cclxuXHJcbiAgICAvLyB0cmFuc2ZlciBmcm9tIHJlbW90ZSB0byBob3N0LCBvciB0cmFuc2ZlciBhY3RpdmVseSAoZGVmYXVsdCBpcyBnZXR0ZXIsIHNldHRlci9zZW5kZXIgd2hlbiBoYXMgbm9kZSBhcmd1bWVudClcclxuICAgIGRvVHJhbnNmZXI8VCBleHRlbmRzIHVua25vd24+KCRuYW1lOiBzdHJpbmd8SU1ldGF8SVdyYXA8SU1ldGE+ID0gXCJcIiwgbm9kZTogVCB8IG51bGwgPSBudWxsKTogSVdyYXA8VD58bnVsbCB7XHJcbiAgICAgICAgcmV0dXJuIHRoaXMuJGFjdDxhbnk+KCRuYW1lLCAobmFtZTogYW55KTogSVdyYXA8VD58bnVsbCA9PiB7XHJcbiAgICAgICAgICAgIHJldHVybiB0aGlzLiRhY3Qobm9kZSwgKHJlc3VsdDogYW55KTogSVdyYXA8VD58bnVsbCA9PntcclxuXHJcbiAgICAgICAgICAgICAgICAvLyBAdHMtaWdub3JlIFwic29tZXRpbWVzLCBtYXkgZ290IG5ldyBVVUlELCBvciBleGlzdHNcIlxyXG4gICAgICAgICAgICAgICAgY29uc3QgZXNtOiBJTWV0YSA9IChleHRyYWN0KG5hbWUpIGFzIElNZXRhKTtcclxuXHJcbiAgICAgICAgICAgICAgICAvLyBhbHNvIHlvdSBjYW4gZG8gaXQgd2l0aCB3cmFwcGVkIGFscmVhZHkgKGkuZS4gZ2V0dGluZylcclxuICAgICAgICAgICAgICAgIGNvbnN0IG1ldGE6IElNZXRhID0gKGV4dHJhY3QocmVzdWx0KSBhcyBJTWV0YSk7XHJcbiAgICAgICAgICAgICAgICBjb25zdCB1dWlkOiBzdHJpbmcgPSAoKGVzbSBhcyBhbnkpPy5bT1JHLnV1aWRdfHxuYW1lfHwobWV0YSBhcyBhbnkpPy5bT1JHLnV1aWRdfHxVVUlEdjQoKXx8XCJcIikgYXMgc3RyaW5nO1xyXG4gICAgICAgICAgICAgICAgY29uc3QgcmVhbDogVCA9IChtZXRhIGFzIGFueSk/LltPUkcubm9kZV0gPz8gdGhpcy4jbWVtb3J5UG9vbD8uZ2V0Py4odXVpZCkgPz8gcmVzdWx0Pz8oZXNtIGFzIGFueSk/LltPUkcubm9kZV07XHJcblxyXG4gICAgICAgICAgICAgICAgLy8gQHRzLWlnbm9yZSBcIm1ha2UgbWV0YSB1dWlkIGVxdWFsXCJcclxuICAgICAgICAgICAgICAgIGlmIChlc20gICE9IG51bGwpIHsgIGVzbVtPUkcudXVpZF0gPSAodXVpZHx8XCJcIikgYXMgc3RyaW5nOyB9OyAvLyBhc3NpZ24gdXVpZCB0byBtZXRhXHJcblxyXG4gICAgICAgICAgICAgICAgLy8gQHRzLWlnbm9yZSBcIm1ha2UgbWV0YSB1dWlkIGVxdWFsXCJcclxuICAgICAgICAgICAgICAgIGlmIChtZXRhICE9IG51bGwpIHsgbWV0YVtPUkcudXVpZF0gPSAodXVpZHx8XCJcIikgYXMgc3RyaW5nOyB9OyAvLyBhc3NpZ24gdXVpZCB0byBtZXRhXHJcblxyXG4gICAgICAgICAgICAgICAgLy8gZG9uJ3QgbmVlZHMgdG8gdHJhbnNmZXIgZnJvbSByZW1vdGVcclxuICAgICAgICAgICAgICAgIGlmICghcmVzdWx0ICYmIHJlYWwpIHsgcmV0dXJuIHJlYWwgYXMgSVdyYXA8VD47IH07XHJcblxyXG4gICAgICAgICAgICAgICAgLy8gYWN0aXZlIHRyYW5zZmVyIGFzIGFyZ3VtZW50IHRvIHJlbW90ZVxyXG4gICAgICAgICAgICAgICAgcmVzdWx0ID0gKHJlYWwgIT0gbnVsbCA/IHRoaXMuJHJlcXVlc3QoXCJhY2Nlc3NcIiwge1xyXG4gICAgICAgICAgICAgICAgICAgIFtPUkcudHlwZV06IFwidGZcIiwgXHJcbiAgICAgICAgICAgICAgICAgICAgW09SRy51dWlkXTogdXVpZCwgXHJcbiAgICAgICAgICAgICAgICAgICAgW09SRy5ub2RlXTogcmVhbFxyXG4gICAgICAgICAgICAgICAgfSwgW10pIDogdGhpcy4kcmVxdWVzdChcInRyYW5zZmVyXCIsIChlc20gPz8ge1xyXG4gICAgICAgICAgICAgICAgICAgIFtPUkcudHlwZV06IFwicmVmXCIsXHJcbiAgICAgICAgICAgICAgICAgICAgW09SRy51dWlkXTogdXVpZFxyXG4gICAgICAgICAgICAgICAgfSksIFtdKSk7XHJcblxyXG4gICAgICAgICAgICAgICAgLy90aGlzLiNmbG93Py5zeW5jPy4oKTtcclxuICAgICAgICAgICAgICAgIHJldHVybiByZXN1bHQgYXMgSVdyYXA8VD47XHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgICAgIH0pO1xyXG4gICAgfVxyXG59XHJcblxyXG4iXX0=","// deno-lint-ignore-file ban-ts-comment no-explicit-any valid-typeof\nimport { TS, PMS } from \"./Alias\";\nimport { isPromise } from \"./Useful\";\n// @ts-ignore \"extra `KB` for library...\"\n/*@__PURE__*/\n//import * as cbor from \"cbor-x\";\n/*\n * Note about:\n * 0...3 byte: semaphore value\n * 4...7 byte: data length value\n * 8...N byte: data payload\n */\n/*@__MANGLE_PROP__*/ /*@__PURE__*/\nconst AT = typeof Atomics != TS.udf ? Atomics : {};\n/*@__MANGLE_PROP__*/ /*@__PURE__*/\nexport default class SharedChannel {\n    //[x: string]: (timeout?: number) => unknown; // @ts-ignore\n    #sharedBuffer = null;\n    #byteOffset = 0;\n    $binCoder = null;\n    constructor(sharedBuffer, byteOffset = 0, binCoder = null) {\n        this.#sharedBuffer = sharedBuffer;\n        this.#byteOffset = byteOffset;\n        this.$binCoder = binCoder;\n    }\n    //\n    /*@__PURE__*/ // @ts-ignore \"\"\n    /*@__MANGLE_PROP__*/ [TS.rv](object = {}) {\n        // @ts-ignore \"no valid type\"\n        /*@__PURE__*/\n        return this.$resolveWith(this.$binCoder?.encode?.(object ?? {}) ?? new Uint8Array([]));\n    }\n    //\n    /*@__PURE__*/ // @ts-ignore \"\"\n    /*@__MANGLE_PROP__*/ [TS.rj](e) { throw e; }\n    // @ts-ignore \"DOM isn't recognized\"\n    /*@__PURE__*/ waitAuto(timeout = 1000) { return (self?.document ? this.waitAsync(timeout) : this.waitSync(timeout)); }\n    /*@__PURE__*/ waitSync(timeout = 1000) { const result = this.$waitSync(timeout); return result ? this.$binCoder.decode(result ?? new Uint8Array([])) : null; }\n    // not implemented directly\n    /*@__PURE__*/ waitAsync(_timeout = 1000) { return null; }\n    ;\n    //\n    /*@__MANGLE_PROP__*/ $resolveWith(binaryData) {\n        if (this.#sharedBuffer) {\n            // grow when is possible...\n            if ((this.#sharedBuffer.byteLength - this.#byteOffset) < (binaryData.byteLength + 8)) {\n                // @ts-ignore\n                this.#sharedBuffer?.grow?.(this.#byteOffset + binaryData.byteLength + 8);\n            }\n            //\n            const int32 = new Int32Array(this.#sharedBuffer, this.#byteOffset, 2);\n            if (AT.load(int32, 0) != 0) {\n                new Uint8Array(this.#sharedBuffer, this.#byteOffset + 8, binaryData.byteLength).set(binaryData);\n                // resolve answer\n                AT.store(int32, 1, binaryData.byteLength);\n                // notify about results...\n                AT.store(int32, 0, 1);\n                AT.notify(int32, 0);\n                AT.store(int32, 0, 0);\n            }\n        }\n    }\n    /*@__MANGLE_PROP__*/ $initials() {\n        if (!this.#sharedBuffer)\n            return;\n        const int32 = new Int32Array(this.#sharedBuffer, this.#byteOffset, 2);\n        AT.store(int32, 1, 0);\n        AT.store(int32, 0, 1);\n    }\n    /*@__MANGLE_PROP__*/ $promised(timeout = 1000) {\n        if (!this.#sharedBuffer)\n            return; //\n        const int32 = new Int32Array(this.#sharedBuffer, this.#byteOffset, 2);\n        const promise = AT.waitAsync(int32, 0, 1, timeout)?.value;\n        // @ts-ignore\n        if (promise.async) {\n            // @ts-ignore\n            return promise?.then?.(() => {\n                if (this.#sharedBuffer) {\n                    return new Uint8Array(this.#sharedBuffer, this.#byteOffset + 8, int32[1]);\n                }\n                return null;\n            })?.catch?.(console.trace.bind(console));\n        }\n        //\n        return new PMS((_, rj) => rj(promise));\n    }\n    /*@__MANGLE_PROP__*/ $waitSync(timeout = 1000) {\n        if (!this.#sharedBuffer)\n            return; //\n        const int32 = new Int32Array(this.#sharedBuffer, this.#byteOffset, 2);\n        const result = AT.wait(int32, 0, 1, timeout);\n        if (result == \"ok\") {\n            return new Uint8Array(this.#sharedBuffer, this.#byteOffset + 8, int32[1]);\n        }\n        return null;\n    }\n}\n/*@__MANGLE_PROP__*/ /*@__PURE__*/\nexport const doOnlyAfterResolve = (meta, cb) => {\n    if (isPromise(meta)) {\n        const chain = meta?.then?.(cb)?.catch?.(console.trace.bind(console)) ?? cb(meta);\n        //console.trace(chain);\n        return chain;\n    }\n    /*@__MANGLE_PROP__*/ /*@__PURE__*/\n    if (typeof SharedChannel != TS.udf && meta instanceof SharedChannel) {\n        /*@__MANGLE_PROP__*/ /*@__PURE__*/\n        return /*@__MANGLE_PROP__*/ /*@__PURE__*/ doOnlyAfterResolve(meta?.waitAuto?.(), cb);\n    }\n    //\n    return cb(meta);\n};\n/*@__MANGLE_PROP__*/ /*@__PURE_*/\nSharedChannel.prototype.waitAsync = function (timeout = 1000) {\n    const result = /*@__MANGLE_PROP__*/ this.$promised(timeout);\n    return doOnlyAfterResolve(result, (bin) => {\n        return bin ? this.$binCoder?.decode?.(bin) : null;\n    });\n};\n//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiU2hhcmVkQ2hhbm5lbC5qcyIsInNvdXJjZVJvb3QiOiIiLCJzb3VyY2VzIjpbIlNoYXJlZENoYW5uZWwudHMiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IkFBQUEsb0VBQW9FO0FBQ3BFLE9BQU8sRUFBRSxFQUFFLEVBQUUsR0FBRyxFQUFFLE1BQU0sU0FBUyxDQUFDO0FBQ2xDLE9BQU8sRUFBaUIsU0FBUyxFQUFFLE1BQU0sVUFBVSxDQUFDO0FBRXBELHlDQUF5QztBQUN6QyxhQUFhO0FBQ2IsaUNBQWlDO0FBRWpDOzs7OztHQUtHO0FBRUgsb0JBQW9CLENBQUMsYUFBYTtBQUNsQyxNQUFNLEVBQUUsR0FBZ0IsT0FBTyxPQUFPLElBQUksRUFBRSxDQUFDLEdBQUcsQ0FBQyxDQUFDLENBQUMsT0FBTyxDQUFDLENBQUMsQ0FBQyxFQUFFLENBQUM7QUFFaEUsb0JBQW9CLENBQUMsYUFBYTtBQUNsQyxNQUFNLENBQUMsT0FBTyxPQUFPLGFBQWE7SUFDOUIsMkRBQTJEO0lBQzNELGFBQWEsR0FBNkIsSUFBSSxDQUFDO0lBQy9DLFdBQVcsR0FBVyxDQUFDLENBQUM7SUFDeEIsU0FBUyxHQUFRLElBQUksQ0FBQztJQUd0QixZQUFZLFlBQXNDLEVBQUUsVUFBVSxHQUFHLENBQUMsRUFBRSxXQUFnQixJQUFJO1FBQ3BGLElBQUksQ0FBQyxhQUFhLEdBQUcsWUFBWSxDQUFDO1FBQ2xDLElBQUksQ0FBQyxXQUFXLEdBQUcsVUFBVSxDQUFDO1FBQzlCLElBQUksQ0FBQyxTQUFTLEdBQUcsUUFBUSxDQUFDO0lBQzlCLENBQUM7SUFFRCxFQUFFO0lBQ0YsYUFBYSxDQUFDLGdCQUFnQjtJQUM5QixvQkFBb0IsQ0FBQyxDQUFDLEVBQUUsQ0FBQyxFQUFFLENBQUMsQ0FBQyxTQUErQixFQUFFO1FBQzFELDZCQUE2QjtRQUM3QixhQUFhO1FBQ2IsT0FBTyxJQUFJLENBQUMsWUFBWSxDQUFDLElBQUksQ0FBQyxTQUFTLEVBQUUsTUFBTSxFQUFFLENBQUMsTUFBTSxJQUFJLEVBQUUsQ0FB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Q0FBRSxrQkFBa0IsQ0FBRSxJQUF5QixFQUFFLFFBQVEsRUFBRSxFQUFPLEVBQUUsRUFBRSxDQUFDLENBQUM7SUFDckgsQ0FBQztJQUVELEVBQUU7SUFDRixPQUFPLEVBQUUsQ0FBQyxJQUFTLENBQUMsQ0FBQztBQUN6QixDQUFDLENBQUE7QUFFRCxvQkFBb0IsQ0FBQyxZQUFZO0FBQ2pDLGFBQWEsQ0FBQyxTQUFTLENBQUMsU0FBUyxHQUFHLFVBQVUsT0FBTyxHQUFHLElBQUk7SUFDeEQsTUFBTSxNQUFNLEdBQUcsb0JBQW9CLENBQUMsSUFBSSxDQUFDLFNBQVMsQ0FBQyxPQUFPLENBQUMsQ0FBQztJQUM1RCxPQUFPLGtCQUFrQixDQUFDLE1BQU0sRUFBRSxDQUFDLEdBQXVCLEVBQUMsRUFBRTtRQUN6RCxPQUFPLEdBQUcsQ0FBQyxDQUFDLENBQUMsSUFBSSxDQUFDLFNBQVMsRUFBRSxNQUFNLEVBQUUsQ0FBQyxHQUFpQixDQUFDLENBQUMsQ0FBQyxDQUFDLElBQUksQ0FBQztJQUNwRSxDQUFDLENBQUMsQ0FBQztBQUNQLENBQUMsQ0FBQSIsInNvdXJjZXNDb250ZW50IjpbIi8vIGRlbm8tbGludC1pZ25vcmUtZmlsZSBiYW4tdHMtY29tbWVudCBuby1leHBsaWNpdC1hbnkgdmFsaWQtdHlwZW9mXHJcbmltcG9ydCB7IFRTLCBQTVMgfSBmcm9tIFwiLi9BbGlhc1wiO1xyXG5pbXBvcnQgeyB0eXBlIE1Qcm9taXNlLCBpc1Byb21pc2UgfSBmcm9tIFwiLi9Vc2VmdWxcIjtcclxuXHJcbi8vIEB0cy1pZ25vcmUgXCJleHRyYSBgS0JgIGZvciBsaWJyYXJ5Li4uXCJcclxuLypAX19QVVJFX18qL1xyXG4vL2ltcG9ydCAqIGFzIGNib3IgZnJvbSBcImNib3IteFwiO1xyXG5cclxuLypcclxuICogTm90ZSBhYm91dDpcclxuICogMC4uLjMgYnl0ZTogc2VtYXBob3JlIHZhbHVlXHJcbiAqIDQuLi43IGJ5dGU6IGRhdGEgbGVuZ3RoIHZhbHVlXHJcbiAqIDguLi5OIGJ5dGU6IGRhdGEgcGF5bG9hZFxyXG4gKi9cclxuXHJcbi8qQF9fTUFOR0xFX1BST1BfXyovIC8qQF9fUFVSRV9fKi9cclxuY29uc3QgQVQ6IEF0b21pY3N8YW55ID0gdHlwZW9mIEF0b21pY3MgIT0gVFMudWRmID8gQXRvbWljcyA6IHt9O1xyXG5cclxuLypAX19NQU5HTEVfUFJPUF9fKi8gLypAX19QVVJFX18qL1xyXG5leHBvcnQgZGVmYXVsdCBjbGFzcyBTaGFyZWRDaGFubmVsPFQgZXh0ZW5kcyB1bmtub3duPiB7XHJcbiAgICAvL1t4OiBzdHJpbmddOiAodGltZW91dD86IG51bWJlcikgPT4gdW5rbm93bjsgLy8gQHRzLWlnbm9yZVxyXG4gICAgI3NoYXJlZEJ1ZmZlcjogU2hhcmVkQXJyYXlCdWZmZXIgfCBudWxsID0gbnVsbDtcclxuICAgICNieXRlT2Zmc2V0OiBudW1iZXIgPSAwO1xyXG4gICAgJGJpbkNvZGVyOiBhbnkgPSBudWxsO1xyXG5cclxuICAgIFxyXG4gICAgY29uc3RydWN0b3Ioc2hhcmVkQnVmZmVyOiBTaGFyZWRBcnJheUJ1ZmZlciB8IG51bGwsIGJ5dGVPZmZzZXQgPSAwLCBiaW5Db2RlcjogYW55ID0gbnVsbCkge1xyXG4gICAgICAgIHRoaXMuI3NoYXJlZEJ1ZmZlciA9IHNoYXJlZEJ1ZmZlcjtcclxuICAgICAgICB0aGlzLiNieXRlT2Zmc2V0ID0gYnl0ZU9mZnNldDtcclxuICAgICAgICB0aGlzLiRiaW5Db2RlciA9IGJpbkNvZGVyO1xyXG4gICAgfVxyXG5cclxuICAgIC8vXHJcbiAgICAvKkBfX1BVUkVfXyovIC8vIEB0cy1pZ25vcmUgXCJcIlxyXG4gICAgLypAX19NQU5HTEVfUFJPUF9fKi8gW1RTLnJ2XShvYmplY3Q6IFR8VWludDhBcnJheXx1bmtub3duID0ge30pIHtcclxuICAgICAgICAvLyBAdHMtaWdub3JlIFwibm8gdmFsaWQgdHlwZVwiXHJcbiAgICAgICAgLypAX19QVVJFX18qL1xyXG4gICAgICAgIHJldHVybiB0aGlzLiRyZXNvbHZlV2l0aCh0aGlzLiRiaW5Db2Rlcj8uZW5jb2RlPy4ob2JqZWN0ID8/IHt9KSA/PyBuZXcgVWludDhBcnJheShbXSkpO1xyXG4gICAgfVxyXG5cclxuICAgIC8vXHJcbiAgICAvKkBfX1BVUkVfXyovIC8vIEB0cy1pZ25vcmUgXCJcIlxyXG4gICAgLypAX19NQU5HTEVfUFJPUF9fKi8gW1RTLnJqXShlOiBFcnJvciB8IHVua25vd24pOiB1bmtub3duIHsgdGhyb3cgZTsgfVxyXG5cclxuICAgIC8vIEB0cy1pZ25vcmUgXCJET00gaXNuJ3QgcmVjb2duaXplZFwiXHJcbiAgICAvKkBfX1BVUkVfXyovIHdhaXRBdXRvKHRpbWVvdXQgPSAxMDAwKTogdW5rbm93biB7IHJldHVybiAoc2VsZj8uZG9jdW1lbnQgPyB0aGlzLndhaXRBc3luYyh0aW1lb3V0KSA6IHRoaXMud2FpdFN5bmModGltZW91dCkpOyB9XHJcbiAgICAvKkBfX1BVUkVfXyovIHdhaXRTeW5jKHRpbWVvdXQgPSAxMDAwKTogdW5rbm93biB7IGNvbnN0IHJlc3VsdCA9IHRoaXMuJHdhaXRTeW5jKHRpbWVvdXQpOyByZXR1cm4gcmVzdWx0ID8gdGhpcy4kYmluQ29kZXIuZGVjb2RlKHJlc3VsdCA/PyBuZXcgVWludDhBcnJheShbXSkpIDogbnVsbDsgfVxyXG5cclxuICAgIC8vIG5vdCBpbXBsZW1lbnRlZCBkaXJlY3RseVxyXG4gICAgLypAX19QVVJFX18qLyB3YWl0QXN5bmMoX3RpbWVvdXQgPSAxMDAwKTogdW5rbm93biB7IHJldHVybiBudWxsOyB9O1xyXG5cclxuICAgIC8vXHJcbiAgICAvKkBfX01BTkdMRV9QUk9QX18qLyAkcmVzb2x2ZVdpdGgoYmluYXJ5RGF0YTogVWludDhBcnJheSB8IFVpbnQ4Q2xhbXBlZEFycmF5IHwgSW50OEFycmF5KTogYW55IHtcclxuICAgICAgICBpZiAodGhpcy4jc2hhcmVkQnVmZmVyKSB7XHJcbiAgICAgICAgICAgIC8vIGdyb3cgd2hlbiBpcyBwb3NzaWJsZS4uLlxyXG4gICAgICAgICAgICBpZiAoKHRoaXMuI3NoYXJlZEJ1ZmZlci5ieXRlTGVuZ3RoLXRoaXMuI2J5dGVPZmZzZXQpIDwgKGJpbmFyeURhdGEuYnl0ZUxlbmd0aCs4KSkge1xyXG4gICAgICAgICAgICAgICAgLy8gQHRzLWlnbm9yZVxyXG4gICAgICAgICAgICAgICAgdGhpcy4jc2hhcmVkQnVmZmVyPy5ncm93Py4odGhpcy4jYnl0ZU9mZnNldCArIGJpbmFyeURhdGEuYnl0ZUxlbmd0aCs4KTtcclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgLy9cclxuICAgICAgICAgICAgY29uc3QgaW50MzIgPSBuZXcgSW50MzJBcnJheSh0aGlzLiNzaGFyZWRCdWZmZXIsIHRoaXMuI2J5dGVPZmZzZXQsIDIpO1xyXG4gICAgICAgICAgICBpZiAoQVQubG9hZChpbnQzMiwgMCkgIT0gMCkge1xyXG4gICAgICAgICAgICAgICAgbmV3IFVpbnQ4QXJyYXkodGhpcy4jc2hhcmVkQnVmZmVyLCB0aGlzLiNieXRlT2Zmc2V0ICsgOCwgYmluYXJ5RGF0YS5ieXRlTGVuZ3RoKS5zZXQoYmluYXJ5RGF0YSk7XHJcblxyXG4gICAgICAgICAgICAgICAgLy8gcmVzb2x2ZSBhbnN3ZXJcclxuICAgICAgICAgICAgICAgIEFULnN0b3JlKGludDMyLCAxLCBiaW5hcnlEYXRhLmJ5dGVMZW5ndGgpO1xyXG5cclxuICAgICAgICAgICAgICAgIC8vIG5vdGlmeSBhYm91dCByZXN1bHRzLi4uXHJcbiAgICAgICAgICAgICAgICBBVC5zdG9yZShpbnQzMiwgMCwgMSk7XHJcbiAgICAgICAgICAgICAgICBBVC5ub3RpZnkoaW50MzIsIDApO1xyXG4gICAgICAgICAgICAgICAgQVQuc3RvcmUoaW50MzIsIDAsIDApO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIC8qQF9fTUFOR0xFX1BST1BfXyovICRpbml0aWFscygpIHtcclxuICAgICAgICBpZiAoIXRoaXMuI3NoYXJlZEJ1ZmZlcikgcmV0dXJuO1xyXG4gICAgICAgIGNvbnN0IGludDMyID0gbmV3IEludDMyQXJyYXkodGhpcy4jc2hhcmVkQnVmZmVyLCB0aGlzLiNieXRlT2Zmc2V0LCAyKTtcclxuICAgICAgICBBVC5zdG9yZShpbnQzMiwgMSwgMCk7XHJcbiAgICAgICAgQVQuc3RvcmUoaW50MzIsIDAsIDEpO1xyXG4gICAgfVxyXG5cclxuICAgIC8qQF9fTUFOR0xFX1BST1BfXyovICRwcm9taXNlZCh0aW1lb3V0ID0gMTAwMCkge1xyXG4gICAgICAgIGlmICghdGhpcy4jc2hhcmVkQnVmZmVyKSByZXR1cm47IC8vXHJcbiAgICAgICAgY29uc3QgaW50MzIgICA9IG5ldyBJbnQzMkFycmF5KHRoaXMuI3NoYXJlZEJ1ZmZlciwgdGhpcy4jYnl0ZU9mZnNldCwgMik7XHJcbiAgICAgICAgY29uc3QgcHJvbWlzZSA9IEFULndhaXRBc3luYyhpbnQzMiwgMCwgMSwgdGltZW91dCk/LnZhbHVlO1xyXG5cclxuICAgICAgICAvLyBAdHMtaWdub3JlXHJcbiAgICAgICAgaWYgKHByb21pc2UuYXN5bmMpIHtcclxuICAgICAgICAgICAgLy8gQHRzLWlnbm9yZVxyXG4gICAgICAgICAgICByZXR1cm4gcHJvbWlzZT8udGhlbj8uKCgpPT57XHJcbiAgICAgICAgICAgICAgICBpZiAodGhpcy4jc2hhcmVkQnVmZmVyKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgXHJcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIG5ldyBVaW50OEFycmF5KHRoaXMuI3NoYXJlZEJ1ZmZlciwgdGhpcy4jYnl0ZU9mZnNldCArIDgsIGludDMyWzFdKTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIHJldHVybiBudWxsO1xyXG4gICAgICAgICAgICB9KT8uY2F0Y2g/Lihjb25zb2xlLnRyYWNlLmJpbmQoY29uc29sZSkpO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgLy9cclxuICAgICAgICByZXR1cm4gbmV3IFBNUygoXzogYW55LCByajogKGFyZzA6IGFueSkgPT4gYW55KT0+cmoocHJvbWlzZSkpO1xyXG4gICAgfVxyXG5cclxuICAgIC8qQF9fTUFOR0xFX1BST1BfXyovICR3YWl0U3luYyh0aW1lb3V0ID0gMTAwMCkge1xyXG4gICAgICAgIGlmICghdGhpcy4jc2hhcmVkQnVmZmVyKSByZXR1cm47IC8vXHJcbiAgICAgICAgY29uc3QgaW50MzIgID0gbmV3IEludDMyQXJyYXkodGhpcy4jc2hhcmVkQnVmZmVyLCB0aGlzLiNieXRlT2Zmc2V0LCAyKTtcclxuICAgICAgICBjb25zdCByZXN1bHQgPSBBVC53YWl0KGludDMyLCAwLCAxLCB0aW1lb3V0KTtcclxuICAgICAgICBpZiAocmVzdWx0ID09IFwib2tcIikge1xyXG4gICAgICAgICAgICBcclxuICAgICAgICAgICAgcmV0dXJuIG5ldyBVaW50OEFycmF5KHRoaXMuI3NoYXJlZEJ1ZmZlciwgdGhpcy4jYnl0ZU9mZnNldCArIDgsIGludDMyWzFdKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgcmV0dXJuIG51bGw7XHJcbiAgICB9XHJcbn1cclxuXHJcbi8qQF9fTUFOR0xFX1BST1BfXyovIC8qQF9fUFVSRV9fKi9cclxuZXhwb3J0IGNvbnN0IGRvT25seUFmdGVyUmVzb2x2ZSA9IDxUIGV4dGVuZHMgdW5rbm93bnxhbnk+KG1ldGE6IE1Qcm9taXNlPFQ+LCBjYjogKHU6IFQpPT5NUHJvbWlzZTxUPnxudWxsfHZvaWQpOiBNUHJvbWlzZTxhbnk+fG51bGx8dm9pZCA9PiB7XHJcbiAgICBpZiAoaXNQcm9taXNlKG1ldGEpKSB7XHJcbiAgICAgICAgY29uc3QgY2hhaW4gPSAobWV0YSBhcyBhbnkpPy50aGVuPy4oY2IpPy5jYXRjaD8uKGNvbnNvbGUudHJhY2UuYmluZChjb25zb2xlKSkgPz8gY2IobWV0YSBhcyBUKTtcclxuICAgICAgICAvL2NvbnNvbGUudHJhY2UoY2hhaW4pO1xyXG4gICAgICAgIHJldHVybiBjaGFpbjtcclxuICAgIH1cclxuXHJcbiAgICAvKkBfX01BTkdMRV9QUk9QX18qLyAvKkBfX1BVUkVfXyovIFxyXG4gICAgaWYgKHR5cGVvZiBTaGFyZWRDaGFubmVsICE9IFRTLnVkZiAmJiBtZXRhIGluc3RhbmNlb2YgU2hhcmVkQ2hhbm5lbCkge1xyXG4gICAgICAgIC8qQF9fTUFOR0xFX1BST1BfXyovIC8qQF9fUFVSRV9fKi8gXHJcbiAgICAgICAgcmV0dXJuIC8qQF9fTUFOR0xFX1BST1BfXyovIC8qQF9fUFVSRV9fKi8gIGRvT25seUFmdGVyUmVzb2x2ZSgobWV0YSBhcyBTaGFyZWRDaGFubmVsPFQ+KT8ud2FpdEF1dG8/LigpIGFzIFQsIGNiKTtcclxuICAgIH1cclxuXHJcbiAgICAvL1xyXG4gICAgcmV0dXJuIGNiKG1ldGEgYXMgVCk7XHJcbn1cclxuXHJcbi8qQF9fTUFOR0xFX1BST1BfXyovIC8qQF9fUFVSRV8qLyBcclxuU2hhcmVkQ2hhbm5lbC5wcm90b3R5cGUud2FpdEFzeW5jID0gZnVuY3Rpb24gKHRpbWVvdXQgPSAxMDAwKTogdW5rbm93biB7XHJcbiAgICBjb25zdCByZXN1bHQgPSAvKkBfX01BTkdMRV9QUk9QX18qLyB0aGlzLiRwcm9taXNlZCh0aW1lb3V0KTtcclxuICAgIHJldHVybiBkb09ubHlBZnRlclJlc29sdmUocmVzdWx0LCAoYmluOiB1bmtub3dufFVpbnQ4QXJyYXkpPT57XHJcbiAgICAgICAgcmV0dXJuIGJpbiA/IHRoaXMuJGJpbkNvZGVyPy5kZWNvZGU/LihiaW4gYXMgVWludDhBcnJheSkgOiBudWxsO1xyXG4gICAgfSk7XHJcbn1cclxuIl19","// deno-lint-ignore-file no-explicit-any\nimport { PMS, TS } from \"./Alias\";\nimport SharedChannel from \"./SharedChannel\";\nimport { UUIDv4 } from \"./Useful\";\n//\nexport const HANG_TIMEOUT = 2000;\nexport default class PromiseStack {\n    #map = new Map();\n    constructor() { this.#map = new Map(); }\n    //\n    get sync() { return this.#syncExcept(); }\n    #syncExcept(ne = \"\") { return PMS.allSettled(Array.from(this.#map?.entries?.())?.filter?.(([n]) => (ne != n))?.map?.((([, v]) => v))); }\n    //\n    get(name = \"\") { return this.#map.get(name); }\n    // reject by UUID\n    /*@__MANGLE_PROP__*/\n    [TS.rjb](name, why) {\n        const pm = this.#map.get(name);\n        this.#map.delete(name);\n        // @ts-ignore \"\"\n        pm?.[TS.rj]?.(why ?? null);\n        return this;\n    }\n    // resolve by UUID\n    /*@__MANGLE_PROP__*/\n    [TS.rvb](name, why) {\n        const pm = this.#map.get(name);\n        this.#map.delete(name);\n        // @ts-ignore \"\"\n        pm?.[TS.rv]?.(why ?? null);\n        return this;\n    }\n    /*@__MANGLE_PROP__*/ /*@__PURE__*/\n    hook(key = null, buffer = null) {\n        const pm = /*@__MANGLE_PROP__*/ new SharedChannel(buffer);\n        this.#map.set(key ||= UUIDv4(), pm);\n        // timeout of requests\n        /*@__MANGLE_PROP__*/ setTimeout(() => {\n            // @ts-ignore \"\"\n            if (this.#map.has(key)) {\n                this[TS.rjb](key, \"hang-timeout\");\n            }\n            ;\n        }, HANG_TIMEOUT);\n        //\n        return [key, pm, buffer];\n    }\n    // [\n    //  :0 - for sending UUID or identify\n    //  :1 - for waiting or async ops\n    // ]\n    [TS.cs](key = null) {\n        const bf = /*@__MANGLE_PROP__*/ new SharedArrayBuffer(16);\n        const pm = /*@__MANGLE_PROP__*/ new SharedChannel(bf);\n        this.#map.set(key ||= UUIDv4(), pm);\n        // timeout of requests\n        /*@__MANGLE_PROP__*/ setTimeout(() => {\n            // @ts-ignore \"\"\n            if (this.#map.has(key)) {\n                this[TS.rjb](key, \"hang-timeout\");\n            }\n            ;\n        }, HANG_TIMEOUT);\n        //\n        return [key, pm, bf];\n    }\n    // [\n    //  :0 - for sending UUID or identify\n    //  :1 - for waiting or async ops\n    // ]\n    [TS.cr](key = null) {\n        // @ts-ignore \"\"\n        const pm = PMS.withResolvers();\n        this.#map.set(key ||= UUIDv4(), pm);\n        // timeout of requests\n        /*@__MANGLE_PROP__*/ setTimeout(() => {\n            // @ts-ignore \"\"\n            if (this.#map.has(key)) {\n                this[TS.rjb](key, \"hang-timeout\");\n            }\n            ;\n        }, HANG_TIMEOUT);\n        //\n        return [key, pm.promise];\n    }\n}\n//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiUHJvbWlzZVN0YWNrLmpzIiwic291cmNlUm9vdCI6IiIsInNvdXJjZXMiOlsiUHJvbWlzZVN0YWNrLnRzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiJBQUFBLHdDQUF3QztBQUV4QyxPQUFPLEVBQUUsR0FBRyxFQUFFLEVBQUUsRUFBRSxNQUFNLFNBQVMsQ0FBQztBQUNsQyxPQUFPLGFBQWEsTUFBTSxpQkFBaUIsQ0FBQztBQUM1QyxPQUFPLEVBQUUsTUFBTSxFQUFFLE1BQU0sVUFBVSxDQUFDO0FBRWxDLEVBQUU7QUFDRixNQUFNLENBQUMsTUFBTSxZQUFZLEdBQUcsSUFBSSxDQUFDO0FBQ2pDLE1BQU0sQ0FBQyxPQUFPLE9BQU8sWUFBWTtJQUM3QixJQUFJLEdBQUcsSUFBSSxHQUFHLEVBQXNELENBQUM7SUFDckUsZ0JBQWdCLElBQUksQ0FBQyxJQUFJLEdBQUcsSUFBSSxHQUFHLEVBQXNELENBQUMsQ0FBQyxDQUFDO0lBRTVGLEVBQUU7SUFDRixJQUFJLElBQUksS0FBSyxPQUFPLElBQUksQ0FBQyxXQUFXLEVBQUUsQ0FBQyxDQUFDLENBQUM7SUFDekMsV0FBVyxDQUFDLEVBQUUsR0FBRyxFQUFFLElBQUksT0FBTyxHQUFHLENBQUMsVUFBVSxDQUFDLEtBQUssQ0FBQyxJQUFJLENBQUMsSUFBSSxDQUFDLElBQUksRUFBRSxPQUFPLEVBQUUsRUFBRSxDQUFDLEVBQUUsTUFBTSxFQUFFLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxFQUFDLEVBQUUsQ0FBQSxDQUFDLEVBQUUsSUFBRSxDQUFDLENBQUMsQ0FBQyxFQUFFLEdBQUcsRUFBRSxDQUFDLENBQUMsQ0FBQyxDQUFDLEVBQUMsQ0FBQyxDQUFDLEVBQUMsRUFBRSxDQUFBLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUM7SUFFakksRUFBRTtJQUNGLEdBQUcsQ0FBQyxJQUFJLEdBQUcsRUFBRSxJQUFJLE9BQU8sSUFBSSxDQUFDLElBQUksQ0FBQyxHQUFHLENBQUMsSUFBSSxDQUFDLENBQUMs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QWlDO0lBQ2pDLElBQUk7SUFDSixDQUFDLEVBQUUsQ0FBQyxFQUFFLENBQUMsQ0FBQyxNQUFxQixJQUFJO1FBQzdCLGdCQUFnQjtRQUNoQixNQUFNLEVBQUUsR0FBRyxHQUFHLENBQUMsYUFBYSxFQUFLLENBQUM7UUFDbEMsSUFBSSxDQUFDLElBQUksQ0FBQyxHQUFHLENBQUMsR0FBRyxLQUFLLE1BQU0sRUFBRSxFQUFFLEVBQUUsQ0FBQyxDQUFDO1FBRXBDLHNCQUFzQjtRQUN0QixvQkFBb0IsQ0FBQyxVQUFVLENBQUMsR0FBRSxFQUFFO1lBQ2hDLGdCQUFnQjtZQUNoQixJQUFJLElBQUksQ0FBQyxJQUFJLENBQUMsR0FBRyxDQUFDLEdBQUcsQ0FBQyxFQUFFLENBQUM7Z0JBQUMsSUFBSSxDQUFDLEVBQUUsQ0FBQyxHQUFHLENBQUMsQ0FBQyxHQUFHLEVBQUUsY0FBYyxDQUFDLENBQUM7WUFBQyxDQUFDO1lBQUEsQ0FBQztRQUNuRSxDQUFDLEVBQUUsWUFBWSxDQUFDLENBQUM7UUFFakIsRUFBRTtRQUNGLE9BQU8sQ0FBQyxHQUFHLEVBQUUsRUFBRSxDQUFDLE9BQU8sQ0FBQyxDQUFDO0lBQzdCLENBQUM7Q0FDSiIsInNvdXJjZXNDb250ZW50IjpbIi8vIGRlbm8tbGludC1pZ25vcmUtZmlsZSBuby1leHBsaWNpdC1hbnlcclxuXHJcbmltcG9ydCB7IFBNUywgVFMgfSBmcm9tIFwiLi9BbGlhc1wiO1xyXG5pbXBvcnQgU2hhcmVkQ2hhbm5lbCBmcm9tIFwiLi9TaGFyZWRDaGFubmVsXCI7XHJcbmltcG9ydCB7IFVVSUR2NCB9IGZyb20gXCIuL1VzZWZ1bFwiO1xyXG5cclxuLy9cclxuZXhwb3J0IGNvbnN0IEhBTkdfVElNRU9VVCA9IDIwMDA7XHJcbmV4cG9ydCBkZWZhdWx0IGNsYXNzIFByb21pc2VTdGFjazxUIGV4dGVuZHMgdW5rbm93bj4ge1xyXG4gICAgI21hcCA9IG5ldyBNYXA8c3RyaW5nLCBQcm9taXNlV2l0aFJlc29sdmVyczxUPiB8IFNoYXJlZENoYW5uZWw8VD4+KCk7XHJcbiAgICBjb25zdHJ1Y3RvcigpIHsgdGhpcy4jbWFwID0gbmV3IE1hcDxzdHJpbmcsIFByb21pc2VXaXRoUmVzb2x2ZXJzPFQ+IHwgU2hhcmVkQ2hhbm5lbDxUPj4oKTsgfVxyXG5cclxuICAgIC8vXHJcbiAgICBnZXQgc3luYygpIHsgcmV0dXJuIHRoaXMuI3N5bmNFeGNlcHQoKTsgfVxyXG4gICAgI3N5bmNFeGNlcHQobmUgPSBcIlwiKSB7IHJldHVybiBQTVMuYWxsU2V0dGxlZChBcnJheS5mcm9tKHRoaXMuI21hcD8uZW50cmllcz8uKCkpPy5maWx0ZXI/LigoW25dKT0+KG5lIT1uKSk/Lm1hcD8uKCgoWyx2XSk9PnYpKSk7IH1cclxuXHJcbiAgICAvL1xyXG4gICAgZ2V0KG5hbWUgPSBcIlwiKSB7IHJldHVybiB0aGlzLiNtYXAuZ2V0KG5hbWUpOyB9XHJcblxyXG4gICAgLy8gcmVqZWN0IGJ5IFVVSURcclxuICAgIC8qQF9fTUFOR0xFX1BST1BfXyovIFxyXG4gICAgW1RTLnJqYl0obmFtZTogc3RyaW5nLCB3aHk6IHVua25vd24pIHtcclxuICAgICAgICBjb25zdCBwbSA9IHRoaXMuI21hcC5nZXQobmFtZSk7XHJcbiAgICAgICAgdGhpcy4jbWFwLmRlbGV0ZShuYW1lKTtcclxuICAgICAgICAvLyBAdHMtaWdub3JlIFwiXCJcclxuICAgICAgICBwbT8uW1RTLnJqXT8uKHdoeSA/PyBudWxsKTtcclxuICAgICAgICByZXR1cm4gdGhpcztcclxuICAgIH1cclxuXHJcbiAgICAvLyByZXNvbHZlIGJ5IFVVSURcclxuICAgIC8qQF9fTUFOR0xFX1BST1BfXyovIFxyXG4gICAgW1RTLnJ2Yl0obmFtZTogc3RyaW5nLCB3aHk6IHVua25vd24pIHtcclxuICAgICAgICBjb25zdCBwbSA9IHRoaXMuI21hcC5nZXQobmFtZSk7XHJcbiAgICAgICAgdGhpcy4jbWFwLmRlbGV0ZShuYW1lKTtcclxuICAgICAgICAvLyBAdHMtaWdub3JlIFwiXCJcclxuICAgICAgICBwbT8uW1RTLnJ2XT8uKCh3aHkgYXMgYW55KSA/PyBudWxsKTtcclxuICAgICAgICByZXR1cm4gdGhpcztcclxuICAgIH1cclxuXHJcbiAgICAvKkBfX01BTkdMRV9QUk9QX18qLyAvKkBfX1BVUkVfXyovXHJcbiAgICBob29rPFQgZXh0ZW5kcyB1bmtub3duPihrZXk6IHN0cmluZyB8IG51bGwgPSBudWxsLCBidWZmZXI6IFNoYXJlZEFycmF5QnVmZmVyIHwgbnVsbCA9IG51bGwpOiBbc3RyaW5nLCBTaGFyZWRDaGFubmVsPFQ+LCBTaGFyZWRBcnJheUJ1ZmZlcnxBcnJheUJ1ZmZlcnx1bmtub3duXSB7XHJcbiAgICAgICAgY29uc3QgcG0gPSAvKkBfX01BTkdMRV9QUk9QX18qLyBuZXcgU2hhcmVkQ2hhbm5lbChidWZmZXIpO1xyXG4gICAgICAgIHRoaXMuI21hcC5zZXQoa2V5IHx8PSBVVUlEdjQoKSwgcG0pO1xyXG5cclxuICAgICAgICAvLyB0aW1lb3V0IG9mIHJlcXVlc3RzXHJcbiAgICAgICAgLypAX19NQU5HTEVfUFJPUF9fKi8gc2V0VGltZW91dCgoKT0+eyBcclxuICAgICAgICAgICAgLy8gQHRzLWlnbm9yZSBcIlwiXHJcbiAgICAgICAgICAgIGlmICh0aGlzLiNtYXAuaGFzKGtleSkpIHsgdGhpc1tUUy5yamJdKGtleSwgXCJoYW5nLXRpbWVvdXRcIik7IH07XHJcbiAgICAgICAgfSwgSEFOR19USU1FT1VUKTtcclxuXHJcbiAgICAgICAgLy9cclxuICAgICAgICByZXR1cm4gW2tleSwgcG0sIGJ1ZmZlcl07XHJcbiAgICB9XHJcblxyXG4gICAgLy8gW1xyXG4gICAgLy8gIDowIC0gZm9yIHNlbmRpbmcgVVVJRCBvciBpZGVudGlmeVxyXG4gICAgLy8gIDoxIC0gZm9yIHdhaXRpbmcgb3IgYXN5bmMgb3BzXHJcbiAgICAvLyBdXHJcbiAgICBbVFMuY3NdPFQgZXh0ZW5kcyB1bmtub3duPihrZXk6IHN0cmluZyB8IG51bGwgPSBudWxsKTogW3N0cmluZywgU2hhcmVkQ2hhbm5lbDxUPiwgU2hhcmVkQXJyYXlCdWZmZXJ8QXJyYXlCdWZmZXJ8dW5rbm93bl0ge1xyXG4gICAgICAgIGNvbnN0IGJmID0gLypAX19NQU5HTEVfUFJPUF9fKi8gbmV3IFNoYXJlZEFycmF5QnVmZmVyKDE2KTtcclxuICAgICAgICBjb25zdCBwbSA9IC8qQF9fTUFOR0xFX1BST1BfXyovIG5ldyBTaGFyZWRDaGFubmVsKGJmKTtcclxuICAgICAgICB0aGlzLiNtYXAuc2V0KGtleSB8fD0gVVVJRHY0KCksIHBtKTtcclxuXHJcbiAgICAgICAgLy8gdGltZW91dCBvZiByZXF1ZXN0c1xyXG4gICAgICAgIC8qQF9fTUFOR0xFX1BST1BfXyovIHNldFRpbWVvdXQoKCk9PnsgXHJcbiAgICAgICAgICAgIC8vIEB0cy1pZ25vcmUgXCJcIlxyXG4gICAgICAgICAgICBpZiAodGhpcy4jbWFwLmhhcyhrZXkpKSB7IHRoaXNbVFMucmpiXShrZXksIFwiaGFuZy10aW1lb3V0XCIpOyB9O1xyXG4gICAgICAgIH0sIEhBTkdfVElNRU9VVCk7XHJcblxyXG4gICAgICAgIC8vXHJcbiAgICAgICAgcmV0dXJuIFtrZXksIHBtLCBiZl07XHJcbiAgICB9XHJcblxyXG4gICAgLy8gW1xyXG4gICAgLy8gIDowIC0gZm9yIHNlbmRpbmcgVVVJRCBvciBpZGVudGlmeVxyXG4gICAgLy8gIDoxIC0gZm9yIHdhaXRpbmcgb3IgYXN5bmMgb3BzXHJcbiAgICAvLyBdXHJcbiAgICBbVFMuY3JdKGtleTogc3RyaW5nIHwgbnVsbCA9IG51bGwpIHtcclxuICAgICAgICAvLyBAdHMtaWdub3JlIFwiXCJcclxuICAgICAgICBjb25zdCBwbSA9IFBNUy53aXRoUmVzb2x2ZXJzPFQ+KCk7XHJcbiAgICAgICAgdGhpcy4jbWFwLnNldChrZXkgfHw9IFVVSUR2NCgpLCBwbSk7XHJcblxyXG4gICAgICAgIC8vIHRpbWVvdXQgb2YgcmVxdWVzdHNcclxuICAgICAgICAvKkBfX01BTkdMRV9QUk9QX18qLyBzZXRUaW1lb3V0KCgpPT57XHJcbiAgICAgICAgICAgIC8vIEB0cy1pZ25vcmUgXCJcIlxyXG4gICAgICAgICAgICBpZiAodGhpcy4jbWFwLmhhcyhrZXkpKSB7IHRoaXNbVFMucmpiXShrZXksIFwiaGFuZy10aW1lb3V0XCIpOyB9O1xyXG4gICAgICAgIH0sIEhBTkdfVElNRU9VVCk7XHJcblxyXG4gICAgICAgIC8vXHJcbiAgICAgICAgcmV0dXJuIFtrZXksIHBtLnByb21pc2VdO1xyXG4gICAgfVxyXG59XHJcbiJdfQ==","// deno-lint-ignore-file no-explicit-any\nimport { Transferable, doOnlyAfterResolve } from \"../Utils/Useful\";\nimport PromiseStack from '../Utils/PromiseStack';\nimport { TS } from \"../Utils/Alias\";\n//\n/*@__NOINLINE__*/ /*@__MANGLE_PROP__*/ /*@__PURE__*/ const PM = \"postMessage\";\n// FLOW - is web worker library core (low-level)...\nexport default class FLOW {\n    #worker = null;\n    #promiseStack = new PromiseStack();\n    #imports = {};\n    //\n    constructor(worker = null) {\n        this.#worker = worker; // || defaultWorker;\n        this.#imports = {};\n        //\n        (worker ??= this.#worker)?.addEventListener(\"message\", (ev) => {\n            if (!ev?.data) {\n                console.log(ev);\n                return;\n            }\n            const { cmd, uuid, dir, status, shared } = ev.data;\n            if (dir == \"req\") {\n                if (cmd == \"ping\") {\n                    worker?.[PM]?.({ cmd, uuid, dir: \"res\", status: \"ok\", result: \"ok\", shared: null });\n                }\n                else if (cmd == \"import\") {\n                    /*@__PURE__*/ import(/* @vite-ignore */ (\"\" + ev.data.source))?.then?.((m) => {\n                        Object.assign(this.#imports, (m.default ?? m));\n                        worker?.[PM]?.({ cmd, uuid, dir: \"res\", status: \"ok\", result: \"ok\", shared: null });\n                    })?.catch?.((e) => {\n                        /*@__PURE__*/ console.error(e);\n                        /*@__PURE__*/ console.trace(e);\n                        worker?.[PM]?.({ cmd, uuid, dir: \"res\", status: \"error\", result: \"unsupported\", shared: null });\n                    });\n                }\n                else if (cmd == \"call\") {\n                    // hoot shared channels for direct answer\n                    /*@__PURE__*/ (shared ? this.#promiseStack?.hook?.(uuid, shared) : null);\n                    // call with FLOW \"this\" context\n                    try {\n                        doOnlyAfterResolve(this.#imports[ev.data.handler]?.apply?.(self, [ev.data]) ?? ev.data.args, (syncOrAsync) => {\n                            doOnlyAfterResolve(syncOrAsync, (pass) => {\n                                const [$r, transfer] = pass;\n                                doOnlyAfterResolve($r, (result) => {\n                                    worker?.[PM]?.({\n                                        handler: \"$resolver\",\n                                        status: \"ok\",\n                                        cmd,\n                                        uuid,\n                                        dir: \"res\",\n                                        result,\n                                        shared\n                                    }, [...new Set(Array.from(transfer || []))].filter((e) => Transferable.some((I) => e instanceof I)));\n                                    // resolve when sync supported\n                                    // @ts-ignore \"\"\n                                    /*@__PURE__*/ this.#promiseStack?.[TS.rvb]?.(uuid, result);\n                                });\n                            });\n                        });\n                    }\n                    catch (e) {\n                        /*@__PURE__*/ console.error(e);\n                        /*@__PURE__*/ console.trace(e);\n                        //\n                        const reason = e.message;\n                        worker?.[PM]?.({\n                            handler: \"$resolver\",\n                            status: \"error\",\n                            cmd,\n                            uuid,\n                            dir: \"res\",\n                            result: reason,\n                            shared: null\n                        }, []);\n                        // resolve when sync supported\n                        // @ts-ignore \"\"\n                        /*@__PURE__*/ this.#promiseStack?.[TS.rjb]?.(uuid, reason);\n                    }\n                }\n                else {\n                    /*@__PURE__*/ console.error(\"Internal command: \" + cmd + \" not supported.\");\n                    worker?.[PM]?.({ cmd, uuid, dir: \"res\", status: \"error\", result: \"unk\" });\n                }\n            }\n            else if (dir == \"res\") {\n                try {\n                    const resolved = this.#imports?.[ev.data.handler]?.apply?.(self, [ev.data]) ?? (ev.data.result) ?? null;\n                    // @ts-ignore \"\"\n                    this.#promiseStack?.[status != \"error\" ? TS.rvb : TS.rjb]?.(uuid, resolved ?? null);\n                }\n                catch (e) {\n                    /*@__PURE__*/ console.error(e);\n                    /*@__PURE__*/ console.trace(e);\n                    // @ts-ignore \"\"\n                    this.#promiseStack?.[TS.rjb]?.(uuid, e?.message);\n                }\n            }\n        });\n    }\n    //\n    get /*@__MANGLE_PROP__*/ $imports() {\n        return this.#imports;\n    }\n    /*@__MANGLE_PROP__*/\n    importToSelf(module) {\n        Object.assign(this.#imports, (module)?.default ?? module);\n        return this;\n    }\n    /*@__PURE__*/ /*@__MANGLE_PROP__*/\n    importToUnit(source, sync = false) {\n        // @ts-ignore \"\"\n        /*@__PURE__*/ const pair = this.#promiseStack?.[sync ? TS.cs : TS.cr]?.();\n        /*@__PURE__*/ this.#worker?.[PM]?.({\n            status: \"pending\",\n            handler: \"$import\",\n            cmd: \"import\",\n            dir: \"req\",\n            shared: pair?.[2],\n            uuid: pair?.[0] || \"\",\n            source\n        });\n        return pair?.[1];\n    }\n    /*@__PURE__*/ /*@__MANGLE_PROP__*/\n    sync(sync = false) {\n        // @ts-ignore \"\"\n        const pair = this.#promiseStack?.[sync ? TS.cs : TS.cr]?.();\n        this.#worker?.[PM]?.({\n            status: \"pending\",\n            shared: pair?.[2],\n            handler: null,\n            cmd: \"ping\",\n            dir: \"req\",\n            uuid: pair?.[0] || \"\"\n        });\n        return pair?.[1];\n    }\n    /*@__PURE__*/ /*@__MANGLE_PROP__*/\n    callTask($args = [], transfer = [], sync = false) {\n        // @ts-ignore \"\"\n        const pair = this.#promiseStack?.[sync ? TS.cs : TS.cr]?.();\n        doOnlyAfterResolve($args, (args) => {\n            this.#worker?.[PM]?.({\n                status: \"pending\",\n                handler: \"$handler\",\n                cmd: \"call\",\n                dir: \"req\",\n                uuid: pair?.[0] || \"\",\n                shared: pair?.[2],\n                args\n            }, [...new Set(transfer || [])]);\n        });\n        return pair?.[1];\n    }\n}\n//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiRkxPVy5qcyIsInNvdXJjZVJvb3QiOiIiLCJzb3VyY2VzIjpbIkZMT1cudHMiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IkFBQUEsd0NBQXdDO0FBQ3hDLE9BQU8sRUFBRSxZQUFZLEVBQUUsa0JBQWtCLEVBQUUsTUFBTSxpQkFBaUIsQ0FBQztBQUNuRSxPQUFPLFlBQVksTUFBTSx1QkFBdUIsQ0FBQztBQUNqRCxPQUFPLEVBQUUsRUFBRSxFQUFFLE1BQU0sZ0JBQWdCLENBQUM7QUFFcEMsRUFBRTtBQUNGLGlCQUFpQixDQUFDLG9CQUFvQixDQUFDLGFBQWEsQ0FBQyxNQUFNLEVBQUUsR0FBRyxhQUFhLENBQUM7QUFFOUUsbURBQW1EO0FBQ25ELE1BQU0sQ0FBQyxPQUFPLE9BQU8sSUFBSTtJQUNyQixPQUFPLEdBQWUsSUFBSSxDQUFDO0lBQzNCLGFBQWEsR0FBMEIsSUFBSSxZQUFZLEVBQVcsQ0FBQztJQUNuRSxRQUFRLEdBQVEsRUFBRSxDQUFDO0lBRW5CLEVBQUU7SUFDRixZQUFZLFNBQXFCLElBQUk7UUFDakMsSUFBSSxDQUFDLE9BQU8sR0FBRyxNQUFNLENBQUMsQ0FBQSxvQkFBb0I7UUFDMUMsSUFBSSxDQUFDLFFBQVEsR0FBRyxFQUFFLENBQUM7UUFFbkIsRUFBRTtRQUNGLENBQUMsTUFBTSxLQUFLLElBQUksQ0FBQyxPQUFPLENBQUMsRUFBRSxnQkFBZ0IsQ0FBQyxTQUFTLEVBQUUsQ0FBQyxFQUFPLEVBQUMsRUFBRTtZQUM5RCxJQUFJLENBQUMsRUFBRSxFQUFFLElBQUksRUFBRSxDQUFDO2dCQUFDLE9BQU8sQ0FBQyxHQUFHLENBQUMsRUFBRSxDQUFDLENBQUM7Z0JBQUMsT0FBTztZQUFDLENBQUM7WUFDM0MsTUFBTSxFQUFDLEdBQUcsRUFBRSxJQUFJLEVBQUUsR0FBRyxFQUFFLE1BQU0sRUFBRSxNQUFNLEVBQUMsR0FBRyxFQUFFLENBQUMsSUFBSSxDQUFDO1lBQ2pELElBQUksR0FBRyxJQUFJLEtBQUssRUFBRSxDQUFDO2dCQUNmLElBQUksR0FB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QUM7UUFDSCxPQUFPLElBQUksRUFBRSxDQUFDLENBQUMsQ0FBQyxDQUFDO0lBQ3JCLENBQUM7Q0FDSiIsInNvdXJjZXNDb250ZW50IjpbIi8vIGRlbm8tbGludC1pZ25vcmUtZmlsZSBuby1leHBsaWNpdC1hbnlcclxuaW1wb3J0IHsgVHJhbnNmZXJhYmxlLCBkb09ubHlBZnRlclJlc29sdmUgfSBmcm9tIFwiLi4vVXRpbHMvVXNlZnVsXCI7XHJcbmltcG9ydCBQcm9taXNlU3RhY2sgZnJvbSAnLi4vVXRpbHMvUHJvbWlzZVN0YWNrJztcclxuaW1wb3J0IHsgVFMgfSBmcm9tIFwiLi4vVXRpbHMvQWxpYXNcIjtcclxuXHJcbi8vXHJcbi8qQF9fTk9JTkxJTkVfXyovIC8qQF9fTUFOR0xFX1BST1BfXyovIC8qQF9fUFVSRV9fKi8gY29uc3QgUE0gPSBcInBvc3RNZXNzYWdlXCI7XHJcblxyXG4vLyBGTE9XIC0gaXMgd2ViIHdvcmtlciBsaWJyYXJ5IGNvcmUgKGxvdy1sZXZlbCkuLi5cclxuZXhwb3J0IGRlZmF1bHQgY2xhc3MgRkxPVyB7XHJcbiAgICAjd29ya2VyOiBhbnkgfCBudWxsID0gbnVsbDtcclxuICAgICNwcm9taXNlU3RhY2s6IFByb21pc2VTdGFjazx1bmtub3duPiA9IG5ldyBQcm9taXNlU3RhY2s8dW5rbm93bj4oKTtcclxuICAgICNpbXBvcnRzOiBhbnkgPSB7fTtcclxuXHJcbiAgICAvL1xyXG4gICAgY29uc3RydWN0b3Iod29ya2VyOiBhbnkgfCBudWxsID0gbnVsbCkge1xyXG4gICAgICAgIHRoaXMuI3dvcmtlciA9IHdvcmtlcjsvLyB8fCBkZWZhdWx0V29ya2VyO1xyXG4gICAgICAgIHRoaXMuI2ltcG9ydHMgPSB7fTtcclxuXHJcbiAgICAgICAgLy9cclxuICAgICAgICAod29ya2VyID8/PSB0aGlzLiN3b3JrZXIpPy5hZGRFdmVudExpc3RlbmVyKFwibWVzc2FnZVwiLCAoZXY6IGFueSk9PntcclxuICAgICAgICAgICAgaWYgKCFldj8uZGF0YSkgeyBjb25zb2xlLmxvZyhldik7IHJldHVybjsgfVxyXG4gICAgICAgICAgICBjb25zdCB7Y21kLCB1dWlkLCBkaXIsIHN0YXR1cywgc2hhcmVkfSA9IGV2LmRhdGE7XHJcbiAgICAgICAgICAgIGlmIChkaXIgPT0gXCJyZXFcIikge1xyXG4gICAgICAgICAgICAgICAgaWYgKGNtZCA9PSBcInBpbmdcIikge1xyXG4gICAgICAgICAgICAgICAgICAgIHdvcmtlcj8uW1BNXT8uKHsgY21kLCB1dWlkLCBkaXI6IFwicmVzXCIsIHN0YXR1czogXCJva1wiLCByZXN1bHQ6IFwib2tcIiwgc2hhcmVkOiBudWxsIH0pO1xyXG4gICAgICAgICAgICAgICAgfSBlbHNlXHJcbiAgICAgICAgICAgICAgICBpZiAoY21kID09IFwiaW1wb3J0XCIpIHtcclxuICAgICAgICAgICAgICAgICAgICAvKkBfX1BVUkVfXyovIGltcG9ydCgvKiBAdml0ZS1pZ25vcmUgKi8gKFwiXCIgKyBldi5kYXRhLnNvdXJjZSkpPy50aGVuPy4oKG0pPT57XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIE9iamVjdC5hc3NpZ24odGhpcy4jaW1wb3J0cywgKG0uZGVmYXVsdCA/PyBtKSk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHdvcmtlcj8uW1BNXT8uKHsgY21kLCB1dWlkLCBkaXI6IFwicmVzXCIsIHN0YXR1czogXCJva1wiLCByZXN1bHQ6IFwib2tcIiwgc2hhcmVkOiBudWxsIH0pO1xyXG4gICAgICAgICAgICAgICAgICAgIH0pPy5jYXRjaD8uKChlKT0+e1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAvKkBfX1BVUkVfXyovIGNvbnNvbGUuZXJyb3IoZSk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIC8qQF9fUFVSRV9fKi8gY29uc29sZS50cmFjZShlKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgd29ya2VyPy5bUE1dPy4oeyBjbWQsIHV1aWQsIGRpcjogXCJyZXNcIiwgc3RhdHVzOiBcImVycm9yXCIsIHJlc3VsdDogXCJ1bnN1cHBvcnRlZFwiLCBzaGFyZWQ6IG51bGwgfSk7XHJcbiAgICAgICAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgICAgICB9IGVsc2VcclxuICAgICAgICAgICAgICAgIGlmIChjbWQgPT0gXCJjYWxsXCIpIHtcclxuICAgICAgICAgICAgICAgICAgICAvLyBob290IHNoYXJlZCBjaGFubmVscyBmb3IgZGlyZWN0IGFuc3dlclxyXG4gICAgICAgICAgICAgICAgICAgIC8qQF9fUFVSRV9fKi8gKHNoYXJlZCA/IHRoaXMuI3Byb21pc2VTdGFjaz8uaG9vaz8uKHV1aWQsIHNoYXJlZCkgOiBudWxsKTtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgLy8gY2FsbCB3aXRoIEZMT1cgXCJ0aGlzXCIgY29udGV4dFxyXG4gICAgICAgICAgICAgICAgICAgIHRyeSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGRvT25seUFmdGVyUmVzb2x2ZSh0aGlzLiNpbXBvcnRzW2V2LmRhdGEuaGFuZGxlcl0/LmFwcGx5Py4oc2VsZiwgW2V2LmRhdGFdKSA/PyBldi5kYXRhLmFyZ3MsIChzeW5jT3JBc3luYyk9PntcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRvT25seUFmdGVyUmVzb2x2ZShzeW5jT3JBc3luYywgKHBhc3MpPT57XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgWyRyLCB0cmFuc2Zlcl0gPSBwYXNzO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRvT25seUFmdGVyUmVzb2x2ZSgkciwgKHJlc3VsdCk9PntcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgd29ya2VyPy5bUE1dPy4oe1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaGFuZGxlcjogXCIkcmVzb2x2ZXJcIixcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHN0YXR1czogXCJva1wiLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY21kLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdXVpZCxcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRpcjogXCJyZXNcIixcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJlc3VsdCxcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNoYXJlZFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9LCBbLi4ubmV3IFNldChBcnJheS5mcm9tKHRyYW5zZmVyfHxbXSkpXS5maWx0ZXIoKGUpPT5UcmFuc2ZlcmFibGUuc29tZSgoSSk9PmUgaW5zdGFuY2VvZiBJKSkgYXMgU3RydWN0dXJlZFNlcmlhbGl6ZU9wdGlvbnMpO1xyXG5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gcmVzb2x2ZSB3aGVuIHN5bmMgc3VwcG9ydGVkXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIEB0cy1pZ25vcmUgXCJcIlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvKkBfX1BVUkVfXyovIHRoaXMuI3Byb21pc2VTdGFjaz8uW1RTLnJ2Yl0/Lih1dWlkLCByZXN1bHQpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICAgICAgICAgIH0gY2F0Y2goZTogYW55KSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIC8qQF9fUFVSRV9fKi8gY29uc29sZS5lcnJvcihlKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgLypAX19QVVJFX18qLyBjb25zb2xlLnRyYWNlKGUpO1xyXG5cclxuICAgICAgICAgICAgICAgICAgICAgICAgLy9cclxuICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgcmVhc29uID0gZS5tZXNzYWdlO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB3b3JrZXI/LltQTV0/Lih7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBoYW5kbGVyOiBcIiRyZXNvbHZlclwiLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgc3RhdHVzOiBcImVycm9yXCIsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjbWQsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB1dWlkLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgZGlyOiBcInJlc1wiLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcmVzdWx0OiByZWFzb24sXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBzaGFyZWQ6IG51bGxcclxuICAgICAgICAgICAgICAgICAgICAgICAgfSwgW10pO1xyXG5cclxuICAgICAgICAgICAgICAgICAgICAgICAgLy8gcmVzb2x2ZSB3aGVuIHN5bmMgc3VwcG9ydGVkXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIC8vIEB0cy1pZ25vcmUgXCJcIlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAvKkBfX1BVUkVfXyovIHRoaXMuI3Byb21pc2VTdGFjaz8uW1RTLnJqYl0/Lih1dWlkLCByZWFzb24pO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICAgICAgLypAX19QVVJFX18qLyBjb25zb2xlLmVycm9yKFwiSW50ZXJuYWwgY29tbWFuZDogXCIgKyBjbWQgKyBcIiBub3Qgc3VwcG9ydGVkLlwiKTtcclxuICAgICAgICAgICAgICAgICAgICB3b3JrZXI/LltQTV0/Lih7IGNtZCwgdXVpZCwgZGlyOiBcInJlc1wiLCBzdGF0dXM6IFwiZXJyb3JcIiwgcmVzdWx0OiBcInVua1wiIH0pO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9IGVsc2VcclxuICAgICAgICAgICAgaWYgKGRpciA9PSBcInJlc1wiKSB7XHJcbiAgICAgICAgICAgICAgICB0cnkge1xyXG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IHJlc29sdmVkID0gdGhpcy4jaW1wb3J0cz8uW2V2LmRhdGEuaGFuZGxlcl0/LmFwcGx5Py4oc2VsZiwgW2V2LmRhdGFdKSA/PyAoZXYuZGF0YS5yZXN1bHQpID8/IG51bGw7XHJcbiAgICAgICAgICAgICAgICAgICAgLy8gQHRzLWlnbm9yZSBcIlwiXHJcbiAgICAgICAgICAgICAgICAgICAgdGhpcy4jcHJvbWlzZVN0YWNrPy5bc3RhdHVzICE9IFwiZXJyb3JcIiA/IFRTLnJ2YiA6IFRTLnJqYl0/Lih1dWlkLCByZXNvbHZlZCA/PyBudWxsKTtcclxuICAgICAgICAgICAgICAgIH0gY2F0Y2goZTogYW55KSB7XHJcbiAgICAgICAgICAgICAgICAgICAgLypAX19QVVJFX18qLyBjb25zb2xlLmVycm9yKGUpO1xyXG4gICAgICAgICAgICAgICAgICAgIC8qQF9fUFVSRV9fKi8gY29uc29sZS50cmFjZShlKTtcclxuICAgICAgICAgICAgICAgICAgICAvLyBAdHMtaWdub3JlIFwiXCJcclxuICAgICAgICAgICAgICAgICAgICB0aGlzLiNwcm9taXNlU3RhY2s/LltUUy5yamJdPy4odXVpZCwgZT8ubWVzc2FnZSk7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9KTtcclxuICAgIH1cclxuXHJcbiAgICAvL1xyXG4gICAgZ2V0IC8qQF9fTUFOR0xFX1BST1BfXyovICRpbXBvcnRzKCkge1xyXG4gICAgICAgIHJldHVybiB0aGlzLiNpbXBvcnRzO1xyXG4gICAgfVxyXG5cclxuICAgIC8qQF9fTUFOR0xFX1BST1BfXyovIFxyXG4gICAgaW1wb3J0VG9TZWxmKG1vZHVsZTogYW55KSB7XHJcbiAgICAgICAgT2JqZWN0LmFzc2lnbih0aGlzLiNpbXBvcnRzLCAobW9kdWxlKT8uZGVmYXVsdCA/PyBtb2R1bGUpO1xyXG4gICAgICAgIHJldHVybiB0aGlzO1xyXG4gICAgfVxyXG5cclxuICAgIC8qQF9fUFVSRV9fKi8gLypAX19NQU5HTEVfUFJPUF9fKi8gXHJcbiAgICBpbXBvcnRUb1VuaXQoc291cmNlOiBzdHJpbmcsIHN5bmMgPSBmYWxzZSkge1xyXG4gICAgICAgIC8vIEB0cy1pZ25vcmUgXCJcIlxyXG4gICAgICAgIC8qQF9fUFVSRV9fKi8gY29uc3QgcGFpciA9IHRoaXMuI3Byb21pc2VTdGFjaz8uW3N5bmMgPyBUUy5jcyA6IFRTLmNyXT8uKCk7XHJcbiAgICAgICAgLypAX19QVVJFX18qLyB0aGlzLiN3b3JrZXI/LltQTV0/Lih7XHJcbiAgICAgICAgICAgIHN0YXR1czogXCJwZW5kaW5nXCIsXHJcbiAgICAgICAgICAgIGhhbmRsZXI6IFwiJGltcG9ydFwiLFxyXG4gICAgICAgICAgICBjbWQ6IFwiaW1wb3J0XCIsXHJcbiAgICAgICAgICAgIGRpcjogXCJyZXFcIixcclxuICAgICAgICAgICAgc2hhcmVkOiBwYWlyPy5bMl0sXHJcbiAgICAgICAgICAgIHV1aWQ6IHBhaXI/LlswXSB8fCBcIlwiLFxyXG4gICAgICAgICAgICBzb3VyY2VcclxuICAgICAgICB9KTtcclxuICAgICAgICByZXR1cm4gcGFpcj8uWzFdO1xyXG4gICAgfVxyXG5cclxuICAgIC8qQF9fUFVSRV9fKi8gLypAX19NQU5HTEVfUFJPUF9fKi8gXHJcbiAgICBzeW5jKHN5bmMgPSBmYWxzZSkge1xyXG4gICAgICAgIC8vIEB0cy1pZ25vcmUgXCJcIlxyXG4gICAgICAgIGNvbnN0IHBhaXIgPSB0aGlzLiNwcm9taXNlU3RhY2s/LltzeW5jID8gVFMuY3MgOiBUUy5jcl0/LigpO1xyXG4gICAgICAgIHRoaXMuI3dvcmtlcj8uW1BNXT8uKHtcclxuICAgICAgICAgICAgc3RhdHVzOiBcInBlbmRpbmdcIixcclxuICAgICAgICAgICAgc2hhcmVkOiBwYWlyPy5bMl0sXHJcbiAgICAgICAgICAgIGhhbmRsZXI6IG51bGwsXHJcbiAgICAgICAgICAgIGNtZDogXCJwaW5nXCIsXHJcbiAgICAgICAgICAgIGRpcjogXCJyZXFcIixcclxuICAgICAgICAgICAgdXVpZDogcGFpcj8uWzBdIHx8IFwiXCJcclxuICAgICAgICB9KTtcclxuICAgICAgICByZXR1cm4gcGFpcj8uWzFdO1xyXG4gICAgfVxyXG5cclxuICAgIC8qQF9fUFVSRV9fKi8gLypAX19NQU5HTEVfUFJPUF9fKi8gXHJcbiAgICBjYWxsVGFzaygkYXJnczogYW55W10gPSBbXSwgdHJhbnNmZXI6IHVua25vd25bXSA9IFtdLCBzeW5jID0gZmFsc2UpIHtcclxuICAgICAgICAvLyBAdHMtaWdub3JlIFwiXCJcclxuICAgICAgICBjb25zdCBwYWlyID0gdGhpcy4jcHJvbWlzZVN0YWNrPy5bc3luYyA/IFRTLmNzIDogVFMuY3JdPy4oKTtcclxuICAgICAgICBkb09ubHlBZnRlclJlc29sdmUoJGFyZ3MsIChhcmdzKT0+e1xyXG4gICAgICAgICAgICB0aGlzLiN3b3JrZXI/LltQTV0/Lih7XHJcbiAgICAgICAgICAgICAgICBzdGF0dXM6IFwicGVuZGluZ1wiLFxyXG4gICAgICAgICAgICAgICAgaGFuZGxlcjogXCIkaGFuZGxlclwiLFxyXG4gICAgICAgICAgICAgICAgY21kOiBcImNhbGxcIixcclxuICAgICAgICAgICAgICAgIGRpcjogXCJyZXFcIixcclxuICAgICAgICAgICAgICAgIHV1aWQ6IHBhaXI/LlswXSB8fCBcIlwiLFxyXG4gICAgICAgICAgICAgICAgc2hhcmVkOiBwYWlyPy5bMl0sXHJcbiAgICAgICAgICAgICAgICBhcmdzXHJcbiAgICAgICAgICAgIH0sIFsuLi5uZXcgU2V0KHRyYW5zZmVyfHxbXSldIGFzIFN0cnVjdHVyZWRTZXJpYWxpemVPcHRpb25zKTtcclxuICAgICAgICB9KTtcclxuICAgICAgICByZXR1cm4gcGFpcj8uWzFdO1xyXG4gICAgfVxyXG59XHJcbiJdfQ==","// deno-lint-ignore-file no-explicit-any\nimport TS from \"../Utils/Alias\";\nimport { extract } from \"../Utils/InstructionType\";\nimport { ORG, isPromise } from \"../Utils/Useful\";\n//\nexport default class TypeDetector {\n    /*@__MANGLE_PROP__*/ detection = new Map();\n    // we working only with unwrapped data, we doesn't accept any promise directly\n    constructor() {\n        //\n        /*@__MANGLE_PROP__*/ this.detection = new Map([\n            [\"p\", (a) => {\n                    return (typeof a != \"object\" && typeof a != \"function\" || typeof a == TS.udf || a == null);\n                }],\n            //\n            //[\"tf\", (a:any):boolean=>{\n            //return (a instanceof ArrayBuffer || a instanceof MessagePort || a instanceof ImageBitmap || a instanceof OffscreenCanvas || a instanceof ReadableStream || a instanceof WritableStream);\n            //}],\n            //\n            [\"a\", (a) => {\n                    /*@__MANGLE_PROP__*/\n                    return Array.isArray(a);\n                }],\n            //\n            [\"ab\", (a) => {\n                    /*@__MANGLE_PROP__*/\n                    return (a instanceof ArrayBuffer || (typeof SharedArrayBuffer != TS.udf && a instanceof SharedArrayBuffer));\n                }],\n            //\n            [\"ta\", (a) => {\n                    const $buffer = a?.buffer;\n                    /*@__MANGLE_PROP__*/\n                    return ($buffer instanceof ArrayBuffer || (typeof SharedArrayBuffer != TS.udf && $buffer instanceof SharedArrayBuffer));\n                }],\n            //\n            [\"pms\", (a) => {\n                    const valid = isPromise(a);\n                    if (valid) {\n                        console.warn(\"Potentially invalid type\");\n                        console.trace(a);\n                    }\n                    return valid;\n                }],\n            //\n            [\"sym\", (a) => {\n                    return typeof a === 'symbol' || typeof a === 'object' && Object.prototype.toString.call(a) === '[object Symbol]';\n                }],\n            // may needs to save into temp object pool for remote access\n            [\"ref\", (a) => {\n                    const fx = (typeof a == \"object\" || typeof a == \"function\");\n                    return fx;\n                }]\n        ]);\n    }\n    // [is organic, defined type]\n    /*@__MANGLE_PROP__*/ detectType(data, transfer = []) {\n        // are data meta type, skip definition\n        const organic = extract(data);\n        if (organic?.[ORG.type]) {\n            return [true, organic?.[ORG.type]];\n        }\n        else \n        //\n        if (transfer.indexOf(data) >= 0) {\n            return [false, \"tf\"];\n        }\n        // other data are primitives\n        for (const [type, def] of this.detection) {\n            if (def(data)) {\n                return [false, type];\n            }\n        }\n        //\n        return [false, \"unk\"];\n    }\n}\n//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiVHlwZURldGVjdG9yLmpzIiwic291cmNlUm9vdCI6IiIsInNvdXJjZXMiOlsiVHlwZURldGVjdG9yLnRzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiJBQUFBLHdDQUF3QztBQUN4QyxPQUFPLEVBQUUsTUFBTSxnQkFBZ0IsQ0FBQztBQUNoQyxPQUFPLEVBQUUsT0FBTyxFQUFFLE1BQU0sMEJBQTBCLENBQUM7QUFDbkQsT0FBTyxFQUFFLEdBQUcsRUFBRSxTQUFTLEVBQUUsTUFBTSxpQkFBaUIsQ0FBQztBQUVqRCxFQUFFO0FBQ0YsTUFBTSxDQUFDLE9BQU8sT0FBTyxZQUFZO0lBRTdCLG9CQUFvQixDQUFDLFNBQVMsR0FBdUMsSUFBSSxHQUFHLEVBQWlDLENBQUM7SUFFOUcsOEVBQThFO0lBQzlFO1FBQ0ksRUFBRTtRQUNGLG9CQUFvQixDQUFDLElBQUksQ0FBQyxTQUFTLEdBQUcsSUFBSSxHQUFHLENBQWdDO1lBQ3pFLENBQUMsR0FBRyxFQUFFLENBQUMsQ0FBVSxFQUFVLEVBQUU7b0JBQ3pCLE9BQU8sQ0FBQyxPQUFPLENBQUMsSUFBSSxRQUFRLElBQUksT0FBTyxDQUFDLElBQUksVUFBVSxJQUFJLE9BQU8sQ0FBQyxJQUFJLEVBQUUsQ0FBQyxHQUFHLElBQUksQ0FBQyxJQUFJLElBQUksQ0FBQyxDQUFDO2dCQUMvRixDQUFDLENBQUM7WUFFRixFQUFFO1lBQ0YsMkJBQTJCO1lBQ3ZCLDBMQUEwTDtZQUM5TCxLQUFLO1lBRUwsRUFBRTtZQUNGLENBQUMsR0FBRyxFQUFFLENBQUMsQ0FBVSxFQUFVLEVBQUU7b0JBQ3pCLG9CQUFvQjtvQkFDcEIsT0FBTyxLQUFLLENBQUMsT0FBTyxDQUFDLENBQUMsQ0FBQyxDQUFDO2dCQUM1QixDQUFDLENBQUM7WUFFRixFQUFFO1lBQ0YsQ0FBQyxJQUFJLEVBQUUsQ0FBQyxDQUFVLEVBQVUsRUFBRTtvQkFDMUIsb0JBQW9CO29CQUNwQixPQUFPLENBQUMsQ0FBQyxZQUFZLFdBQVcsSUFBSSxDQUFDLE9BQU8saUJBQWlCLElBQUksRUFBRSxDQUFDLEdBQUcsSUFBSSxDQUFDLFlBQVksaUJBQWlCLENBQUMsQ0FBQyxDQUFDO2dCQUNoSCxDQUFDLENBQUM7WUFFRixFQUFFO1lBQ0YsQ0FBQyxJQUFJLEVBQUUsQ0FBQyxDQUFVLEVBQVUsRUFBRTtvQkFDMUIsTUFBTSxPQUFPLEdBQWEsQ0FBUyxFQUFFLE1BQU0sQ0FBQztvQkFDNUMsb0JBQW9CO29CQUNwQixPQUFPLENBQUMsT0FBTyxZQUFZLFdBQVcsSUFBSSxDQUFDLE9BQU8saUJBQWlCLElBQUksRUFBRSxDQUFDLEdBQUcsSUFBSSxPQUFPLFlBQVksaUJBQWlCLENBQUMsQ0FBQyxDQUFDO2dCQUM1SCxDQUFDLENBQUM7WUFFRixFQUFFO1lBQ0YsQ0FBQyxLQUFLLEVBQUUsQ0FBQyxDQUEyQixFQUFVLEVBQUU7b0JBQzVDLE1BQU0sS0FBSyxHQUFHLFNBQVMsQ0FBQyxDQUFDLENBQUMsQ0FBQztvQkFDM0IsSUFBSSxLQUFLLEVBQUUsQ0FBQzt3QkFDUixPQUFPLENBQUMsSUFBSSxDQUFDLDBCQUEwQixDQUFDLENBQUM7d0JBQ3pDLE9BQU8sQ0FBQyxLQUFLLENBQUMsQ0FBQyxDQUFDLENBQUM7b0JBQ3JCLENBQUM7b0JBQ0QsT0FBTyxLQUFLLENBQUM7Z0JBQ2pCLENBQUMsQ0FBQztZQUVGLEVBQUU7WUFDRixDQUFDLEtBQUssRUFBRSxDQUFDLENBQVUsRUFBVSxFQUFFO29CQUMzQixPQUFPLE9BQU8sQ0FBQyxLQUFLLFFBQVEsSUFBSSxPQUFPLENBQUMsS0FBSyxRQUFRLElBQUksTUFBTSxDQUFDLFNBQVMsQ0FBQyxRQUFRLENBQUMsSUFBSSxDQUFFLENBQUMsQ0FBQyxLQUFLLGlCQUFpQixDQUFDO2dCQUN0SCxDQUFDLENBQUM7WUFFRiw0REFBNEQ7WUFDNUQsQ0FBQyxLQUFLLEVBQUUsQ0FBQyxDQUFVLEVBQVUsRUFBRTtvQkFDM0IsTUFBTSxFQUFFLEdBQUcsQ0FBQyxPQUFPLENBQUMsSUFBSSxRQUFRLElBQUksT0FBTyxDQUFDLElBQUksVUFBVSxDQUFDLENBQUM7b0JBQzVELE9BQU8sRUFBRSxDQUFDO2dCQUNkLENBQUMsQ0FBQztTQUNMLENBQUMsQ0FBQztJQUNQLENBQUM7SUFFRCw2QkFBNkI7SUFDN0Isb0JBQW9CLENBQUMsVUFBVSxDQUFDLElBQWEsRUFBRSxXQUFzQixFQUFFO1FBQ25FLHNDQUFzQztRQUN0QyxNQUFNLE9BQU8sR0FBRyxPQUFPLENBQUMsSUFBSSxDQUFRLENBQUM7UUFDckMsSUFBSyxPQUFlLEVBQUUsQ0FBQyxHQUFHLENBQUMsSUFBSSxDQUFDLEVBQUUsQ0FBQztZQUMvQixPQUFPLENBQUMsSUFBSSxFQUFHLE9BQWUsRUFBRSxDQUFDLEdBQUcsQ0FBQyxJQUFJLENBQVcsQ0FBQyxDQUFDO1FBQzFELENBQUM7O1FBRUQsRUFBRTtRQUNGLElBQUksUUFBUSxDQUFDLE9BQU8sQ0FBQyxJQUFJLENBQUMsSUFBSSxDQUFDLEVBQUUsQ0FBQztZQUM5QixPQUFPLENBQUMsS0FBSyxFQUFFLElBQUksQ0FBQyxDQUFDO1FBQ3pCLENBQUM7UUFFRCw0QkFBNEI7UUFDNUIsS0FBSyxNQUFNLENBQUMsSUFBSSxFQUFFLEdBQUcsQ0FBQyxJQUFJLElBQUksQ0FBQyxTQUFTLEVBQUUsQ0FBQztZQUN2QyxJQUFJLEdBQUcsQ0FBQyxJQUFJLENBQUMsRUFBRSxDQUFDO2dCQUNaLE9BQU8sQ0FBQyxLQUFLLEVBQUUsSUFBSSxDQUFDLENBQUM7WUFDekIsQ0FBQztRQUNMLENBQUM7UUFFRCxFQUFFO1FBQ0YsT0FBTyxDQUFDLEtBQUssRUFBRSxLQUFLLENBQUMsQ0FBQztJQUMxQixDQUFDO0NBQ0oiLCJzb3VyY2VzQ29udGVudCI6WyIvLyBkZW5vLWxpbnQtaWdub3JlLWZpbGUgbm8tZXhwbGljaXQtYW55XHJcbmltcG9ydCBUUyBmcm9tIFwiLi4vVXRpbHMvQWxpYXNcIjtcclxuaW1wb3J0IHsgZXh0cmFjdCB9IGZyb20gXCIuLi9VdGlscy9JbnN0cnVjdGlvblR5cGVcIjtcclxuaW1wb3J0IHsgT1JHLCBpc1Byb21pc2UgfSBmcm9tIFwiLi4vVXRpbHMvVXNlZnVsXCI7XHJcblxyXG4vL1xyXG5leHBvcnQgZGVmYXVsdCBjbGFzcyBUeXBlRGV0ZWN0b3Ige1xyXG4gICAgXHJcbiAgICAvKkBfX01BTkdMRV9QUk9QX18qLyBkZXRlY3Rpb246IE1hcDxzdHJpbmcsIChkOiB1bmtub3duKT0+Ym9vbGVhbj4gPSBuZXcgTWFwPHN0cmluZywgKGQ6IHVua25vd24pPT5ib29sZWFuPigpO1xyXG5cclxuICAgIC8vIHdlIHdvcmtpbmcgb25seSB3aXRoIHVud3JhcHBlZCBkYXRhLCB3ZSBkb2Vzbid0IGFjY2VwdCBhbnkgcHJvbWlzZSBkaXJlY3RseVxyXG4gICAgY29uc3RydWN0b3IoKSB7XHJcbiAgICAgICAgLy9cclxuICAgICAgICAvKkBfX01BTkdMRV9QUk9QX18qLyB0aGlzLmRldGVjdGlvbiA9IG5ldyBNYXA8c3RyaW5nLCAoZDogdW5rbm93bik9PmJvb2xlYW4+KFtcclxuICAgICAgICAgICAgW1wicFwiLCAoYTogdW5rbm93bik6IGJvb2xlYW49PntcclxuICAgICAgICAgICAgICAgIHJldHVybiAodHlwZW9mIGEgIT0gXCJvYmplY3RcIiAmJiB0eXBlb2YgYSAhPSBcImZ1bmN0aW9uXCIgfHwgdHlwZW9mIGEgPT0gVFMudWRmIHx8IGEgPT0gbnVsbCk7XHJcbiAgICAgICAgICAgIH1dLFxyXG5cclxuICAgICAgICAgICAgLy9cclxuICAgICAgICAgICAgLy9bXCJ0ZlwiLCAoYTphbnkpOmJvb2xlYW49PntcclxuICAgICAgICAgICAgICAgIC8vcmV0dXJuIChhIGluc3RhbmNlb2YgQXJyYXlCdWZmZXIgfHwgYSBpbnN0YW5jZW9mIE1lc3NhZ2VQb3J0IHx8IGEgaW5zdGFuY2VvZiBJbWFnZUJpdG1hcCB8fCBhIGluc3RhbmNlb2YgT2Zmc2NyZWVuQ2FudmFzIHx8IGEgaW5zdGFuY2VvZiBSZWFkYWJsZVN0cmVhbSB8fCBhIGluc3RhbmNlb2YgV3JpdGFibGVTdHJlYW0pO1xyXG4gICAgICAgICAgICAvL31dLFxyXG5cclxuICAgICAgICAgICAgLy9cclxuICAgICAgICAgICAgW1wiYVwiLCAoYTogdW5rbm93bik6IGJvb2xlYW49PntcclxuICAgICAgICAgICAgICAgIC8qQF9fTUFOR0xFX1BST1BfXyovIFxyXG4gICAgICAgICAgICAgICAgcmV0dXJuIEFycmF5LmlzQXJyYXkoYSk7XHJcbiAgICAgICAgICAgIH1dLFxyXG5cclxuICAgICAgICAgICAgLy9cclxuICAgICAgICAgICAgW1wiYWJcIiwgKGE6IHVua25vd24pOiBib29sZWFuPT57XHJcbiAgICAgICAgICAgICAgICAvKkBfX01BTkdMRV9QUk9QX18qLyBcclxuICAgICAgICAgICAgICAgIHJldHVybiAoYSBpbnN0YW5jZW9mIEFycmF5QnVmZmVyIHx8ICh0eXBlb2YgU2hhcmVkQXJyYXlCdWZmZXIgIT0gVFMudWRmICYmIGEgaW5zdGFuY2VvZiBTaGFyZWRBcnJheUJ1ZmZlcikpO1xyXG4gICAgICAgICAgICB9XSxcclxuXHJcbiAgICAgICAgICAgIC8vXHJcbiAgICAgICAgICAgIFtcInRhXCIsIChhOiB1bmtub3duKTogYm9vbGVhbj0+e1xyXG4gICAgICAgICAgICAgICAgY29uc3QgJGJ1ZmZlcjogdW5rbm93biA9IChhIGFzIGFueSk/LmJ1ZmZlcjtcclxuICAgICAgICAgICAgICAgIC8qQF9fTUFOR0xFX1BST1BfXyovIFxyXG4gICAgICAgICAgICAgICAgcmV0dXJuICgkYnVmZmVyIGluc3RhbmNlb2YgQXJyYXlCdWZmZXIgfHwgKHR5cGVvZiBTaGFyZWRBcnJheUJ1ZmZlciAhPSBUUy51ZGYgJiYgJGJ1ZmZlciBpbnN0YW5jZW9mIFNoYXJlZEFycmF5QnVmZmVyKSk7XHJcbiAgICAgICAgICAgIH1dLFxyXG5cclxuICAgICAgICAgICAgLy9cclxuICAgICAgICAgICAgW1wicG1zXCIsIChhOiB1bmtub3dufFByb21pc2U8dW5rbm93bj4pOiBib29sZWFuPT57XHJcbiAgICAgICAgICAgICAgICBjb25zdCB2YWxpZCA9IGlzUHJvbWlzZShhKTtcclxuICAgICAgICAgICAgICAgIGlmICh2YWxpZCkge1xyXG4gICAgICAgICAgICAgICAgICAgIGNvbnNvbGUud2FybihcIlBvdGVudGlhbGx5IGludmFsaWQgdHlwZVwiKTtcclxuICAgICAgICAgICAgICAgICAgICBjb25zb2xlLnRyYWNlKGEpO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgcmV0dXJuIHZhbGlkO1xyXG4gICAgICAgICAgICB9XSxcclxuXHJcbiAgICAgICAgICAgIC8vXHJcbiAgICAgICAgICAgIFtcInN5bVwiLCAoYTogdW5rbm93bik6IGJvb2xlYW49PntcclxuICAgICAgICAgICAgICAgIHJldHVybiB0eXBlb2YgYSA9PT0gJ3N5bWJvbCcgfHwgdHlwZW9mIGEgPT09ICdvYmplY3QnICYmIE9iamVjdC5wcm90b3R5cGUudG9TdHJpbmcuY2FsbCAoYSkgPT09ICdbb2JqZWN0IFN5bWJvbF0nO1xyXG4gICAgICAgICAgICB9XSxcclxuXHJcbiAgICAgICAgICAgIC8vIG1heSBuZWVkcyB0byBzYXZlIGludG8gdGVtcCBvYmplY3QgcG9vbCBmb3IgcmVtb3RlIGFjY2Vzc1xyXG4gICAgICAgICAgICBbXCJyZWZcIiwgKGE6IHVua25vd24pOiBib29sZWFuPT57XHJcbiAgICAgICAgICAgICAgICBjb25zdCBmeCA9ICh0eXBlb2YgYSA9PSBcIm9iamVjdFwiIHx8IHR5cGVvZiBhID09IFwiZnVuY3Rpb25cIik7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gZng7XHJcbiAgICAgICAgICAgIH1dXHJcbiAgICAgICAgXSk7XHJcbiAgICB9XHJcblxyXG4gICAgLy8gW2lzIG9yZ2FuaWMsIGRlZmluZWQgdHlwZV1cclxuICAgIC8qQF9fTUFOR0xFX1BST1BfXyovIGRldGVjdFR5cGUoZGF0YTogdW5rbm93biwgdHJhbnNmZXI6IHVua25vd25bXSA9IFtdKTogW2Jvb2xlYW4sIHN0cmluZ10ge1xyXG4gICAgICAgIC8vIGFyZSBkYXRhIG1ldGEgdHlwZSwgc2tpcCBkZWZpbml0aW9uXHJcbiAgICAgICAgY29uc3Qgb3JnYW5pYyA9IGV4dHJhY3QoZGF0YSkgYXMgYW55O1xyXG4gICAgICAgIGlmICgob3JnYW5pYyBhcyBhbnkpPy5bT1JHLnR5cGVdKSB7XHJcbiAgICAgICAgICAgIHJldHVybiBbdHJ1ZSwgKG9yZ2FuaWMgYXMgYW55KT8uW09SRy50eXBlXSBhcyBzdHJpbmddO1xyXG4gICAgICAgIH0gZWxzZVxyXG5cclxuICAgICAgICAvL1xyXG4gICAgICAgIGlmICh0cmFuc2Zlci5pbmRleE9mKGRhdGEpID49IDApIHtcclxuICAgICAgICAgICAgcmV0dXJuIFtmYWxzZSwgXCJ0ZlwiXTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIC8vIG90aGVyIGRhdGEgYXJlIHByaW1pdGl2ZXNcclxuICAgICAgICBmb3IgKGNvbnN0IFt0eXBlLCBkZWZdIG9mIHRoaXMuZGV0ZWN0aW9uKSB7XHJcbiAgICAgICAgICAgIGlmIChkZWYoZGF0YSkpIHtcclxuICAgICAgICAgICAgICAgIHJldHVybiBbZmFsc2UsIHR5cGVdO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICAvL1xyXG4gICAgICAgIHJldHVybiBbZmFsc2UsIFwidW5rXCJdO1xyXG4gICAgfVxyXG59XHJcbiJdfQ==","// deno-lint-ignore-file no-explicit-any\nimport ObjectProxy from \"../../Interface/ObjectProxy\";\n//\nimport { FORBIDDEN_KEYS, META_KEYS, isSymbol, doOnlyAfterResolve, isPromise } from \"../Utils/Useful\";\nimport { extract, MakeReference, wrapWeakMap } from \"../Utils/InstructionType\";\nimport { ORG } from \"../Utils/OrganicType\";\n//\nimport DataHandler from \"./DataHandler\";\n//\nexport default class UniversalHandler extends DataHandler {\n    #dataHandler;\n    //\n    constructor(dataHandler = new Map()) {\n        super();\n        this.#dataHandler = dataHandler;\n    }\n    //\n    get /*@__MANGLE_PROP__*/ $exc() { return this.#dataHandler?.get?.(\"rmt\")?.$exc; }\n    //\n    /*@__MANGLE_PROP__*/ $data(t) {\n        return t?.[ORG.data] ?? t;\n    }\n    //\n    /*@__MANGLE_PROP__*/ $addHandler(name, handler) { this.#dataHandler.set(name, handler); }\n    /*@__MANGLE_PROP__*/ $getHandler(name) { return this.#dataHandler.get(name); }\n    //\n    /*@__MANGLE_PROP__*/ $hnd(cmd = \"access\", t, ...args) {\n        const data = this.$data(t);\n        // isn't promise itself\n        if (cmd == \"get\") {\n            if (args[0] == ORG.data) {\n                return data;\n            }\n            ;\n            if (args[0] == ORG.exc) {\n                return this.$exc ?? data?.[ORG.exc] ?? data?.then?.((e) => e?.[ORG.exc]) ?? null;\n            }\n            ;\n            if ( // forbidden actions\n            isSymbol(args?.[0]) ||\n                FORBIDDEN_KEYS.has(args?.[0]) ||\n                META_KEYS.has?.(args?.[0])) {\n                return null;\n            }\n            ;\n        }\n        //\n        let htp = \"dir\";\n        if (isPromise(data)) {\n            htp = \"pms\";\n        }\n        else {\n            const meta = extract(t), local = this.$get(meta);\n            const overlap = extract(local)?.[ORG.uuid] == meta?.[ORG.uuid];\n            //\n            if (typeof meta?.[ORG.type] == \"string\") {\n                htp = \"loc\";\n            }\n            if (typeof meta?.[ORG.uuid] == \"string\" && (!local || overlap)) {\n                htp = \"rmt\";\n            }\n        }\n        //\n        return this.#dataHandler?.get(htp)?.$hnd?.(cmd, t, ...args);\n    }\n    //\n    /*@__MANGLE_PROP__*/ $get(uuid) { return this.#dataHandler.get(\"loc\")?.$get?.(uuid); }\n    ;\n}\n//\nexport const wrapMeta = (meta, handler = null) => {\n    if (!(typeof meta == \"object\" || typeof meta == \"function\"))\n        return meta;\n    //\n    const wrap = (!meta?.[ORG.data]) ? (new Proxy(MakeReference(meta), new ObjectProxy(handler || new UniversalHandler()))) : meta;\n    doOnlyAfterResolve(meta, ($m) => {\n        if ($m) {\n            doOnlyAfterResolve(wrap, (w) => {\n                if (w != null && (typeof w == \"object\" || typeof w == \"function\")) {\n                    const organic = (wrapWeakMap.get(w) ?? w);\n                    const pt = organic?.[ORG.data] ?? organic;\n                    if (pt?.[ORG.uuid] || pt?.[ORG.type]) {\n                        wrapWeakMap.set(w, pt);\n                    }\n                    ;\n                }\n            });\n        }\n        ;\n    });\n    return wrap;\n};\n//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiVW5pdmVyc2FsSGFuZGxlci5qcyIsInNvdXJjZVJvb3QiOiIiLCJzb3VyY2VzIjpbIlVuaXZlcnNhbEhhbmRsZXIudHMiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IkFBQUEsd0NBQXdDO0FBQ3hDLE9BQU8sV0FBVyxNQUFNLDZCQUE2QixDQUFDO0FBRXRELEVBQUU7QUFDRixPQUFPLEVBQVksY0FBYyxFQUFFLFNBQVMsRUFBRSxRQUFRLEVBQUUsa0JBQWtCLEVBQUUsU0FBUyxFQUFjLE1BQU0saUJBQWlCLENBQUM7QUFFM0gsT0FBTyxFQUFFLE9BQU8sRUFBRSxhQUFhLEVBQUUsV0FBVyxFQUFFLE1BQU0sMEJBQTBCLENBQUM7QUFDL0UsT0FBTyxFQUFFLEdBQUcsRUFBUyxNQUFNLHNCQUFzQixDQUFDO0FBRWxELEVBQUU7QUFDRixPQUFPLFdBQVcsTUFBTSxlQUFlLENBQUM7QUFFeEMsRUFBRTtBQUNGLE1BQU0sQ0FBQyxPQUFPLE9BQU8sZ0JBQWlCLFNBQVEsV0FBVztJQUNyRCxZQUFZLENBQTJCO0lBRXZDLEVBQUU7SUFDRixZQUFZLGNBQXdDLElBQUksR0FBRyxFQUF1QjtRQUM5RSxLQUFLLEVBQUUsQ0FBQztRQUNSLElBQUksQ0FBQyxZQUFZLEdBQUcsV0FBVyxDQUFDO0lBQ3BDLENBQUM7SUFFRCxFQUFFO0lBQ0YsSUFBSSxvQkFBb0IsQ0FBQyxJQUFJLEtBQUssT0FBTyxJQUFJLENBQUMsWUFBWSxFQUFFLEdBQUcsRUFBRSxDQUFDLEtBQUssQ0FBQyxFQUFFLElBQUksQ0FBQyxDQUFDLENBQUM7SUFFakYsRUFBRTtJQUNGLG9CQUFvQixDQUFDLEtBQUssQ0FBQyxDQUEwQjtRQUNqRCxPQUFRLENBQVMsRUFBRSxDQUFDLEdBQUcsQ0FBQyxJQUFJLENBQUMsSUFBSSxDQUFDLENBQUM7SUFDdkMsQ0FBQztJQUVELEVBQUU7SUFDRixvQkFBb0IsQ0FBQyxXQUFXLENBQUMsSUFBWSxFQUFFLE9BQW9CLElBQUksSUFBSSxDQUFDLFlBQVksQ0FBQyxHQUFHLENB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QUFFLEVBQUUsQ0FBQyxDQUFDO29CQUFDLENBQUM7b0JBQUEsQ0FBQztnQkFDcEUsQ0FBQztZQUNMLENBQUMsQ0FBQyxDQUFDO1FBQUMsQ0FBQztRQUFBLENBQUM7SUFDVixDQUFDLENBQUMsQ0FBQztJQUNILE9BQU8sSUFBSSxDQUFDO0FBQ2hCLENBQUMsQ0FBQSIsInNvdXJjZXNDb250ZW50IjpbIi8vIGRlbm8tbGludC1pZ25vcmUtZmlsZSBuby1leHBsaWNpdC1hbnlcclxuaW1wb3J0IE9iamVjdFByb3h5IGZyb20gXCIuLi8uLi9JbnRlcmZhY2UvT2JqZWN0UHJveHlcIjtcclxuXHJcbi8vXHJcbmltcG9ydCB7IE1Qcm9taXNlLCBGT1JCSURERU5fS0VZUywgTUVUQV9LRVlTLCBpc1N5bWJvbCwgZG9Pbmx5QWZ0ZXJSZXNvbHZlLCBpc1Byb21pc2UsIHR5cGUgSVdyYXAgfSBmcm9tIFwiLi4vVXRpbHMvVXNlZnVsXCI7XHJcbmltcG9ydCBSZW1vdGVSZWZlcmVuY2VIYW5kbGVyIGZyb20gXCIuL1JlbW90ZUhhbmRsZXJcIjtcclxuaW1wb3J0IHsgZXh0cmFjdCwgTWFrZVJlZmVyZW5jZSwgd3JhcFdlYWtNYXAgfSBmcm9tIFwiLi4vVXRpbHMvSW5zdHJ1Y3Rpb25UeXBlXCI7XHJcbmltcG9ydCB7IE9SRywgSU1ldGEgfSBmcm9tIFwiLi4vVXRpbHMvT3JnYW5pY1R5cGVcIjtcclxuXHJcbi8vXHJcbmltcG9ydCBEYXRhSGFuZGxlciBmcm9tIFwiLi9EYXRhSGFuZGxlclwiO1xyXG5cclxuLy9cclxuZXhwb3J0IGRlZmF1bHQgY2xhc3MgVW5pdmVyc2FsSGFuZGxlciBleHRlbmRzIERhdGFIYW5kbGVyIHtcclxuICAgICNkYXRhSGFuZGxlcjogTWFwPHN0cmluZywgRGF0YUhhbmRsZXI+O1xyXG5cclxuICAgIC8vXHJcbiAgICBjb25zdHJ1Y3RvcihkYXRhSGFuZGxlcjogTWFwPHN0cmluZywgRGF0YUhhbmRsZXI+ID0gbmV3IE1hcDxzdHJpbmcsIERhdGFIYW5kbGVyPigpKSB7XHJcbiAgICAgICAgc3VwZXIoKTtcclxuICAgICAgICB0aGlzLiNkYXRhSGFuZGxlciA9IGRhdGFIYW5kbGVyO1xyXG4gICAgfVxyXG5cclxuICAgIC8vXHJcbiAgICBnZXQgLypAX19NQU5HTEVfUFJPUF9fKi8gJGV4YygpIHsgcmV0dXJuIHRoaXMuI2RhdGFIYW5kbGVyPy5nZXQ/LihcInJtdFwiKT8uJGV4YzsgfVxyXG5cclxuICAgIC8vXHJcbiAgICAvKkBfX01BTkdMRV9QUk9QX18qLyAkZGF0YSh0OiB1bmtub3duIHwgc3RyaW5nIHwgbnVsbCk6IHVua25vd24ge1xyXG4gICAgICAgIHJldHVybiAodCBhcyBhbnkpPy5bT1JHLmRhdGFdID8/IHQ7XHJcbiAgICB9XHJcblxyXG4gICAgLy9cclxuICAgIC8qQF9fTUFOR0xFX1BST1BfXyovICRhZGRIYW5kbGVyKG5hbWU6IHN0cmluZywgaGFuZGxlcjogRGF0YUhhbmRsZXIpIHsgdGhpcy4jZGF0YUhhbmRsZXIuc2V0KG5hbWUsIGhhbmRsZXIpOyB9XHJcbiAgICAvKkBfX01BTkdMRV9QUk9QX18qLyAkZ2V0SGFuZGxlcihuYW1lOiBzdHJpbmcpIHsgcmV0dXJuIHRoaXMuI2RhdGFIYW5kbGVyLmdldChuYW1lKTsgfVxyXG5cclxuICAgIC8vXHJcbiAgICAvKkBfX01BTkdMRV9QUk9QX18qLyAkaG5kKGNtZCA9IFwiYWNjZXNzXCIsIHQ6IGFueSwgLi4uYXJnczogdW5rbm93bltdKSB7XHJcbiAgICAgICAgY29uc3QgZGF0YTogYW55ID0gdGhpcy4kZGF0YSh0KTtcclxuXHJcbiAgICAgICAgLy8gaXNuJ3QgcHJvbWlzZSBpdHNlbGZcclxuICAgICAgICBpZiAoY21kID09IFwiZ2V0XCIpIHtcclxuICAgICAgICAgICAgaWYgKGFyZ3NbMF0gPT0gT1JHLmRhdGEpIHsgcmV0dXJuIGRhdGE7IH07XHJcbiAgICAgICAgICAgIGlmIChhcmdzWzBdID09IE9SRy5leGMpIHsgcmV0dXJuIHRoaXMuJGV4YyA/PyBkYXRhPy5bT1JHLmV4Y10gPz8gZGF0YT8udGhlbj8uKChlOiBhbnkpPT5lPy5bT1JHLmV4Y10pID8/IG51bGw7IH07XHJcbiAgICAgICAgICAgIGlmICggLy8gZm9yYmlkZGVuIGFjdGlvbnNcclxuICAgICAgICAgICAgICAgIGlzU3ltYm9sKGFyZ3M/LlswXSkgfHxcclxuICAgICAgICAgICAgICAgIEZPUkJJRERFTl9LRVlTLmhhcyhhcmdzPy5bMF0gYXMgc3RyaW5nKSB8fCBcclxuICAgICAgICAgICAgICAgIE1FVEFfS0VZUy5oYXM/LihhcmdzPy5bMF0gYXMgYW55KVxyXG4gICAgICAgICAgICApIHsgcmV0dXJuIG51bGw7IH07XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICAvL1xyXG4gICAgICAgIGxldCBodHAgPSBcImRpclwiO1xyXG4gICAgICAgIGlmIChpc1Byb21pc2UoZGF0YSkpIFxyXG4gICAgICAgICAgICB7IGh0cCA9IFwicG1zXCI7IH0gZWxzZVxyXG4gICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICBjb25zdCBtZXRhID0gKGV4dHJhY3QodCkgYXMgSU1ldGEpLCBsb2NhbCA9IHRoaXMuJGdldChtZXRhKTtcclxuICAgICAgICAgICAgICAgIGNvbnN0IG92ZXJsYXAgPSAoZXh0cmFjdChsb2NhbCkgYXMgYW55KT8uW09SRy51dWlkXSA9PSAobWV0YSBhcyBhbnkpPy5bT1JHLnV1aWRdO1xyXG5cclxuICAgICAgICAgICAgICAgIC8vXHJcbiAgICAgICAgICAgICAgICBpZiAodHlwZW9mIChtZXRhIGFzIGFueSk/LltPUkcudHlwZV0gPT0gXCJzdHJpbmdcIikgeyBodHAgPSBcImxvY1wiOyB9XHJcbiAgICAgICAgICAgICAgICBpZiAodHlwZW9mIChtZXRhIGFzIGFueSk/LltPUkcudXVpZF0gPT0gXCJzdHJpbmdcIiAmJiAoIWxvY2FsIHx8IG92ZXJsYXApKSB7IGh0cCA9IFwicm10XCI7IH1cclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAvL1xyXG4gICAgICAgIHJldHVybiB0aGlzLiNkYXRhSGFuZGxlcj8uZ2V0KGh0cCk/LiRobmQ/LihjbWQsIHQsIC4uLmFyZ3MpO1xyXG4gICAgfVxyXG5cclxuICAgIC8vXHJcbiAgICAvKkBfX01BTkdMRV9QUk9QX18qLyAkZ2V0KHV1aWQ6IHVua25vd258c3RyaW5nfG51bGwpIHsgcmV0dXJuIHRoaXMuI2RhdGFIYW5kbGVyLmdldChcImxvY1wiKT8uJGdldD8uKHV1aWQpOyB9O1xyXG59XHJcblxyXG4vL1xyXG5leHBvcnQgY29uc3Qgd3JhcE1ldGEgPSA8VCBleHRlbmRzIElNZXRhfHVua25vd24+KG1ldGE6IE1Qcm9taXNlPFQ+fElXcmFwPFQ+fG51bGwsIGhhbmRsZXI6IFVuaXZlcnNhbEhhbmRsZXIgfCBEYXRhSGFuZGxlciB8IFJlbW90ZVJlZmVyZW5jZUhhbmRsZXIgfCBudWxsID0gbnVsbCk9PntcclxuICAgIGlmICghKHR5cGVvZiBtZXRhID09IFwib2JqZWN0XCIgfHwgdHlwZW9mIG1ldGEgPT0gXCJmdW5jdGlvblwiKSkgcmV0dXJuIG1ldGE7XHJcblxyXG4gICAgLy9cclxuICAgIGNvbnN0IHdyYXAgPSAoIShtZXRhIGFzIGFueSk/LltPUkcuZGF0YV0pID8gKG5ldyBQcm94eShNYWtlUmVmZXJlbmNlKG1ldGEpLCBuZXcgT2JqZWN0UHJveHkoaGFuZGxlciB8fCBuZXcgVW5pdmVyc2FsSGFuZGxlcigpKSkpIDogbWV0YTtcclxuICAgIGRvT25seUFmdGVyUmVzb2x2ZTxJTWV0YT4obWV0YSBhcyBNUHJvbWlzZTxJTWV0YT4sICgkbTogSU1ldGEpID0+IHtcclxuICAgICAgICBpZiAoJG0pIHsgZG9Pbmx5QWZ0ZXJSZXNvbHZlKHdyYXAsICh3KT0+e1xyXG4gICAgICAgICAgICBpZiAodyAhPSBudWxsICYmICh0eXBlb2YgdyA9PSBcIm9iamVjdFwiIHx8IHR5cGVvZiB3ID09IFwiZnVuY3Rpb25cIikpIHtcclxuICAgICAgICAgICAgICAgIGNvbnN0IG9yZ2FuaWMgPSAod3JhcFdlYWtNYXAuZ2V0KHcpID8/IHcpIGFzIGFueTtcclxuICAgICAgICAgICAgICAgIGNvbnN0IHB0ID0gb3JnYW5pYz8uW09SRy5kYXRhXSA/PyBvcmdhbmljO1xyXG4gICAgICAgICAgICAgICAgaWYgKHB0Py5bT1JHLnV1aWRdfHxwdD8uW09SRy50eXBlXSkgeyB3cmFwV2Vha01hcC5zZXQodywgcHQpOyB9O1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfSk7IH07XHJcbiAgICB9KTtcclxuICAgIHJldHVybiB3cmFwO1xyXG59XHJcbiJdfQ==","// deno-lint-ignore-file no-explicit-any\n// Will be used when result are predictable in the pools or return results\nimport UUIDMap from \"../Utils/UUIDMap\";\nimport TypeDetector from \"./TypeDetector\";\nimport UniversalHandler from \"../Handlers/UniversalHandler\";\nimport { isPromise, doOnlyAfterResolve } from \"../Utils/Useful\";\nimport { extract } from \"../Utils/InstructionType\";\nimport { wrapMeta } from \"../Handlers/UniversalHandler\";\nimport ORG from \"../Utils/OrganicType\";\nimport { PMS, TS } from \"../Utils/Alias\";\n/*@__MANGLE_PROP__*/ /*@__PURE__*/\nexport const hasMemoryBuffer = (target) => {\n    // shared array buffer are not transfer, it's sharing\n    return (target?.buffer instanceof ArrayBuffer) || (typeof SharedArrayBuffer != TS.udf && target?.buffer instanceof SharedArrayBuffer);\n};\n/*@__MANGLE_PROP__*/ /*@__PURE__*/\nexport default class PreCoding {\n    /*@__MANGLE_PROP__*/ $encoder = new Map();\n    /*@__MANGLE_PROP__*/ $decoder = new Map();\n    /*@__MANGLE_PROP__*/ $mp = new UUIDMap();\n    /*@__MANGLE_PROP__*/ $hndr = new UniversalHandler();\n    /*@__MANGLE_PROP__*/ $typeDetector = new TypeDetector();\n    //\n    constructor(memoryPool = new UUIDMap()) {\n        /*@__MANGLE_PROP__*/\n        this.$mp = memoryPool;\n        /*@__MANGLE_PROP__*/\n        this.$encoder = new Map([\n            [\"a\", (organic, target, transfer = []) => {\n                    if (!organic) {\n                        const encoded = Array.from(target || []).map((e) => this.encode(e, transfer));\n                        return encoded.some(isPromise) ? PMS.all(encoded) : encoded;\n                    }\n                    return target;\n                }],\n            //\n            [\"tf\", (organic, target, transfer = []) => {\n                    if (!organic) {\n                        // non-organic just to transfer\n                        if (transfer?.indexOf?.(target) < 0 && target != null) {\n                            const uuid = (this.$mp.get(target) || \"\");\n                            this.$mp.delete(target);\n                            // if is typed arrays, they also can be transferred by their buffers\n                            // do not transfer shared buffers, but we not detecting as transfer initially\n                            const toTransfer = hasMemoryBuffer(target) ? (target?.buffer ?? target) : target;\n                            if (toTransfer != null) {\n                                transfer?.push?.(toTransfer);\n                            }\n                            ;\n                            // for those who will ask where is original\n                            if (uuid) {\n                                //const meta = {[ORG.type]: \"reference\", [ORG.uuid]: uuid} as IMeta;\n                                // @ts-ignore \"\"\n                                //meta[ORG.uuid] = this.$mp.add(wrapMeta(meta, this.$hndr) as object, meta[ORG.uuid] = uuid, true);\n                                // export as organic transfer\n                                return {\n                                    [ORG.type]: \"tf\",\n                                    [ORG.uuid]: uuid,\n                                    [ORG.node]: toTransfer\n                                };\n                            }\n                        }\n                        ;\n                    }\n                    else {\n                        // transfers only when is exists\n                        const org = (extract(target) || {});\n                        const node = org?.[ORG.node] ?? this?.$mp?.get(org?.[ORG.uuid]);\n                        // if exists\n                        if (node != null) {\n                            // sometimes, `@uuid` may already known in database\n                            const uuid = (org?.[ORG.uuid] || this?.$mp?.get?.(node) || \"\");\n                            const meta = {\n                                [ORG.type]: \"tf\",\n                                [ORG.uuid]: uuid,\n                                [ORG.node]: node\n                            };\n                            // add to transfer list (do not transfer shared buffers)\n                            // but if transferred to another external worker, should be here an reference\n                            if (node != null && transfer?.indexOf?.(node) < 0) {\n                                this.$mp.delete(node);\n                                transfer?.push?.(hasMemoryBuffer(node) ? (node?.buffer ?? node) : node);\n                            }\n                            // doesn't holding it anymore\n                            if (org != null && uuid) {\n                                // @ts-ignore \"\"\n                                org[ORG.type] = \"ref\";\n                                // @ts-ignore \"\"\n                                org[ORG.node] = null;\n                                // @ts-ignore \"for who will asking where was transferred\"\n                                //org[ORG.uuid] = this.$mp.add(wrapMeta(org, this.$hndr), org[ORG.uuid] = uuid, true) as string;\n                            }\n                            ;\n                            //\n                            return meta;\n                        }\n                        //\n                        return org;\n                    }\n                    // return as regular\n                    return target;\n                }],\n            //\n            [\"ref\", (organic, target, _transfer = []) => {\n                    if (!organic || target?.[ORG.data]) {\n                        const ext = extract(target)?.[ORG.uuid];\n                        const exists = this?.$mp?.get(ext) ?? target;\n                        const meta = {\n                            [ORG.type]: \"ref\",\n                            [ORG.uuid]: this.$mp.add(exists, ext, !organic)\n                        };\n                        return meta;\n                    }\n                    return target;\n                }]\n        ]);\n        /*@__MANGLE_PROP__*/\n        this.$decoder = new Map([\n            [\"a\", (organic, target, transfer = []) => {\n                    if (!organic) {\n                        const decoded = Array.from(target).map((e) => this.decode(e, transfer));\n                        return decoded.some(isPromise) ? PMS.all(decoded) : decoded;\n                    }\n                    // unusual\n                    return target;\n                }],\n            //\n            [\"tf\", (organic, target, _transfer = []) => {\n                    if (organic) {\n                        // reformat transfer type, add to registry\n                        const org = extract(target);\n                        const node = (org?.[ORG.node]) ?? this?.$mp?.get(org?.[ORG.uuid]);\n                        // unable to override exists\n                        if (node != null) {\n                            // @ts-ignore \"assign\"\n                            org[ORG.uuid] = this.$mp.add(node, org?.[ORG.uuid], organic);\n                            // @ts-ignore \"assign\"\n                            org[ORG.type] = \"ref\";\n                        }\n                        ;\n                        // but if transferred to another external worker, should be here an reference\n                        return node ?? wrapMeta(org, this.$hndr);\n                    }\n                    return target;\n                }],\n            //\n            [\"ref\", (organic, target, _transfer = []) => {\n                    if (organic) {\n                        const org = extract(target);\n                        const exists = this?.$mp?.get(org?.[ORG.uuid]);\n                        return exists ?? wrapMeta(org, this.$hndr);\n                    }\n                    // unusual\n                    return target;\n                }]\n        ]);\n    }\n    //\n    /*@__MANGLE_PROP__*/ $decode(target, transfer = []) {\n        const [o, t] = this.$typeDetector.detectType(target, transfer);\n        if (this.$decoder.has(t)) {\n            return this.$decoder.get(t)?.(o, target, transfer) ?? target;\n        }\n        return target;\n    }\n    //\n    /*@__MANGLE_PROP__*/ $encode(target, transfer = []) {\n        const [o, t] = this.$typeDetector.detectType(target, transfer);\n        if (this.$encoder.has(t)) {\n            return this.$encoder.get(t)?.(o, target, transfer) ?? target;\n        }\n        return target;\n    }\n    //\n    /*@__MANGLE_PROP__*/ decode(target, transfer = []) {\n        return doOnlyAfterResolve(target, (e) => this.$decode(e, transfer));\n    }\n    //\n    /*@__MANGLE_PROP__*/ encode(target, transfer = []) {\n        return doOnlyAfterResolve(target, (e) => this.$encode(e, transfer));\n    }\n}\n//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiUHJlQ29kaW5nLmpzIiwic291cmNlUm9vdCI6IiIsInNvdXJjZXMiOlsiUHJlQ29kaW5nLnRzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiJBQUFBLHdDQUF3QztBQUN4QywwRUFBMEU7QUFDMUUsT0FBTyxPQUFPLE1BQU0sa0JBQWtCLENBQUM7QUFDdkMsT0FBTyxZQUFZLE1BQU0sZ0JBQWdCLENBQUM7QUFDMUMsT0FBTyxnQkFBZ0IsTUFBTSw4QkFBOEIsQ0FBQztBQUM1RCxPQUFPLEVBQUUsU0FBUyxFQUFFLGtCQUFrQixFQUFFLE1BQU0saUJBQWlCLENBQUM7QUFDaEUsT0FBTyxFQUFFLE9BQU8sRUFBRSxNQUFNLDBCQUEwQixDQUFDO0FBQ25ELE9BQU8sRUFBRSxRQUFRLEVBQUUsTUFBTSw4QkFBOEIsQ0FBQztBQUN4RCxPQUFPLEdBQUcsTUFBTSxzQkFBc0IsQ0FBQztBQUN2QyxPQUFPLEVBQUUsR0FBRyxFQUFFLEVBQUUsRUFBRSxNQUFNLGdCQUFnQixDQUFDO0FBRXpDLG9CQUFvQixDQUFDLGFBQWE7QUFDbEMsTUFBTSxDQUFDLE1BQU0sZUFBZSxHQUFHLENBQUMsTUFBVyxFQUFDLEVBQUU7SUFDMUMscURBQXFEO0lBQ3JELE9BQU8sQ0FBRSxNQUFjLEVBQUUsTUFBTSxZQUFZLFdBQVcsQ0FBQyxJQUFJLENBQUMsT0FBTyxpQkFBaUIsSUFBSSxFQUFFLENBQUMsR0FBRyxJQUFLLE1BQWMsRUFBRSxNQUFNLFlBQVksaUJBQWlCLENBQUMsQ0FBQztBQUM1SixDQUFDLENBQUE7QUFFRCxvQkFBb0IsQ0FBQyxhQUFhO0FBQ2xDLE1BQU0sQ0FBQyxPQUFPLE9BQU8sU0FBUztJQUMxQixvQkFBb0IsQ0FBQyxRQUFRLEdBQUcsSUFBSSxHQUFHLEVBQTZFLENBQUM7SUFDckgsb0JBQW9CLENBQUMsUUFBUSxHQUFHLElBQUksR0FBRyxFQUE2RSxDQUFDO0lBQ3JILG9CQUFvQixDQUFDLEdBQUcsR0FBRyxJQUFJLE9BQU8sRUFBRSxDQUFDO0lBQ3pDLG9CQUFvQixD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QU0sQ0FBQyxDQUFDLEVBQUUsQ0FBQyxDQUFDLEdBQUcsSUFBSSxDQUFDLGFBQWEsQ0FBQyxVQUFVLENBQUMsTUFBTSxFQUFFLFFBQVEsQ0FBQyxDQUFDO1FBQy9ELElBQUksSUFBSSxDQUFDLFFBQVEsQ0FBQyxHQUFHLENBQUMsQ0FBQyxDQUFDLEVBQUUsQ0FBQztZQUN2QixPQUFPLElBQUksQ0FBQyxRQUFRLENBQUMsR0FBRyxDQUFDLENBQUMsQ0FBQyxFQUFFLENBQUMsQ0FBQyxFQUFFLE1BQU0sRUFBRSxRQUFRLENBQUMsSUFBSSxNQUFNLENBQUM7UUFDakUsQ0FBQztRQUNELE9BQU8sTUFBTSxDQUFDO0lBQ2xCLENBQUM7SUFJRCxFQUFFO0lBQ0Ysb0JBQW9CLENBQUMsTUFBTSxDQUFDLE1BQWdDLEVBQUUsV0FBc0IsRUFBRTtRQUNsRixPQUFPLGtCQUFrQixDQUFDLE1BQU0sRUFBRSxDQUFDLENBQUMsRUFBQyxFQUFFLENBQUEsSUFBSSxDQUFDLE9BQU8sQ0FBQyxDQUFDLEVBQUUsUUFBUSxDQUFDLENBQUMsQ0FBQztJQUN0RSxDQUFDO0lBRUQsRUFBRTtJQUNGLG9CQUFvQixDQUFDLE1BQU0sQ0FBQyxNQUFnQyxFQUFFLFdBQXNCLEVBQUU7UUFDbEYsT0FBTyxrQkFBa0IsQ0FBQyxNQUFNLEVBQUUsQ0FBQyxDQUFDLEVBQUMsRUFBRSxDQUFBLElBQUksQ0FBQyxPQUFPLENBQUMsQ0FBQyxFQUFFLFFBQVEsQ0FBQyxDQUFDLENBQUM7SUFDdEUsQ0FBQztDQUNKIiwic291cmNlc0NvbnRlbnQiOlsiLy8gZGVuby1saW50LWlnbm9yZS1maWxlIG5vLWV4cGxpY2l0LWFueVxyXG4vLyBXaWxsIGJlIHVzZWQgd2hlbiByZXN1bHQgYXJlIHByZWRpY3RhYmxlIGluIHRoZSBwb29scyBvciByZXR1cm4gcmVzdWx0c1xyXG5pbXBvcnQgVVVJRE1hcCBmcm9tIFwiLi4vVXRpbHMvVVVJRE1hcFwiO1xyXG5pbXBvcnQgVHlwZURldGVjdG9yIGZyb20gXCIuL1R5cGVEZXRlY3RvclwiO1xyXG5pbXBvcnQgVW5pdmVyc2FsSGFuZGxlciBmcm9tIFwiLi4vSGFuZGxlcnMvVW5pdmVyc2FsSGFuZGxlclwiO1xyXG5pbXBvcnQgeyBpc1Byb21pc2UsIGRvT25seUFmdGVyUmVzb2x2ZSB9IGZyb20gXCIuLi9VdGlscy9Vc2VmdWxcIjtcclxuaW1wb3J0IHsgZXh0cmFjdCB9IGZyb20gXCIuLi9VdGlscy9JbnN0cnVjdGlvblR5cGVcIjtcclxuaW1wb3J0IHsgd3JhcE1ldGEgfSBmcm9tIFwiLi4vSGFuZGxlcnMvVW5pdmVyc2FsSGFuZGxlclwiO1xyXG5pbXBvcnQgT1JHIGZyb20gXCIuLi9VdGlscy9PcmdhbmljVHlwZVwiO1xyXG5pbXBvcnQgeyBQTVMsIFRTIH0gZnJvbSBcIi4uL1V0aWxzL0FsaWFzXCI7XHJcblxyXG4vKkBfX01BTkdMRV9QUk9QX18qLyAvKkBfX1BVUkVfXyovIFxyXG5leHBvcnQgY29uc3QgaGFzTWVtb3J5QnVmZmVyID0gKHRhcmdldDogYW55KT0+e1xyXG4gICAgLy8gc2hhcmVkIGFycmF5IGJ1ZmZlciBhcmUgbm90IHRyYW5zZmVyLCBpdCdzIHNoYXJpbmdcclxuICAgIHJldHVybiAoKHRhcmdldCBhcyBhbnkpPy5idWZmZXIgaW5zdGFuY2VvZiBBcnJheUJ1ZmZlcikgfHwgKHR5cGVvZiBTaGFyZWRBcnJheUJ1ZmZlciAhPSBUUy51ZGYgJiYgKHRhcmdldCBhcyBhbnkpPy5idWZmZXIgaW5zdGFuY2VvZiBTaGFyZWRBcnJheUJ1ZmZlcik7XHJcbn1cclxuXHJcbi8qQF9fTUFOR0xFX1BST1BfXyovIC8qQF9fUFVSRV9fKi8gXHJcbmV4cG9ydCBkZWZhdWx0IGNsYXNzIFByZUNvZGluZyB7XHJcbiAgICAvKkBfX01BTkdMRV9QUk9QX18qLyAkZW5jb2RlciA9IG5ldyBNYXA8c3RyaW5nLCAob3JnYW5pYzogYm9vbGVhbiwgdGFyZ2V0OiB1bmtub3duLCB0cmFuc2ZlcjogdW5rbm93bltdKT0+dW5rbm93bj4oKTtcclxuICAgIC8qQF9fTUFOR0xFX1BST1BfXyovICRkZWNvZGVyID0gbmV3IE1hcDxzdHJpbmcsIChvcmdhbmljOiBib29sZWFuLCB0YXJnZXQ6IHVua25vd24sIHRyYW5zZmVyOiB1bmtub3duW10pPT51bmtub3duPigpO1xyXG4gICAgLypAX19NQU5HTEVfUFJPUF9fKi8gJG1wID0gbmV3IFVVSURNYXAoKTtcclxuICAgIC8qQF9fTUFOR0xFX1BST1BfXyovICRobmRyID0gbmV3IFVuaXZlcnNhbEhhbmRsZXIoKTtcclxuICAgIC8qQF9fTUFOR0xFX1BST1BfXyovICR0eXBlRGV0ZWN0b3IgPSBuZXcgVHlwZURldGVjdG9yKCk7XHJcblxyXG4gICAgLy9cclxuICAgIGNvbnN0cnVjdG9yKG1lbW9yeVBvb2wgPSBuZXcgVVVJRE1hcCgpKSB7XHJcbiAgICAgICAgLypAX19NQU5HTEVfUFJPUF9fKi8gXHJcbiAgICAgICAgdGhpcy4kbXAgPSBtZW1vcnlQb29sO1xyXG5cclxuICAgICAgICAvKkBfX01BTkdMRV9QUk9QX18qLyBcclxuICAgICAgICB0aGlzLiRlbmNvZGVyID0gbmV3IE1hcDxzdHJpbmcsIChvcmdhbmljOiBib29sZWFuLCB0YXJnZXQ6IHVua25vd24sIHRyYW5zZmVyOiB1bmtub3duW10pPT51bmtub3duPiAoW1xyXG4gICAgICAgICAgICBbXCJhXCIsIChvcmdhbmljOiBib29sZWFuLCB0YXJnZXQ6IHVua25vd24sIHRyYW5zZmVyOiB1bmtub3duW10gPSBbXSk9PntcclxuICAgICAgICAgICAgICAgIGlmICghb3JnYW5pYykge1xyXG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IGVuY29kZWQgPSBBcnJheS5mcm9tKCh0YXJnZXQgYXMgW10pIHx8W10pLm1hcCgoZSk9PnRoaXMuZW5jb2RlKGUsIHRyYW5zZmVyKSk7XHJcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGVuY29kZWQuc29tZShpc1Byb21pc2UpID8gUE1TLmFsbChlbmNvZGVkKSA6IGVuY29kZWQ7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gdGFyZ2V0O1xyXG4gICAgICAgICAgICB9XSxcclxuXHJcbiAgICAgICAgICAgIC8vXHJcbiAgICAgICAgICAgIFtcInRmXCIsIChvcmdhbmljOiBib29sZWFuLCB0YXJnZXQ6IHVua25vd24sIHRyYW5zZmVyOiB1bmtub3duW10gPSBbXSk9PntcclxuICAgICAgICAgICAgICAgIGlmICghb3JnYW5pYykge1xyXG4gICAgICAgICAgICAgICAgICAgIC8vIG5vbi1vcmdhbmljIGp1c3QgdG8gdHJhbnNmZXJcclxuICAgICAgICAgICAgICAgICAgICBpZiAodHJhbnNmZXI/LmluZGV4T2Y/Lih0YXJnZXQpIDwgMCAmJiB0YXJnZXQgIT0gbnVsbCkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBjb25zdCB1dWlkOiBzdHJpbmcgPSAodGhpcy4kbXAuZ2V0KHRhcmdldCkgfHwgXCJcIikgYXMgc3RyaW5nO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLiRtcC5kZWxldGUodGFyZ2V0KTtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIC8vIGlmIGlzIHR5cGVkIGFycmF5cywgdGhleSBhbHNvIGNhbiBiZSB0cmFuc2ZlcnJlZCBieSB0aGVpciBidWZmZXJzXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIC8vIGRvIG5vdCB0cmFuc2ZlciBzaGFyZWQgYnVmZmVycywgYnV0IHdlIG5vdCBkZXRlY3RpbmcgYXMgdHJhbnNmZXIgaW5pdGlhbGx5XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IHRvVHJhbnNmZXIgPSBoYXNNZW1vcnlCdWZmZXIodGFyZ2V0KSA/ICgodGFyZ2V0IGFzIGFueSk/LmJ1ZmZlciA/PyB0YXJnZXQpIDogdGFyZ2V0O1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAodG9UcmFuc2ZlciAhPSBudWxsKSB7IHRyYW5zZmVyPy5wdXNoPy4odG9UcmFuc2Zlcik7IH07XHJcblxyXG4gICAgICAgICAgICAgICAgICAgICAgICAvLyBmb3IgdGhvc2Ugd2hvIHdpbGwgYXNrIHdoZXJlIGlzIG9yaWdpbmFsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmICh1dWlkKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAvL2NvbnN0IG1ldGEgPSB7W09SRy50eXBlXTogXCJyZWZlcmVuY2VcIiwgW09SRy51dWlkXTogdXVpZH0gYXMgSU1ldGE7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBAdHMtaWdub3JlIFwiXCJcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vbWV0YVtPUkcudXVpZF0gPSB0aGlzLiRtcC5hZGQod3JhcE1ldGEobWV0YSwgdGhpcy4kaG5kcikgYXMgb2JqZWN0LCBtZXRhW09SRy51dWlkXSA9IHV1aWQsIHRydWUpO1xyXG5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIGV4cG9ydCBhcyBvcmdhbmljIHRyYW5zZmVyXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4ge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIFtPUkcudHlwZV06IFwidGZcIixcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBbT1JHLnV1aWRdOiB1dWlkLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIFtPUkcubm9kZV06IHRvVHJhbnNmZXJcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgIH07XHJcbiAgICAgICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgICAgIC8vIHRyYW5zZmVycyBvbmx5IHdoZW4gaXMgZXhpc3RzXHJcbiAgICAgICAgICAgICAgICAgICAgY29uc3Qgb3JnICA9IChleHRyYWN0KHRhcmdldCkgfHwge30pIGFzIGFueTtcclxuICAgICAgICAgICAgICAgICAgICBjb25zdCBub2RlID0gKG9yZyBhcyBhbnkpPy5bT1JHLm5vZGVdID8/IHRoaXM/LiRtcD8uZ2V0KChvcmcgYXMgYW55KT8uW09SRy51dWlkXSBhcyBzdHJpbmcpO1xyXG5cclxuICAgICAgICAgICAgICAgICAgICAvLyBpZiBleGlzdHNcclxuICAgICAgICAgICAgICAgICAgICBpZiAobm9kZSAhPSBudWxsKSB7XHJcblxyXG4gICAgICAgICAgICAgICAgICAgICAgICAvLyBzb21ldGltZXMsIGBAdXVpZGAgbWF5IGFscmVhZHkga25vd24gaW4gZGF0YWJhc2VcclxuICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgdXVpZDogc3RyaW5nID0gKChvcmcgYXMgYW55KT8uW09SRy51dWlkXXx8dGhpcz8uJG1wPy5nZXQ/Lihub2RlKXx8XCJcIikgYXMgc3RyaW5nO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBjb25zdCBtZXRhID0geyAvLyByZXF1ZXN0IHRvIHRyYW5zZmVyIG5vZGVcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIFtPUkcudHlwZV06IFwidGZcIixcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIFtPUkcudXVpZF06IHV1aWQsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBbT1JHLm5vZGVdOiBub2RlXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIC8vIGFkZCB0byB0cmFuc2ZlciBsaXN0IChkbyBub3QgdHJhbnNmZXIgc2hhcmVkIGJ1ZmZlcnMpXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIC8vIGJ1dCBpZiB0cmFuc2ZlcnJlZCB0byBhbm90aGVyIGV4dGVybmFsIHdvcmtlciwgc2hvdWxkIGJlIGhlcmUgYW4gcmVmZXJlbmNlXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChub2RlICE9IG51bGwgJiYgdHJhbnNmZXI/LmluZGV4T2Y/Lihub2RlKSA8IDApIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuJG1wLmRlbGV0ZShub2RlKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRyYW5zZmVyPy5wdXNoPy4oaGFzTWVtb3J5QnVmZmVyKG5vZGUpID8gKChub2RlIGFzIGFueSk/LmJ1ZmZlciA/PyBub2RlKSA6IG5vZGUpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAgICAgICAgICAgICAvLyBkb2Vzbid0IGhvbGRpbmcgaXQgYW55bW9yZVxyXG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAob3JnICE9IG51bGwgJiYgdXVpZCkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gQHRzLWlnbm9yZSBcIlwiXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBvcmdbT1JHLnR5cGVdID0gXCJyZWZcIjtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIEB0cy1pZ25vcmUgXCJcIlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgb3JnW09SRy5ub2RlXSA9IG51bGw7XHJcblxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gQHRzLWlnbm9yZSBcImZvciB3aG8gd2lsbCBhc2tpbmcgd2hlcmUgd2FzIHRyYW5zZmVycmVkXCJcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vb3JnW09SRy51dWlkXSA9IHRoaXMuJG1wLmFkZCh3cmFwTWV0YShvcmcsIHRoaXMuJGhuZHIpLCBvcmdbT1JHLnV1aWRdID0gdXVpZCwgdHJ1ZSkgYXMgc3RyaW5nO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB9O1xyXG5cclxuICAgICAgICAgICAgICAgICAgICAgICAgLy9cclxuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIG1ldGE7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgICAgICAgICAvL1xyXG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBvcmc7XHJcbiAgICAgICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAgICAgLy8gcmV0dXJuIGFzIHJlZ3VsYXJcclxuICAgICAgICAgICAgICAgIHJldHVybiB0YXJnZXQ7XHJcbiAgICAgICAgICAgIH1dLFxyXG5cclxuICAgICAgICAgICAgLy9cclxuICAgICAgICAgICAgW1wicmVmXCIsIChvcmdhbmljOiBib29sZWFuLCB0YXJnZXQ6IHVua25vd24sIF90cmFuc2ZlcjogdW5rbm93bltdID0gW10pPT57XHJcbiAgICAgICAgICAgICAgICBpZiAoIW9yZ2FuaWMgfHwgKHRhcmdldCBhcyBhbnkpPy5bT1JHLmRhdGFdKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgY29uc3QgZXh0ID0gKGV4dHJhY3QodGFyZ2V0KSBhcyBhbnkpPy5bT1JHLnV1aWRdIGFzIHN0cmluZztcclxuICAgICAgICAgICAgICAgICAgICBjb25zdCBleGlzdHMgPSB0aGlzPy4kbXA/LmdldChleHQpID8/IHRhcmdldDtcclxuICAgICAgICAgICAgICAgICAgICBjb25zdCBtZXRhID0ge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBbT1JHLnR5cGVdOiBcInJlZlwiLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICBbT1JHLnV1aWRdOiB0aGlzLiRtcC5hZGQoZXhpc3RzIGFzIGFueSwgZXh0LCAhb3JnYW5pYylcclxuICAgICAgICAgICAgICAgICAgICB9O1xyXG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBtZXRhO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgcmV0dXJuIHRhcmdldDtcclxuICAgICAgICAgICAgfV1cclxuICAgICAgICBdKTtcclxuXHJcbiAgICAgICAgLypAX19NQU5HTEVfUFJPUF9fKi8gXHJcbiAgICAgICAgdGhpcy4kZGVjb2RlciA9IG5ldyBNYXA8c3RyaW5nLCAob3JnYW5pYzogYm9vbGVhbiwgdGFyZ2V0OiB1bmtub3duLCB0cmFuc2ZlcjogdW5rbm93bltdKT0+Ym9vbGVhbj4oW1xyXG4gICAgICAgICAgICBbXCJhXCIsIChvcmdhbmljOiBib29sZWFuLCB0YXJnZXQ6IHVua25vd24sIHRyYW5zZmVyOiB1bmtub3duW10gPSBbXSk9PntcclxuICAgICAgICAgICAgICAgIGlmICghb3JnYW5pYykge1xyXG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IGRlY29kZWQgPSBBcnJheS5mcm9tKHRhcmdldCBhcyBbXSkubWFwKChlKT0+dGhpcy5kZWNvZGUoZSwgdHJhbnNmZXIpKTtcclxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gZGVjb2RlZC5zb21lKGlzUHJvbWlzZSkgPyBQTVMuYWxsKGRlY29kZWQpIDogZGVjb2RlZDtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIC8vIHVudXN1YWxcclxuICAgICAgICAgICAgICAgIHJldHVybiB0YXJnZXQ7XHJcbiAgICAgICAgICAgIH1dLFxyXG5cclxuICAgICAgICAgICAgLy9cclxuICAgICAgICAgICAgW1widGZcIiwgKG9yZ2FuaWM6IGJvb2xlYW4sIHRhcmdldDogdW5rbm93biwgX3RyYW5zZmVyOiB1bmtub3duW10gPSBbXSk9PntcclxuICAgICAgICAgICAgICAgIGlmIChvcmdhbmljKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgLy8gcmVmb3JtYXQgdHJhbnNmZXIgdHlwZSwgYWRkIHRvIHJlZ2lzdHJ5XHJcbiAgICAgICAgICAgICAgICAgICAgY29uc3Qgb3JnICA9IGV4dHJhY3QodGFyZ2V0KSBhcyBhbnk7XHJcbiAgICAgICAgICAgICAgICAgICAgY29uc3Qgbm9kZSA9ICgob3JnIGFzIGFueSk/LltPUkcubm9kZV0pID8/IHRoaXM/LiRtcD8uZ2V0KChvcmcgYXMgYW55KT8uW09SRy51dWlkXSBhcyBzdHJpbmcpO1xyXG5cclxuICAgICAgICAgICAgICAgICAgICAvLyB1bmFibGUgdG8gb3ZlcnJpZGUgZXhpc3RzXHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKG5vZGUgIT0gbnVsbCkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAvLyBAdHMtaWdub3JlIFwiYXNzaWduXCJcclxuICAgICAgICAgICAgICAgICAgICAgICAgb3JnW09SRy51dWlkXSA9IHRoaXMuJG1wLmFkZChub2RlLCBvcmc/LltPUkcudXVpZF0gYXMgc3RyaW5nLCBvcmdhbmljKSBhcyBzdHJpbmc7XHJcblxyXG4gICAgICAgICAgICAgICAgICAgICAgICAvLyBAdHMtaWdub3JlIFwiYXNzaWduXCJcclxuICAgICAgICAgICAgICAgICAgICAgICAgb3JnW09SRy50eXBlXSA9IFwicmVmXCI7XHJcbiAgICAgICAgICAgICAgICAgICAgfTtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgLy8gYnV0IGlmIHRyYW5zZmVycmVkIHRvIGFub3RoZXIgZXh0ZXJuYWwgd29ya2VyLCBzaG91bGQgYmUgaGVyZSBhbiByZWZlcmVuY2VcclxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gbm9kZSA/PyB3cmFwTWV0YShvcmcsIHRoaXMuJGhuZHIpO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgcmV0dXJuIHRhcmdldDtcclxuICAgICAgICAgICAgfV0sXHJcblxyXG4gICAgICAgICAgICAvL1xyXG4gICAgICAgICAgICBbXCJyZWZcIiwgKG9yZ2FuaWM6IGJvb2xlYW4sIHRhcmdldDogdW5rbm93biwgX3RyYW5zZmVyOiB1bmtub3duW10gPSBbXSk9PntcclxuICAgICAgICAgICAgICAgIGlmIChvcmdhbmljKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgY29uc3Qgb3JnICAgID0gZXh0cmFjdCh0YXJnZXQpIGFzIGFueTtcclxuICAgICAgICAgICAgICAgICAgICBjb25zdCBleGlzdHMgPSB0aGlzPy4kbXA/LmdldCgob3JnIGFzIGFueSk/LltPUkcudXVpZF0gYXMgc3RyaW5nKTtcclxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gZXhpc3RzID8/IHdyYXBNZXRhKG9yZywgdGhpcy4kaG5kcik7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAvLyB1bnVzdWFsXHJcbiAgICAgICAgICAgICAgICByZXR1cm4gdGFyZ2V0O1xyXG4gICAgICAgICAgICB9XVxyXG4gICAgICAgIF0pO1xyXG4gICAgfVxyXG5cclxuICAgIC8vXHJcbiAgICAvKkBfX01BTkdMRV9QUk9QX18qLyAkZGVjb2RlKHRhcmdldDogdW5rbm93biwgdHJhbnNmZXI6IHVua25vd25bXSA9IFtdKSB7XHJcbiAgICAgICAgY29uc3QgW28sIHRdID0gdGhpcy4kdHlwZURldGVjdG9yLmRldGVjdFR5cGUodGFyZ2V0LCB0cmFuc2Zlcik7XHJcbiAgICAgICAgaWYgKHRoaXMuJGRlY29kZXIuaGFzKHQpKSB7XHJcbiAgICAgICAgICAgIHJldHVybiB0aGlzLiRkZWNvZGVyLmdldCh0KT8uKG8sIHRhcmdldCwgdHJhbnNmZXIpID8/IHRhcmdldDtcclxuICAgICAgICB9XHJcbiAgICAgICAgcmV0dXJuIHRhcmdldDtcclxuICAgIH1cclxuXHJcbiAgICAvL1xyXG4gICAgLypAX19NQU5HTEVfUFJPUF9fKi8gJGVuY29kZSh0YXJnZXQ6IHVua25vd24sIHRyYW5zZmVyOiB1bmtub3duW10gPSBbXSkge1xyXG4gICAgICAgIGNvbnN0IFtvLCB0XSA9IHRoaXMuJHR5cGVEZXRlY3Rvci5kZXRlY3RUeXBlKHRhcmdldCwgdHJhbnNmZXIpO1xyXG4gICAgICAgIGlmICh0aGlzLiRlbmNvZGVyLmhhcyh0KSkge1xyXG4gICAgICAgICAgICByZXR1cm4gdGhpcy4kZW5jb2Rlci5nZXQodCk/LihvLCB0YXJnZXQsIHRyYW5zZmVyKSA/PyB0YXJnZXQ7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHJldHVybiB0YXJnZXQ7XHJcbiAgICB9XHJcblxyXG5cclxuXHJcbiAgICAvL1xyXG4gICAgLypAX19NQU5HTEVfUFJPUF9fKi8gZGVjb2RlKHRhcmdldDogdW5rbm93bnxQcm9taXNlPHVua25vd24+LCB0cmFuc2ZlcjogdW5rbm93bltdID0gW10pIHtcclxuICAgICAgICByZXR1cm4gZG9Pbmx5QWZ0ZXJSZXNvbHZlKHRhcmdldCwgKGUpPT50aGlzLiRkZWNvZGUoZSwgdHJhbnNmZXIpKTtcclxuICAgIH1cclxuXHJcbiAgICAvL1xyXG4gICAgLypAX19NQU5HTEVfUFJPUF9fKi8gZW5jb2RlKHRhcmdldDogdW5rbm93bnxQcm9taXNlPHVua25vd24+LCB0cmFuc2ZlcjogdW5rbm93bltdID0gW10pIHtcclxuICAgICAgICByZXR1cm4gZG9Pbmx5QWZ0ZXJSZXNvbHZlKHRhcmdldCwgKGUpPT50aGlzLiRlbmNvZGUoZSwgdHJhbnNmZXIpKTtcclxuICAgIH1cclxufVxyXG4iXX0=","// deno-lint-ignore-file no-explicit-any\nimport PreCoding from \"../PreCoding/PreCoding\";\nimport { doOnlyAfterResolve } from \"../Utils/Useful\";\n//\n/*@__MANGLE_PROP__*/ export const $cd = new PreCoding();\n/*@__MANGLE_PROP__*/ export const $mp = $cd.$mp;\n/*@__MANGLE_PROP__*/ export const $dh = $cd.$hndr;\n//\nexport const $handler = (command) => {\n    const { args: [cmd, target, ...args] } = command;\n    //\n    const transfer = [];\n    if (cmd == \"apply\" && args.length >= 3) {\n        transfer.push(...args.splice(2));\n    }\n    // before you needs decode its\n    return doOnlyAfterResolve($cd.decode([cmd, target, ...args], transfer), ([cmd, target, ...args]) => {\n        const result = $dh?.$getHandler?.(\"pms\")?.$hnd?.(cmd, target, ...args);\n        const ready = $cd.encode(result, transfer);\n        return [ready, transfer]; // also, needs to recode back\n    });\n};\nexport const $resolver = (command) => (command.result);\n//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiTWVzc2FnZUNoYW5uZWwuanMiLCJzb3VyY2VSb290IjoiIiwic291cmNlcyI6WyJNZXNzYWdlQ2hhbm5lbC50cyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiQUFBQSx3Q0FBd0M7QUFDeEMsT0FBTyxTQUFTLE1BQU0sd0JBQXdCLENBQUM7QUFDL0MsT0FBTyxFQUFFLGtCQUFrQixFQUFFLE1BQU0saUJBQWlCLENBQUM7QUFFckQsRUFBRTtBQUNGLG9CQUFvQixDQUFDLE1BQU0sQ0FBQyxNQUFNLEdBQUcsR0FBRyxJQUFJLFNBQVMsRUFBRSxDQUFDO0FBQ3hELG9CQUFvQixDQUFDLE1BQU0sQ0FBQyxNQUFNLEdBQUcsR0FBRyxHQUFHLENBQUMsR0FBRyxDQUFDO0FBQ2hELG9CQUFvQixDQUFDLE1BQU0sQ0FBQyxNQUFNLEdBQUcsR0FBRyxHQUFHLENBQUMsS0FBSyxDQUFDO0FBRWxELEVBQUU7QUFDRixNQUFNLENBQUMsTUFBTSxRQUFRLEdBQUcsQ0FBQyxPQUFZLEVBQUUsRUFBRTtJQUNyQyxNQUFNLEVBQUMsSUFBSSxFQUFFLENBQUMsR0FBRyxFQUFFLE1BQU0sRUFBRSxHQUFHLElBQUksQ0FBQyxFQUFDLEdBQUcsT0FBTyxDQUFDO0lBRS9DLEVBQUU7SUFDRixNQUFNLFFBQVEsR0FBYyxFQUFFLENBQUM7SUFDL0IsSUFBSSxHQUFHLElBQUksT0FBTyxJQUFJLElBQUksQ0FBQyxNQUFNLElBQUksQ0FBQyxFQUFFLENBQUM7UUFBQyxRQUFRLENBQUMsSUFBSSxDQUFDLEdBQUcsSUFBSSxDQUFDLE1BQU0sQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDO0lBQUMsQ0FBQztJQUU3RSw4QkFBOEI7SUFDOUIsT0FBTyxrQkFBa0IsQ0FBQyxHQUFHLENBQUMsTUFBTSxDQUFDLENBQUMsR0FBRyxFQUFFLE1BQU0sRUFBRSxHQUFHLElBQUksQ0FBQyxFQUFFLFFBQVEsQ0FBQyxFQUFFLENBQUMsQ0FBQyxHQUFHLEVBQUUsTUFBTSxFQUFFLEdBQUcsSUFBSSxDQUFDLEVBQUMsRUFBRTtRQUM5RixNQUFNLE1BQU0sR0FBRyxHQUFHLEVBQUUsV0FBVyxFQUFFLENBQUMsS0FBSyxDQUFDLEVBQUUsSUFBSSxFQUFFLENBQUMsR0FBRyxFQUFFLE1BQU0sRUFBRSxHQUFHLElBQUksQ0FBQyxDQUFDO1FBQ3ZFLE1BQU0sS0FBSyxHQUFJLEdBQUcsQ0FBQyxNQUFNLENBQUMsTUFBTSxFQUFFLFFBQVEsQ0FBQyxDQUFDO1FBQzVDLE9BQU8sQ0FBQyxLQUFLLEVBQUUsUUFBUSxDQUFDLENBQUEsQ0FBQyw2QkFBNkI7SUFDMUQsQ0FBQyxDQUFDLENBQUM7QUFDUCxDQUFDLENBQUE7QUFDRCxNQUFNLENBQUMsTUFBTSxTQUFTLEdBQUcsQ0FBQyxPQUFZLEVBQUUsRUFBRSxDQUFDLENBQUMsT0FBTyxDQUFDLE1BQU0sQ0FBQyxDQUFDIiwic291cmNlc0NvbnRlbnQiOlsiLy8gZGVuby1saW50LWlnbm9yZS1maWxlIG5vLWV4cGxpY2l0LWFueVxyXG5pbXBvcnQgUHJlQ29kaW5nIGZyb20gXCIuLi9QcmVDb2RpbmcvUHJlQ29kaW5nXCI7XHJcbmltcG9ydCB7IGRvT25seUFmdGVyUmVzb2x2ZSB9IGZyb20gXCIuLi9VdGlscy9Vc2VmdWxcIjtcclxuXHJcbi8vXHJcbi8qQF9fTUFOR0xFX1BST1BfXyovIGV4cG9ydCBjb25zdCAkY2QgPSBuZXcgUHJlQ29kaW5nKCk7XHJcbi8qQF9fTUFOR0xFX1BST1BfXyovIGV4cG9ydCBjb25zdCAkbXAgPSAkY2QuJG1wO1xyXG4vKkBfX01BTkdMRV9QUk9QX18qLyBleHBvcnQgY29uc3QgJGRoID0gJGNkLiRobmRyO1xyXG5cclxuLy9cclxuZXhwb3J0IGNvbnN0ICRoYW5kbGVyID0gKGNvbW1hbmQ6IGFueSkgPT4ge1xyXG4gICAgY29uc3Qge2FyZ3M6IFtjbWQsIHRhcmdldCwgLi4uYXJnc119ID0gY29tbWFuZDtcclxuXHJcbiAgICAvL1xyXG4gICAgY29uc3QgdHJhbnNmZXI6IHVua25vd25bXSA9IFtdO1xyXG4gICAgaWYgKGNtZCA9PSBcImFwcGx5XCIgJiYgYXJncy5sZW5ndGggPj0gMykgeyB0cmFuc2Zlci5wdXNoKC4uLmFyZ3Muc3BsaWNlKDIpKTsgfVxyXG5cclxuICAgIC8vIGJlZm9yZSB5b3UgbmVlZHMgZGVjb2RlIGl0c1xyXG4gICAgcmV0dXJuIGRvT25seUFmdGVyUmVzb2x2ZSgkY2QuZGVjb2RlKFtjbWQsIHRhcmdldCwgLi4uYXJnc10sIHRyYW5zZmVyKSwgKFtjbWQsIHRhcmdldCwgLi4uYXJnc10pPT57XHJcbiAgICAgICAgY29uc3QgcmVzdWx0ID0gJGRoPy4kZ2V0SGFuZGxlcj8uKFwicG1zXCIpPy4kaG5kPy4oY21kLCB0YXJnZXQsIC4uLmFyZ3MpO1xyXG4gICAgICAgIGNvbnN0IHJlYWR5ICA9ICRjZC5lbmNvZGUocmVzdWx0LCB0cmFuc2Zlcik7XHJcbiAgICAgICAgcmV0dXJuIFtyZWFkeSwgdHJhbnNmZXJdIC8vIGFsc28sIG5lZWRzIHRvIHJlY29kZSBiYWNrXHJcbiAgICB9KTtcclxufVxyXG5leHBvcnQgY29uc3QgJHJlc29sdmVyID0gKGNvbW1hbmQ6IGFueSkgPT4gKGNvbW1hbmQucmVzdWx0KTtcclxuIl19","// deno-lint-ignore-file no-explicit-any \nimport { FORBIDDEN_KEYS, META_KEYS, isSymbol } from \"../Utils/Useful\";\nimport { extract } from \"../Utils/InstructionType\";\nimport { ORG } from \"../Utils/OrganicType\";\nexport default class DataHandler {\n    constructor() {\n    }\n    //\n    get /*@__MANGLE_PROP__*/ $exc() { return null; }\n    ;\n    //\n    /*@__MANGLE_PROP__*/ $data(target) { return target; }\n    ;\n    /*@__MANGLE_PROP__*/ $hnd(cmd, meta, ...args) {\n        const ref = this.$data(meta);\n        // return meta as is\n        if (cmd == \"get\") {\n            if (args[0] == ORG.data) {\n                return ref;\n            }\n            ;\n            if (args[0] == ORG.exc) {\n                return this.$exc ?? ref?.[ORG.exc] ?? ref?.then?.((e) => e?.[ORG.exc]) ?? null;\n            }\n            ;\n            if ( // forbidden actions\n            isSymbol(args?.[0]) ||\n                FORBIDDEN_KEYS.has(args?.[0]) ||\n                META_KEYS.has?.(args?.[0])) {\n                return null;\n            }\n            ;\n        }\n        // any illegal is illegal (after 'then' or defer operation)...\n        if (ref == null || (typeof ref != \"object\" && typeof ref != \"function\")) {\n            return ref;\n        }\n        // needs to return itself\n        if (cmd == \"access\") {\n            return ref;\n        }\n        if (cmd == \"transfer\") {\n            // sometimes, `@uuid` may already is known from memory pool\n            const wrap = extract(meta);\n            return {\n                [ORG.type]: \"tf\",\n                [ORG.node]: ref,\n                [ORG.uuid]: wrap?.[ORG.uuid] ?? \"\"\n            };\n        }\n        ;\n        //\n        try {\n            // @ts-ignore \"no-idea\"\n            return Reflect?.[cmd]?.(ref, ...args);\n        }\n        catch (e) {\n            const err = e;\n            //\n            console.error(\"Wrong op: \" + err.message);\n            //\n            console.error(err);\n            console.trace(err);\n        }\n        //\n        return ref;\n    }\n    //\n    /*@__MANGLE_PROP__*/ $get(_uuid) { return null; }\n    ;\n}\n//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiRGF0YUhhbmRsZXIuanMiLCJzb3VyY2VSb290IjoiIiwic291cmNlcyI6WyJEYXRhSGFuZGxlci50cyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiQUFBQSx5Q0FBeUM7QUFDekMsT0FBTyxFQUFFLGNBQWMsRUFBRSxTQUFTLEVBQUUsUUFBUSxFQUFFLE1BQU0saUJBQWlCLENBQUM7QUFDdEUsT0FBTyxFQUFFLE9BQU8sRUFBRSxNQUFNLDBCQUEwQixDQUFDO0FBQ25ELE9BQU8sRUFBYyxHQUFHLEVBQUUsTUFBTSxzQkFBc0IsQ0FBQztBQUd2RCxNQUFNLENBQUMsT0FBTyxPQUFPLFdBQVc7SUFDNUI7SUFDQSxDQUFDO0lBRUQsRUFBRTtJQUNGLElBQUksb0JBQW9CLENBQUMsSUFBSSxLQUFVLE9BQU8sSUFBSSxDQUFDLENBQUEsQ0FBQztJQUFBLENBQUM7SUFFckQsRUFBRTtJQUNGLG9CQUFvQixDQUFDLEtBQUssQ0FBQyxNQUEyQixJQUFJLE9BQU8sTUFBTSxDQUFDLENBQUMsQ0FBQztJQUFBLENBQUM7SUFDM0Usb0JBQW9CLENBQUMsSUFBSSxDQUFDLEdBQVcsRUFBRSxJQUFhLEVBQUUsR0FBRyxJQUFlO1FBQ3BFLE1BQU0sR0FBRyxHQUFRLElBQUksQ0FBQyxLQUFLLENBQUMsSUFBSSxDQUFDLENBQUM7UUFFbEMsb0JBQW9CO1FBQ3BCLElBQUksR0FBRyxJQUFJLEtBQUssRUFBRSxDQUFDO1lBQ2YsSUFBSSxJQUFJLENBQUMsQ0FBQyxDQUFDLElBQUksR0FBRyxDQUFDLElBQUksRUFBRSxDQUFDO2dCQUFDLE9BQU8sR0FBRyxDQUFDO1lBQUMsQ0FBQztZQUFBLENBQUM7WUFDekMsSUFBSSxJQUFJLENBQUMsQ0FBQyxDQUFDLElBQUksR0FBRyxDQUFDLEdBQUcsRUFBRSxDQUFDO2dCQUFDLE9BQU8sSUFBSSxDQUFDLElBQUksSUFBSSxHQUFHLEVBQUUsQ0FBQyxHQUFHLENBQUMsR0FBRyxDQUFDLElBQUksR0FBRyxFQUFFLElBQUksRUFBRSxDQUFDLENBQUMsQ0FBTSxFQUFDLEVBQUUsQ0FBQSxDQUFDLEVBQUUsQ0FBQyxHQUFHLENBQUMsR0FBRyxDQUFDLENBQUMsSUFBSSxJQUFJLENBQUM7WUFBQyxDQUFDO1lBQUEsQ0FBQztZQUMvRyxLQUFLLG9CQUFvQjtZQUNyQixRQUFRLENBQUMsSUFBSSxFQUFFLENBQUMsQ0FBQyxDQUFDLENBQUM7Z0JBQ25CLGNBQWMsQ0FBQyxHQUFHLENBQUMsSUFBSSxFQUFFLENBQUMsQ0FBQyxDQUFXLENBQUM7Z0JBQ3ZDLFNBQVMsQ0FBQyxHQUFHLEVBQUUsQ0FBQyxJQUFJLEVBQUUsQ0FBQyxDQUFDLENBQVEsQ0FBQyxFQUNuQyxDQUFDO2dCQUFDLE9BQU8sSUFBSSxDQUFDO1lBQUMsQ0FBQztZQUFBLENBQUM7UUFDdkIsQ0FBQztRQUVELDhEQUE4RDtRQUM5RCxJQUFJLEdBQUcsSUFBSSxJQUFJLElBQUksQ0FBQyxPQUFPLEdBQUcsSUFBSSxRQUFRLElBQUksT0FBTyxHQUFHLElBQUksVUFBVSxDQUFDLEVBQUUsQ0FBQztZQUFDLE9BQU8sR0FBRyxDQUFDO1FBQUMsQ0FBQztRQUV4Rix5QkFBeUI7UUFDekIsSUFBSSxHQUFHLElBQUksUUFBUSxFQUFFLENBQUM7WUFBQyxPQUFPLEdBQUcsQ0FBQztRQUFDLENBQUM7UUFDcEMsSUFBSSxHQUFHLElBQUksVUFBVSxFQUFFLENBQUM7WUFDcEIsMkRBQTJEO1lBQzNELE1BQU0sSUFBSSxHQUFHLE9BQU8sQ0FBQyxJQUFJLENBQVUsQ0FBQztZQUNwQyxPQUFPO2dCQUNILENBQUMsR0FBRyxDQUFDLElBQUksQ0FBQyxFQUFFLElBQUk7Z0JBQ2hCLENBQUMsR0FBRyxDQUFDLElBQUksQ0FBQyxFQUFFLEdBQUc7Z0JBQ2YsQ0FBQyxHQUFHLENBQUMsSUFBSSxDQUFDLEVBQUcsSUFBWSxFQUFFLENBQUMsR0FBRyxDQUFDLElBQUksQ0FBQyxJQUFJLEVBQUU7YUFDOUMsQ0FBQztRQUNOLENBQUM7UUFBQSxDQUFDO1FBRUYsRUFBRTtRQUNGLElBQUksQ0FBQztZQUNELHVCQUF1QjtZQUN2QixPQUFPLE9BQU8sRUFBRSxDQUFDLEdBQUcsQ0FBQyxFQUFFLENBQUMsR0FBRyxFQUFFLEdBQUcsSUFBSSxDQUFDLENBQUM7UUFDMUMsQ0FBQztRQUFDLE9BQU0sQ0FBQyxFQUFFLENBQUM7WUFDUixNQUFNLEdBQUcsR0FBRyxDQUFVLENBQUM7WUFFdkIsRUFBRTtZQUNGLE9BQU8sQ0FBQyxLQUFLLENBQUMsWUFBWSxHQUFHLEdBQUcsQ0FBQyxPQUFPLENBQUMsQ0FBQztZQUUxQyxFQUFFO1lBQ0YsT0FBTyxDQUFDLEtBQUssQ0FBQyxHQUFHLENBQUMsQ0FBQztZQUNuQixPQUFPLENBQUMsS0FBSyxDQUFDLEdBQUcsQ0FBQyxDQUFDO1FBQ3ZCLENBQUM7UUFFRCxFQUFFO1FBQ0YsT0FBTyxHQUFHLENBQUM7SUFDZixDQUFDO0lBRUQsRUFBRTtJQUNGLG9CQUFvQixDQUFDLElBQUksQ0FBQyxLQUEwQixJQUFTLE9BQU8sSUFBSSxDQUFDLENBQUMsQ0FBQztJQUFBLENBQUM7Q0FDL0UiLCJzb3VyY2VzQ29udGVudCI6WyIvLyBkZW5vLWxpbnQtaWdub3JlLWZpbGUgbm8tZXhwbGljaXQtYW55IFxyXG5pbXBvcnQgeyBGT1JCSURERU5fS0VZUywgTUVUQV9LRVlTLCBpc1N5bWJvbCB9IGZyb20gXCIuLi9VdGlscy9Vc2VmdWxcIjtcclxuaW1wb3J0IHsgZXh0cmFjdCB9IGZyb20gXCIuLi9VdGlscy9JbnN0cnVjdGlvblR5cGVcIjtcclxuaW1wb3J0IHsgdHlwZSBJTWV0YSwgT1JHIH0gZnJvbSBcIi4uL1V0aWxzL09yZ2FuaWNUeXBlXCI7XHJcblxyXG5cclxuZXhwb3J0IGRlZmF1bHQgY2xhc3MgRGF0YUhhbmRsZXIge1xyXG4gICAgY29uc3RydWN0b3IoKSB7XHJcbiAgICB9XHJcblxyXG4gICAgLy9cclxuICAgIGdldCAvKkBfX01BTkdMRV9QUk9QX18qLyAkZXhjKCk6IGFueSB7IHJldHVybiBudWxsO307XHJcblxyXG4gICAgLy9cclxuICAgIC8qQF9fTUFOR0xFX1BST1BfXyovICRkYXRhKHRhcmdldDogdW5rbm93bnxzdHJpbmd8bnVsbCkgeyByZXR1cm4gdGFyZ2V0OyB9O1xyXG4gICAgLypAX19NQU5HTEVfUFJPUF9fKi8gJGhuZChjbWQ6IHN0cmluZywgbWV0YTogdW5rbm93biwgLi4uYXJnczogdW5rbm93bltdKSB7XHJcbiAgICAgICAgY29uc3QgcmVmOiBhbnkgPSB0aGlzLiRkYXRhKG1ldGEpO1xyXG5cclxuICAgICAgICAvLyByZXR1cm4gbWV0YSBhcyBpc1xyXG4gICAgICAgIGlmIChjbWQgPT0gXCJnZXRcIikge1xyXG4gICAgICAgICAgICBpZiAoYXJnc1swXSA9PSBPUkcuZGF0YSkgeyByZXR1cm4gcmVmOyB9O1xyXG4gICAgICAgICAgICBpZiAoYXJnc1swXSA9PSBPUkcuZXhjKSB7IHJldHVybiB0aGlzLiRleGMgPz8gcmVmPy5bT1JHLmV4Y10gPz8gcmVmPy50aGVuPy4oKGU6IGFueSk9PmU/LltPUkcuZXhjXSkgPz8gbnVsbDsgfTtcclxuICAgICAgICAgICAgaWYgKCAvLyBmb3JiaWRkZW4gYWN0aW9uc1xyXG4gICAgICAgICAgICAgICAgaXNTeW1ib2woYXJncz8uWzBdKSB8fFxyXG4gICAgICAgICAgICAgICAgRk9SQklEREVOX0tFWVMuaGFzKGFyZ3M/LlswXSBhcyBzdHJpbmcpIHx8IFxyXG4gICAgICAgICAgICAgICAgTUVUQV9LRVlTLmhhcz8uKGFyZ3M/LlswXSBhcyBhbnkpXHJcbiAgICAgICAgICAgICkgeyByZXR1cm4gbnVsbDsgfTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIC8vIGFueSBpbGxlZ2FsIGlzIGlsbGVnYWwgKGFmdGVyICd0aGVuJyBvciBkZWZlciBvcGVyYXRpb24pLi4uXHJcbiAgICAgICAgaWYgKHJlZiA9PSBudWxsIHx8ICh0eXBlb2YgcmVmICE9IFwib2JqZWN0XCIgJiYgdHlwZW9mIHJlZiAhPSBcImZ1bmN0aW9uXCIpKSB7IHJldHVybiByZWY7IH1cclxuXHJcbiAgICAgICAgLy8gbmVlZHMgdG8gcmV0dXJuIGl0c2VsZlxyXG4gICAgICAgIGlmIChjbWQgPT0gXCJhY2Nlc3NcIikgeyByZXR1cm4gcmVmOyB9XHJcbiAgICAgICAgaWYgKGNtZCA9PSBcInRyYW5zZmVyXCIpIHtcclxuICAgICAgICAgICAgLy8gc29tZXRpbWVzLCBgQHV1aWRgIG1heSBhbHJlYWR5IGlzIGtub3duIGZyb20gbWVtb3J5IHBvb2xcclxuICAgICAgICAgICAgY29uc3Qgd3JhcCA9IGV4dHJhY3QobWV0YSkgYXMgSU1ldGE7XHJcbiAgICAgICAgICAgIHJldHVybiB7XHJcbiAgICAgICAgICAgICAgICBbT1JHLnR5cGVdOiBcInRmXCIsIFxyXG4gICAgICAgICAgICAgICAgW09SRy5ub2RlXTogcmVmLCBcclxuICAgICAgICAgICAgICAgIFtPUkcudXVpZF06ICh3cmFwIGFzIGFueSk/LltPUkcudXVpZF0gPz8gXCJcIlxyXG4gICAgICAgICAgICB9O1xyXG4gICAgICAgIH07XHJcblxyXG4gICAgICAgIC8vXHJcbiAgICAgICAgdHJ5IHtcclxuICAgICAgICAgICAgLy8gQHRzLWlnbm9yZSBcIm5vLWlkZWFcIlxyXG4gICAgICAgICAgICByZXR1cm4gUmVmbGVjdD8uW2NtZF0/LihyZWYsIC4uLmFyZ3MpO1xyXG4gICAgICAgIH0gY2F0Y2goZSkge1xyXG4gICAgICAgICAgICBjb25zdCBlcnIgPSBlIGFzIEVycm9yO1xyXG5cclxuICAgICAgICAgICAgLy9cclxuICAgICAgICAgICAgY29uc29sZS5lcnJvcihcIldyb25nIG9wOiBcIiArIGVyci5tZXNzYWdlKTtcclxuXHJcbiAgICAgICAgICAgIC8vXHJcbiAgICAgICAgICAgIGNvbnNvbGUuZXJyb3IoZXJyKTtcclxuICAgICAgICAgICAgY29uc29sZS50cmFjZShlcnIpO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgLy9cclxuICAgICAgICByZXR1cm4gcmVmO1xyXG4gICAgfVxyXG5cclxuICAgIC8vXHJcbiAgICAvKkBfX01BTkdMRV9QUk9QX18qLyAkZ2V0KF91dWlkOiB1bmtub3dufHN0cmluZ3xudWxsKTogYW55IHsgcmV0dXJuIG51bGw7IH07XHJcbn1cclxuIl19","// deno-lint-ignore-file no-explicit-any\nimport ObjectProxy from \"../../Interface/ObjectProxy\";\n//\nimport { isSymbol, FORBIDDEN_KEYS, META_KEYS, isPromise, doOnlyAfterResolve } from \"../Utils/Useful\";\nimport { bindCtx, MakeReference } from \"../Utils/InstructionType\";\nimport ORG from \"../Utils/OrganicType\";\n//\nimport DataHandler from \"./DataHandler\";\nexport default class PromiseHandler extends DataHandler {\n    constructor() { super(); }\n    //\n    /*@__MANGLE_PROP__*/ $data(target) {\n        return (isPromise(target?.[ORG.data]) ? target?.[ORG.data] : target) ?? target;\n    }\n    //\n    /*@__MANGLE_PROP__*/ $deferOp(target, cb = (e) => e) {\n        return doOnlyAfterResolve(target, cb) ?? target;\n    }\n    //\n    /*@__MANGLE_PROP__*/ $wrapPromise(result, handler = null) {\n        return $wrapPromise(result, handler ?? this);\n    }\n    //\n    /*@__MANGLE_PROP__*/ $hnd(cmd, meta, ...args) {\n        // isn't promise itself\n        const data = this.$data(meta);\n        //\n        if (cmd == \"get\") {\n            if (args[0] == ORG.data) {\n                return data;\n            }\n            ;\n            if (args[0] == ORG.exc) {\n                return this.$exc ?? data?.[ORG.exc] ?? data?.then?.((e) => e?.[ORG.exc]) ?? null;\n            }\n            ;\n            //\n            if ([\"then\", \"catch\", \"finally\"].indexOf(args?.[0]) >= 0) {\n                // @ts-ignore \"no idea\"\n                return bindCtx(Reflect?.[cmd]?.(data, ...args), data);\n            }\n            //\n            if ( // forbidden actions\n            isSymbol(args?.[0]) ||\n                FORBIDDEN_KEYS.has(args?.[0]) ||\n                META_KEYS.has?.(args?.[0])) {\n                return null;\n            }\n            ;\n        }\n        // primitive value or non-object/function\n        if (data == null || (typeof data != \"object\" && typeof data != \"function\")) {\n            return data;\n        }\n        ;\n        // unwrap first-level promise\n        return this.$wrapPromise(this.$deferOp(data, (raw) => {\n            return super.$hnd(cmd, raw, ...args);\n        }));\n    }\n    //\n    /*@__MANGLE_PROP__*/ $get(_uuid) { return null; }\n    ;\n}\n//\n/*@__PURE__*/\nexport const /*@__MANGLE_PROP__*/ $wrapPromise = (result, handler = new PromiseHandler()) => {\n    if (isPromise(result)) {\n        return new Proxy(MakeReference(result), new ObjectProxy(handler));\n    }\n    return result;\n};\n//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiUHJvbWlzZUhhbmRsZXIuanMiLCJzb3VyY2VSb290IjoiIiwic291cmNlcyI6WyJQcm9taXNlSGFuZGxlci50cyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiQUFBQSx3Q0FBd0M7QUFDeEMsT0FBTyxXQUFXLE1BQU0sNkJBQTZCLENBQUM7QUFFdEQsRUFBRTtBQUNGLE9BQU8sRUFBRSxRQUFRLEVBQUUsY0FBYyxFQUFFLFNBQVMsRUFBRSxTQUFTLEVBQUUsa0JBQWtCLEVBQWMsTUFBTSxpQkFBaUIsQ0FBQTtBQUNoSCxPQUFPLEVBQUUsT0FBTyxFQUFFLGFBQWEsRUFBRSxNQUFNLDBCQUEwQixDQUFDO0FBQ2xFLE9BQU8sR0FBRyxNQUFNLHNCQUFzQixDQUFDO0FBRXZDLEVBQUU7QUFDRixPQUFPLFdBQVcsTUFBTSxlQUFlLENBQUM7QUFHeEMsTUFBTSxDQUFDLE9BQU8sT0FBTyxjQUFlLFNBQVEsV0FBVztJQUNuRCxnQkFBZ0IsS0FBSyxFQUFFLENBQUMsQ0FBQyxDQUFDO0lBRTFCLEVBQUU7SUFDRixvQkFBb0IsQ0FBQyxLQUFLLENBQUMsTUFBZ0M7UUFDdkQsT0FBTyxDQUFDLFNBQVMsQ0FBRSxNQUFjLEVBQUUsQ0FBQyxHQUFHLENBQUMsSUFBSSxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUUsTUFBYyxFQUFFLENBQUMsR0FBRyxDQUFDLElBQUksQ0FBQyxDQUFDLENBQUMsQ0FBQyxNQUFNLENBQUMsSUFBSSxNQUFNLENBQUM7SUFDckcsQ0FBQztJQUVELEVBQUU7SUFDRixvQkFBb0IsQ0FBQyxRQUFRLENBQUMsTUFBZ0MsRUFBRSxLQUFLLENBQUMsQ0FBTSxFQUFDLEVBQUUsQ0FBQSxDQUFDO1FBQzVFLE9BQU8sa0JBQWtCLENBQUMsTUFBTSxFQUFFLEVBQUUsQ0FBQyxJQUFJLE1BQU0sQ0FBQztJQUNwRCxDQUFDO0lBRUQsRUFBRTtJQUNGLG9CQUFvQixDQUFDLFlBQVksQ0FBb0IsTUFBb0IsRUFBRSxVQUE0QixJQUFJO1FBQ3ZHLE9BQU8sWUFBWSxDQUFD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QUM5QixDQUFDLENBQUEiLCJzb3VyY2VzQ29udGVudCI6WyIvLyBkZW5vLWxpbnQtaWdub3JlLWZpbGUgbm8tZXhwbGljaXQtYW55XHJcbmltcG9ydCBPYmplY3RQcm94eSBmcm9tIFwiLi4vLi4vSW50ZXJmYWNlL09iamVjdFByb3h5XCI7XHJcblxyXG4vL1xyXG5pbXBvcnQgeyBpc1N5bWJvbCwgRk9SQklEREVOX0tFWVMsIE1FVEFfS0VZUywgaXNQcm9taXNlLCBkb09ubHlBZnRlclJlc29sdmUsIHR5cGUgSVdyYXAgfSBmcm9tIFwiLi4vVXRpbHMvVXNlZnVsXCJcclxuaW1wb3J0IHsgYmluZEN0eCwgTWFrZVJlZmVyZW5jZSB9IGZyb20gXCIuLi9VdGlscy9JbnN0cnVjdGlvblR5cGVcIjtcclxuaW1wb3J0IE9SRyBmcm9tIFwiLi4vVXRpbHMvT3JnYW5pY1R5cGVcIjtcclxuXHJcbi8vXHJcbmltcG9ydCBEYXRhSGFuZGxlciBmcm9tIFwiLi9EYXRhSGFuZGxlclwiO1xyXG5cclxuXHJcbmV4cG9ydCBkZWZhdWx0IGNsYXNzIFByb21pc2VIYW5kbGVyIGV4dGVuZHMgRGF0YUhhbmRsZXIge1xyXG4gICAgY29uc3RydWN0b3IoKSB7IHN1cGVyKCk7IH1cclxuXHJcbiAgICAvL1xyXG4gICAgLypAX19NQU5HTEVfUFJPUF9fKi8gJGRhdGEodGFyZ2V0OiB1bmtub3dufFByb21pc2U8dW5rbm93bj4pIHtcclxuICAgICAgICByZXR1cm4gKGlzUHJvbWlzZSgodGFyZ2V0IGFzIGFueSk/LltPUkcuZGF0YV0pID8gKHRhcmdldCBhcyBhbnkpPy5bT1JHLmRhdGFdIDogdGFyZ2V0KSA/PyB0YXJnZXQ7XHJcbiAgICB9XHJcblxyXG4gICAgLy9cclxuICAgIC8qQF9fTUFOR0xFX1BST1BfXyovICRkZWZlck9wKHRhcmdldDogdW5rbm93bnxQcm9taXNlPHVua25vd24+LCBjYiA9IChlOiBhbnkpPT5lKSB7XHJcbiAgICAgICAgcmV0dXJuIGRvT25seUFmdGVyUmVzb2x2ZSh0YXJnZXQsIGNiKSA/PyB0YXJnZXQ7XHJcbiAgICB9XHJcblxyXG4gICAgLy9cclxuICAgIC8qQF9fTUFOR0xFX1BST1BfXyovICR3cmFwUHJvbWlzZTxUIGV4dGVuZHMgdW5rbm93bj4ocmVzdWx0OiBUfFByb21pc2U8VD4sIGhhbmRsZXI6IERhdGFIYW5kbGVyfG51bGwgPSBudWxsKTogSVdyYXA8VD58bnVsbCB7XHJcbiAgICAgICAgcmV0dXJuICR3cmFwUHJvbWlzZShyZXN1bHQsIGhhbmRsZXIgPz8gdGhpcyk7XHJcbiAgICB9XHJcblxyXG4gICAgLy9cclxuICAgIC8qQF9fTUFOR0xFX1BST1BfXyovJGhuZChjbWQ6IHN0cmluZywgbWV0YTogdW5rbm93biwgLi4uYXJnczogdW5rbm93bltdKSB7XHJcbiAgICAgICAgLy8gaXNuJ3QgcHJvbWlzZSBpdHNlbGZcclxuICAgICAgICBjb25zdCBkYXRhID0gdGhpcy4kZGF0YShtZXRhKTtcclxuXHJcbiAgICAgICAgLy9cclxuICAgICAgICBpZiAoY21kID09IFwiZ2V0XCIpIHtcclxuICAgICAgICAgICAgaWYgKGFyZ3NbMF0gPT0gT1JHLmRhdGEpIHsgcmV0dXJuIGRhdGE7IH07XHJcbiAgICAgICAgICAgIGlmIChhcmdzWzBdID09IE9SRy5leGMpIHsgcmV0dXJuIHRoaXMuJGV4YyA/PyBkYXRhPy5bT1JHLmV4Y10gPz8gZGF0YT8udGhlbj8uKChlOiBhbnkpPT5lPy5bT1JHLmV4Y10pID8/IG51bGw7IH07XHJcblxyXG4gICAgICAgICAgICAvL1xyXG4gICAgICAgICAgICBpZiAoW1widGhlblwiLCBcImNhdGNoXCIsIFwiZmluYWxseVwiXS5pbmRleE9mKChhcmdzIGFzIGFueVtdKT8uWzBdKSA+PSAwKSB7XHJcbiAgICAgICAgICAgICAgICAvLyBAdHMtaWdub3JlIFwibm8gaWRlYVwiXHJcbiAgICAgICAgICAgICAgICByZXR1cm4gYmluZEN0eChSZWZsZWN0Py5bY21kXT8uKGRhdGEsIC4uLmFyZ3MpLCBkYXRhKTtcclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgLy9cclxuICAgICAgICAgICAgaWYgKCAvLyBmb3JiaWRkZW4gYWN0aW9uc1xyXG4gICAgICAgICAgICAgICAgaXNTeW1ib2woYXJncz8uWzBdKSB8fFxyXG4gICAgICAgICAgICAgICAgRk9SQklEREVOX0tFWVMuaGFzKGFyZ3M/LlswXSBhcyBzdHJpbmcpIHx8IFxyXG4gICAgICAgICAgICAgICAgTUVUQV9LRVlTLmhhcz8uKGFyZ3M/LlswXSBhcyBhbnkpXHJcbiAgICAgICAgICAgICkgeyByZXR1cm4gbnVsbDsgfTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIC8vIHByaW1pdGl2ZSB2YWx1ZSBvciBub24tb2JqZWN0L2Z1bmN0aW9uXHJcbiAgICAgICAgaWYgKGRhdGEgPT0gbnVsbCB8fCAodHlwZW9mIGRhdGEgIT0gXCJvYmplY3RcIiAmJiB0eXBlb2YgZGF0YSAhPSBcImZ1bmN0aW9uXCIpKSB7IHJldHVybiBkYXRhOyB9O1xyXG5cclxuICAgICAgICAvLyB1bndyYXAgZmlyc3QtbGV2ZWwgcHJvbWlzZVxyXG4gICAgICAgIHJldHVybiB0aGlzLiR3cmFwUHJvbWlzZSh0aGlzLiRkZWZlck9wKGRhdGEsIChyYXcpPT4ge1xyXG4gICAgICAgICAgICByZXR1cm4gc3VwZXIuJGhuZChjbWQsIHJhdywgLi4uYXJncyk7XHJcbiAgICAgICAgfSkpO1xyXG4gICAgfVxyXG5cclxuICAgIC8vXHJcbiAgICAvKkBfX01BTkdMRV9QUk9QX18qLyRnZXQoX3V1aWQ6IHVua25vd258c3RyaW5nfG51bGwpOiBhbnkgeyByZXR1cm4gbnVsbDsgfTtcclxufVxyXG5cclxuLy9cclxuLypAX19QVVJFX18qL1xyXG5leHBvcnQgY29uc3QgLypAX19NQU5HTEVfUFJPUF9fKi8gJHdyYXBQcm9taXNlID0gPFQgZXh0ZW5kcyB1bmtub3duPihyZXN1bHQ6IFR8UHJvbWlzZTxUPiwgaGFuZGxlcjogRGF0YUhhbmRsZXIgPSBuZXcgUHJvbWlzZUhhbmRsZXIoKSk6IElXcmFwPFQ+fG51bGwgPT4ge1xyXG4gICAgaWYgKGlzUHJvbWlzZShyZXN1bHQpKSB7XHJcbiAgICAgICAgcmV0dXJuIG5ldyBQcm94eShNYWtlUmVmZXJlbmNlKHJlc3VsdCksIG5ldyBPYmplY3RQcm94eShoYW5kbGVyKSkgYXMgSVdyYXA8VD58bnVsbDtcclxuICAgIH1cclxuICAgIHJldHVybiByZXN1bHQgYXMgSVdyYXA8VD47XHJcbn1cclxuIl19","// deno-lint-ignore-file no-explicit-any\n/*@__MANGLE_PROP__*/ /*@__NOINLINE__*/ export const PMS = Promise;\n/*@__MANGLE_PROP__*/ /*@__NOINLINE__*/ export const TS = {\n    /*@__MANGLE_PROP__*/ /*@__PURE__*/ \"rjb\": \"rejectBy\",\n    /*@__MANGLE_PROP__*/ /*@__PURE__*/ \"rvb\": \"resolveBy\",\n    /*@__MANGLE_PROP__*/ /*@__PURE__*/ \"rj\": \"reject\",\n    /*@__MANGLE_PROP__*/ /*@__PURE__*/ \"rv\": \"resolve\",\n    /*@__MANGLE_PROP__*/ /*@__PURE__*/ \"cr\": \"create\",\n    /*@__MANGLE_PROP__*/ /*@__PURE__*/ \"cs\": \"createSync\",\n    /*@__MANGLE_PROP__*/ /*@__PURE__*/ \"a\": \"array\",\n    /*@__MANGLE_PROP__*/ /*@__PURE__*/ \"ta\": \"typedarray\",\n    /*@__MANGLE_PROP__*/ /*@__PURE__*/ \"udf\": \"undefined\"\n};\n/*@__MANGLE_PROP__*/ /*@__PURE__*/ /*@__NOINLINE__*/ export default TS;\n//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiQWxpYXMuanMiLCJzb3VyY2VSb290IjoiIiwic291cmNlcyI6WyJBbGlhcy50cyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiQUFBQSx3Q0FBd0M7QUFDeEMsb0JBQW9CLENBQUMsaUJBQWlCLENBQUMsTUFBTSxDQUFDLE1BQU0sR0FBRyxHQUFRLE9BQU8sQ0FBQztBQUN2RSxvQkFBb0IsQ0FBQyxpQkFBaUIsQ0FBQyxNQUFNLENBQUMsTUFBTSxFQUFFLEdBQVE7SUFDMUQsb0JBQW9CLENBQUMsYUFBYSxDQUFDLEtBQUssRUFBRSxVQUFVO0lBQ3BELG9CQUFvQixDQUFDLGFBQWEsQ0FBQyxLQUFLLEVBQUUsV0FBVztJQUNyRCxvQkFBb0IsQ0FBQyxhQUFhLENBQUMsSUFBSSxFQUFFLFFBQVE7SUFDakQsb0JBQW9CLENBQUMsYUFBYSxDQUFDLElBQUksRUFBRSxTQUFTO0lBQ2xELG9CQUFvQixDQUFDLGFBQWEsQ0FBQyxJQUFJLEVBQUUsUUFBUTtJQUNqRCxvQkFBb0IsQ0FBQyxhQUFhLENBQUMsSUFBSSxFQUFFLFlBQVk7SUFDckQsb0JBQW9CLENBQUMsYUFBYSxDQUFDLEdBQUcsRUFBRSxPQUFPO0lBQy9DLG9CQUFvQixDQUFDLGFBQWEsQ0FBQyxJQUFJLEVBQUUsWUFBWTtJQUNyRCxvQkFBb0IsQ0FBQyxhQUFhLENBQUMsS0FBSyxFQUFFLFdBQVc7Q0FDeEQsQ0FBQztBQUNGLG9CQUFvQixDQUFDLGFBQWEsQ0FBQyxpQkFBaUIsQ0FBQyxlQUFlLEVBQUUsQ0FBQyIsInNvdXJjZXNDb250ZW50IjpbIi8vIGRlbm8tbGludC1pZ25vcmUtZmlsZSBuby1leHBsaWNpdC1hbnlcclxuLypAX19NQU5HTEVfUFJPUF9fKi8gLypAX19OT0lOTElORV9fKi8gZXhwb3J0IGNvbnN0IFBNUzogYW55ID0gUHJvbWlzZTtcclxuLypAX19NQU5HTEVfUFJPUF9fKi8gLypAX19OT0lOTElORV9fKi8gZXhwb3J0IGNvbnN0IFRTOiBhbnkgPSB7XHJcbiAgICAvKkBfX01BTkdMRV9QUk9QX18qLyAvKkBfX1BVUkVfXyovIFwicmpiXCI6IFwicmVqZWN0QnlcIixcclxuICAgIC8qQF9fTUFOR0xFX1BST1BfXyovIC8qQF9fUFVSRV9fKi8gXCJydmJcIjogXCJyZXNvbHZlQnlcIixcclxuICAgIC8qQF9fTUFOR0xFX1BST1BfXyovIC8qQF9fUFVSRV9fKi8gXCJyalwiOiBcInJlamVjdFwiLFxyXG4gICAgLypAX19NQU5HTEVfUFJPUF9fKi8gLypAX19QVVJFX18qLyBcInJ2XCI6IFwicmVzb2x2ZVwiLFxyXG4gICAgLypAX19NQU5HTEVfUFJPUF9fKi8gLypAX19QVVJFX18qLyBcImNyXCI6IFwiY3JlYXRlXCIsXHJcbiAgICAvKkBfX01BTkdMRV9QUk9QX18qLyAvKkBfX1BVUkVfXyovIFwiY3NcIjogXCJjcmVhdGVTeW5jXCIsXHJcbiAgICAvKkBfX01BTkdMRV9QUk9QX18qLyAvKkBfX1BVUkVfXyovIFwiYVwiOiBcImFycmF5XCIsXHJcbiAgICAvKkBfX01BTkdMRV9QUk9QX18qLyAvKkBfX1BVUkVfXyovIFwidGFcIjogXCJ0eXBlZGFycmF5XCIsXHJcbiAgICAvKkBfX01BTkdMRV9QUk9QX18qLyAvKkBfX1BVUkVfXyovIFwidWRmXCI6IFwidW5kZWZpbmVkXCJcclxufTtcclxuLypAX19NQU5HTEVfUFJPUF9fKi8gLypAX19QVVJFX18qLyAvKkBfX05PSU5MSU5FX18qLyBleHBvcnQgZGVmYXVsdCBUUztcclxuIl19","// deno-lint-ignore-file ban-types no-explicit-any no-explicit-any ban-types no-explicit-any no-explicit-any\nimport { ORG } from \"./OrganicType\";\nimport { doOnlyAfterResolve } from \"./Useful\";\n/*@__MANGLE_PROP__*/\nexport const MakeReference = (data = null) => {\n    // not ordinal not acceptable\n    if (data == null || (typeof data != \"function\" && typeof data != \"object\")) {\n        return data;\n    }\n    // already is functional, skip it\n    if (typeof data == \"function\" && data?.[ORG.data]) {\n        return data;\n    }\n    // make function or class compatible for proxy\n    const fx = function () { if (this != null) {\n        this[ORG.data] = data;\n    } ; };\n    if (fx != null) {\n        /*@__MANGLE_PROP__*/ /*@__PURE__*/ fx.prototype.stringify = function () { return JSON.stringify(this[ORG.data] || \"{}\"); };\n        /*@__MANGLE_PROP__*/ /*@__PURE__*/ fx.stringify = () => { return JSON.stringify(data || \"{}\"); };\n        // @ts-ignore \"typescript not supports Symbol\"\n        fx[ORG.data] = data;\n    }\n    //\n    return fx;\n};\n// any meta contains, and can't to be primitive or array directly\n// only constructor, function, or object\n/*@__MANGLE_PROP__*/\nexport const bindCtx = (gt, ref = null) => {\n    if (typeof gt == \"function\" && typeof gt?.bind == \"function\" && (typeof ref == \"object\" || typeof ref == \"function\")) {\n        // may be organic or context detached\n        return gt?.bind?.(ref) ?? gt;\n    }\n    return gt;\n};\n/*@__MANGLE_PROP__*/\nexport const wrapWeakMap = /*@__MANGLE_PROP__*/ new WeakMap([]);\n/*@__MANGLE_PROP__*/\nexport const prepare = (w) => {\n    return doOnlyAfterResolve(w, (wrap) => {\n        if (wrap?.[ORG.data])\n            return wrap?.[ORG.data];\n        const organic = wrapWeakMap.get(wrap) ?? wrap;\n        return organic?.[ORG.data] ?? organic;\n    });\n};\n/*@__MANGLE_PROP__*/\nexport const redirect = (w) => {\n    return doOnlyAfterResolve(w, (wrap) => {\n        const pt = prepare(wrap);\n        return (pt?.[ORG.uuid] || pt?.[ORG.type]) ? pt : null;\n    });\n};\n/*@__MANGLE_PROP__*/\nexport const extract = (w) => {\n    return doOnlyAfterResolve(w, (wrap) => {\n        const pt = prepare(wrap);\n        return ((pt?.[ORG.uuid] || pt?.[ORG.type])) ? pt : null;\n    });\n};\n//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiSW5zdHJ1Y3Rpb25UeXBlLmpzIiwic291cmNlUm9vdCI6IiIsInNvdXJjZXMiOlsiSW5zdHJ1Y3Rpb25UeXBlLnRzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiJBQUFBLDRHQUE0RztBQUM1RyxPQUFPLEVBQUUsR0FBRyxFQUFjLE1BQU0sZUFBZSxDQUFDO0FBQ2hELE9BQU8sRUFBRSxrQkFBa0IsRUFBbUIsTUFBTSxVQUFVLENBQUM7QUFFL0Qsb0JBQW9CO0FBQ3BCLE1BQU0sQ0FBQyxNQUFNLGFBQWEsR0FBRyxDQUFDLE9BQVksSUFBSSxFQUFtQixFQUFFO0lBQy9ELDZCQUE2QjtJQUM3QixJQUFJLElBQUksSUFBSSxJQUFJLElBQUksQ0FBQyxPQUFPLElBQUksSUFBSSxVQUFVLElBQUksT0FBTyxJQUFJLElBQUksUUFBUSxDQUFDLEVBQUUsQ0FBQztRQUN6RSxPQUFPLElBQUksQ0FBQztJQUNoQixDQUFDO0lBRUQsaUNBQWlDO0lBQ2pDLElBQUksT0FBTyxJQUFJLElBQUksVUFBVSxJQUFJLElBQUksRUFBRSxDQUFDLEdBQUcsQ0FBQyxJQUFJLENBQUMsRUFBRSxDQUFDO1FBQUMsT0FBTyxJQUFJLENBQUM7SUFBQyxDQUFDO0lBRW5FLDhDQUE4QztJQUM5QyxNQUFNLEVBQUUsR0FBRyxjQUFzQixJQUFJLElBQUksSUFBSSxJQUFJLEVBQUUsQ0FBQztRQUFDLElBQUksQ0FBQyxHQUFHLENBQUMsSUFBSSxDQUFDLEdBQUcsSUFBSSxDQUFDO0lBQUMsQ0FBQyxDQUFBLENBQUMsQ0FBQyxDQUFDLENBQUE7SUFDaEYsSUFBSSxFQUFFLElBQUksSUFBSSxFQUFFLENBQUM7UUFDYixvQkFBb0IsQ0FBQyxhQUFhLENBQUMsRUFBRSxDQUFDLFNBQVMsQ0FBQyxTQUFTLEdBQUcsY0FBYSxPQUFPLElBQUksQ0FBQyxTQUFTLENBQUMsSUFBSSxDQUFDLEdBQUcsQ0FBQyxJQUFJLENBQUMsSUFBSSxJQUFJLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQTtRQUN6SCxvQkFBb0Is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YmFuLXR5cGVzIG5vLWV4cGxpY2l0LWFueSBuby1leHBsaWNpdC1hbnkgYmFuLXR5cGVzIG5vLWV4cGxpY2l0LWFueSBuby1leHBsaWNpdC1hbnlcclxuaW1wb3J0IHsgT1JHLCB0eXBlIElNZXRhIH0gZnJvbSBcIi4vT3JnYW5pY1R5cGVcIjtcclxuaW1wb3J0IHsgZG9Pbmx5QWZ0ZXJSZXNvbHZlLCBJV3JhcCwgTVByb21pc2UgfSBmcm9tIFwiLi9Vc2VmdWxcIjtcclxuXHJcbi8qQF9fTUFOR0xFX1BST1BfXyovIFxyXG5leHBvcnQgY29uc3QgTWFrZVJlZmVyZW5jZSA9IChkYXRhOiBhbnkgPSBudWxsKTogRnVuY3Rpb258b2JqZWN0ID0+IHtcclxuICAgIC8vIG5vdCBvcmRpbmFsIG5vdCBhY2NlcHRhYmxlXHJcbiAgICBpZiAoZGF0YSA9PSBudWxsIHx8ICh0eXBlb2YgZGF0YSAhPSBcImZ1bmN0aW9uXCIgJiYgdHlwZW9mIGRhdGEgIT0gXCJvYmplY3RcIikpIHtcclxuICAgICAgICByZXR1cm4gZGF0YTtcclxuICAgIH1cclxuXHJcbiAgICAvLyBhbHJlYWR5IGlzIGZ1bmN0aW9uYWwsIHNraXAgaXRcclxuICAgIGlmICh0eXBlb2YgZGF0YSA9PSBcImZ1bmN0aW9uXCIgJiYgZGF0YT8uW09SRy5kYXRhXSkgeyByZXR1cm4gZGF0YTsgfVxyXG5cclxuICAgIC8vIG1ha2UgZnVuY3Rpb24gb3IgY2xhc3MgY29tcGF0aWJsZSBmb3IgcHJveHlcclxuICAgIGNvbnN0IGZ4ID0gZnVuY3Rpb24odGhpczogYW55KSB7IGlmICh0aGlzICE9IG51bGwpIHsgdGhpc1tPUkcuZGF0YV0gPSBkYXRhOyB9OyB9XHJcbiAgICBpZiAoZnggIT0gbnVsbCkge1xyXG4gICAgICAgIC8qQF9fTUFOR0xFX1BST1BfXyovIC8qQF9fUFVSRV9fKi8gZngucHJvdG90eXBlLnN0cmluZ2lmeSA9IGZ1bmN0aW9uICgpeyByZXR1cm4gSlNPTi5zdHJpbmdpZnkodGhpc1tPUkcuZGF0YV0gfHwgXCJ7fVwiKTsgfVxyXG4gICAgICAgIC8qQF9fTUFOR0xFX1BST1BfXyovIC8qQF9fUFVSRV9fKi8gZnguc3RyaW5naWZ5ID0gKCk9PnsgcmV0dXJuIEpTT04uc3RyaW5naWZ5KGRhdGEgfHwgXCJ7fVwiKTsgfVxyXG5cclxuICAgICAgICAvLyBAdHMtaWdub3JlIFwidHlwZXNjcmlwdCBub3Qgc3VwcG9ydHMgU3ltYm9sXCJcclxuICAgICAgICBmeFtPUkcuZGF0YV0gPSBkYXRhO1xyXG4gICAgfVxyXG5cclxuICAgIC8vXHJcbiAgICByZXR1cm4gZng7XHJcbn1cclxuXHJcbi8vIGFueSBtZXRhIGNvbnRhaW5zLCBhbmQgY2FuJ3QgdG8gYmUgcHJpbWl0aXZlIG9yIGFycmF5IGRpcmVjdGx5XHJcbi8vIG9ubHkgY29uc3RydWN0b3IsIGZ1bmN0aW9uLCBvciBvYmplY3RcclxuLypAX19NQU5HTEVfUFJPUF9fKi8gXHJcbmV4cG9ydCBjb25zdCBiaW5kQ3R4ID0gKGd0OiBhbnksIHJlZjogYW55fG51bGwgPSBudWxsKT0+e1xyXG4gICAgaWYgKHR5cGVvZiBndCA9PSBcImZ1bmN0aW9uXCIgJiYgdHlwZW9mIGd0Py5iaW5kID09IFwiZnVuY3Rpb25cIiAmJiAodHlwZW9mIHJlZiA9PSBcIm9iamVjdFwiIHx8IHR5cGVvZiByZWYgPT0gXCJmdW5jdGlvblwiKSkge1xyXG4gICAgICAgIC8vIG1heSBiZSBvcmdhbmljIG9yIGNvbnRleHQgZGV0YWNoZWRcclxuICAgICAgICByZXR1cm4gZ3Q/LmJpbmQ/LihyZWYpID8/IGd0O1xyXG4gICAgfVxyXG4gICAgcmV0dXJuIGd0O1xyXG59XHJcblxyXG4vKkBfX01BTkdMRV9QUk9QX18qLyBcclxuZXhwb3J0IGNvbnN0IHdyYXBXZWFrTWFwID0gLypAX19NQU5HTEVfUFJPUF9fKi8gbmV3IFdlYWtNYXAoW10pO1xyXG5cclxuLypAX19NQU5HTEVfUFJPUF9fKi8gXHJcbmV4cG9ydCBjb25zdCBwcmVwYXJlID0gPFQgZXh0ZW5kcyB1bmtub3duPih3OiBJV3JhcDxUPnxUfElNZXRhKTogYW55ID0+IHtcclxuICAgIHJldHVybiBkb09ubHlBZnRlclJlc29sdmUodywgKHdyYXA6IGFueSk9PntcclxuICAgICAgICBpZiAod3JhcD8uW09SRy5kYXRhXSkgcmV0dXJuIHdyYXA/LltPUkcuZGF0YV07XHJcbiAgICAgICAgY29uc3Qgb3JnYW5pYyA9IHdyYXBXZWFrTWFwLmdldCh3cmFwKSA/PyB3cmFwO1xyXG4gICAgICAgIHJldHVybiBvcmdhbmljPy5bT1JHLmRhdGFdID8/IG9yZ2FuaWM7XHJcbiAgICB9KTtcclxufVxyXG5cclxuLypAX19NQU5HTEVfUFJPUF9fKi8gXHJcbmV4cG9ydCBjb25zdCByZWRpcmVjdCA9IDxUIGV4dGVuZHMgdW5rbm93bj4odzogSVdyYXA8VD58TVByb21pc2U8VD58TVByb21pc2U8SU1ldGE+KTogTVByb21pc2U8SU1ldGE+ID0+e1xyXG4gICAgcmV0dXJuIGRvT25seUFmdGVyUmVzb2x2ZSh3LCAod3JhcDogYW55KT0+e1xyXG4gICAgICAgIGNvbnN0IHB0ID0gcHJlcGFyZSh3cmFwKTtcclxuICAgICAgICByZXR1cm4gKChwdD8uW09SRy51dWlkXXx8cHQ/LltPUkcudHlwZV0pIGFzIHN0cmluZ3xudWxsKT9wdDpudWxsO1xyXG4gICAgfSk7XHJcbn1cclxuXHJcbi8qQF9fTUFOR0xFX1BST1BfXyovIFxyXG5leHBvcnQgY29uc3QgZXh0cmFjdCA9IDxUIGV4dGVuZHMgdW5rbm93bj4odzogSVdyYXA8VD58TVByb21pc2U8VD58TVByb21pc2U8SU1ldGE+KTogTVByb21pc2U8SU1ldGE+ID0+e1xyXG4gICAgcmV0dXJuIGRvT25seUFmdGVyUmVzb2x2ZSh3LCAod3JhcDogYW55KT0+e1xyXG4gICAgICAgIGNvbnN0IHB0ID0gcHJlcGFyZSh3cmFwKTtcclxuICAgICAgICByZXR1cm4gKChwdD8uW09SRy51dWlkXXx8cHQ/LltPUkcudHlwZV0gYXMgc3RyaW5nfG51bGwpKT9wdDpudWxsO1xyXG4gICAgfSk7XHJcbn1cclxuIl19","// deno-lint-ignore-file no-explicit-any\n/*@__PURE__*/ export var $ORG;\n(function ($ORG) {\n    $ORG[\"type\"] = \"!#type#!\";\n    $ORG[\"uuid\"] = \"!#uuid#!\";\n    $ORG[\"node\"] = \"!#node#!\";\n    $ORG[\"payload\"] = \"!#payload#!\";\n    $ORG[\"index\"] = \"!#index#!\";\n    $ORG[\"exc\"] = \"!#exc#!\";\n})($ORG || ($ORG = {}));\n//\n/*@__MANGLE_PROP__*/ const $exc$ = /*@__MANGLE_PROP__*/ Symbol(\"@exc\");\n/*@__MANGLE_PROP__*/ const $data$ = /*@__MANGLE_PROP__*/ Symbol(\"@data\");\n/*@__MANGLE_PROP__*/ const $sync$ = /*@__MANGLE_PROP__*/ Symbol(\"@sync\");\n/*@__MANGLE_PROP__*/\nexport const ORG = {\n    /*@__MANGLE_PROP__*/ sync: $sync$,\n    /*@__MANGLE_PROP__*/ exc: $exc$,\n    data: $data$,\n    type: $ORG.type,\n    uuid: $ORG.uuid,\n    node: $ORG.node,\n    payload: $ORG.payload,\n    index: $ORG.index\n};\n;\n//\n/*@__MANGLE_PROP__*/ /*@__PURE__*/ export default ORG;\n/*@__MANGLE_PROP__*/ /*@__PURE__*/ export const $bindings$ = /*@__MANGLE_PROP__*/ new WeakMap();\n/*@__MANGLE_PROP__*/ /*@__PURE__*/ export const bindWithContext = (context, obj) => {\n    try {\n        context[ORG.exc] = obj;\n    }\n    catch (e) {\n        console.warn(e);\n    }\n    ;\n    /*@__MANGLE_PROP__*/ /*@__PURE__*/ $bindings$.set(context, obj);\n    return obj;\n};\n//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiT3JnYW5pY1R5cGUuanMiLCJzb3VyY2VSb290IjoiIiwic291cmNlcyI6WyJPcmdhbmljVHlwZS50cyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiQUFBQSx3Q0FBd0M7QUFFeEMsYUFBYSxDQUFDLE1BQU0sQ0FBTixJQUFZLElBT3pCO0FBUGEsV0FBWSxJQUFJO0lBQzFCLHlCQUFpQixDQUFBO0lBQ2pCLHlCQUFpQixDQUFBO0lBQ2pCLHlCQUFpQixDQUFBO0lBQ2pCLCtCQUF1QixDQUFBO0lBQ3ZCLDJCQUFtQixDQUFBO0lBQ25CLHVCQUFlLENBQUE7QUFDbkIsQ0FBQyxFQVB5QixJQUFJLEtBQUosSUFBSSxRQU83QjtBQUVELEVBQUU7QUFDRixvQkFBb0IsQ0FBQyxNQUFNLEtBQUssR0FBSSxvQkFBb0IsQ0FBQyxNQUFNLENBQUMsTUFBTSxDQUFDLENBQUM7QUFDeEUsb0JBQW9CLENBQUMsTUFBTSxNQUFNLEdBQUcsb0JBQW9CLENBQUMsTUFBTSxDQUFDLE9BQU8sQ0FBQyxDQUFDO0FBQ3pFLG9CQUFvQixDQUFDLE1BQU0sTUFBTSxHQUFHLG9CQUFvQixDQUFDLE1BQU0sQ0FBQyxPQUFPLENBQUMsQ0FBQztBQUV6RSxvQkFBb0I7QUFDcEIsTUFBTSxDQUFDLE1BQU0sR0FBRyxHQUFHO0lBQ2Ysb0JBQW9CLENBQUMsSUFBSSxFQUFFLE1BQU07SUFDakMsb0JBQW9CLENBQUMsR0FBRyxFQUFFLEtBQUs7SUFDL0IsSUFBSSxFQUFFLE1BQU07SUFDWixJQUFJLEVBQUUsSUFBSSxDQUFDLElBQUk7SUFDZixJQUFJLEVBQUUsSUFBSSxDQUFDLElBQUk7SUFDZixJQUFJLEVBQUUsSUFBSSxDQUFDLElBQUk7SUFDZixPQUFPLEVBQUUsSUFBSSxDQUFDLE9BQU87SUFDckIsS0FBSyxFQUFFLElBQUksQ0FBQyxLQUFLO0NBQ3BCLENBQUE7QUFRQSxDQUFDO0FBRUYsRUFBRTtBQUNGLG9CQUFvQixDQUFDLGFBQWEsQ0FBQyxlQUFlLEdBQUcsQ0FBQztBQUN0RCxvQkFBb0IsQ0FBQyxhQUFhLENBQUMsTUFBTSxDQUFDLE1BQU0sVUFBVSxHQUFHLG9CQUFvQixDQUFDLElBQUksT0FBTyxFQUFZLENBQUM7QUFDMUcsb0JBQW9CLENBQUMsYUFBYSxDQUFDLE1BQU0sQ0FBQyxNQUFNLGVBQWUsR0FBRyxDQUFDLE9BQVksRUFBRSxHQUFRLEVBQUUsRUFBRTtJQUN6RixJQUFJLENBQUM7UUFBQyxPQUFPLENBQUMsR0FBRyxDQUFDLEdBQUcsQ0FBQyxHQUFHLEdBQUcsQ0FBQztJQUFDLENBQUM7SUFBQyxPQUFNLENBQU0sRUFBRSxDQUFDO1FBQUMsT0FBTyxDQUFDLElBQUksQ0FBQyxDQUFDLENBQUMsQ0FBQztJQUFDLENBQUM7SUFBQSxDQUFDO0lBQ25FLG9CQUFvQixDQUFDLGFBQWEsQ0FBQyxVQUFVLENBQUMsR0FBRyxDQUFDLE9BQU8sRUFBRSxHQUFHLENBQUMsQ0FBQztJQUNoRSxPQUFPLEdBQUcsQ0FBQztBQUNmLENBQUMsQ0FBQSIsInNvdXJjZXNDb250ZW50IjpbIi8vIGRlbm8tbGludC1pZ25vcmUtZmlsZSBuby1leHBsaWNpdC1hbnlcclxuXHJcbi8qQF9fUFVSRV9fKi8gZXhwb3J0IGVudW0gJE9SRyB7XHJcbiAgICB0eXBlID0gXCIhI3R5cGUjIVwiLFxyXG4gICAgdXVpZCA9IFwiISN1dWlkIyFcIixcclxuICAgIG5vZGUgPSBcIiEjbm9kZSMhXCIsXHJcbiAgICBwYXlsb2FkID0gXCIhI3BheWxvYWQjIVwiLFxyXG4gICAgaW5kZXggPSBcIiEjaW5kZXgjIVwiLFxyXG4gICAgZXhjID0gXCIhI2V4YyMhXCJcclxufVxyXG5cclxuLy9cclxuLypAX19NQU5HTEVfUFJPUF9fKi8gY29uc3QgJGV4YyQgID0gLypAX19NQU5HTEVfUFJPUF9fKi8gU3ltYm9sKFwiQGV4Y1wiKTtcclxuLypAX19NQU5HTEVfUFJPUF9fKi8gY29uc3QgJGRhdGEkID0gLypAX19NQU5HTEVfUFJPUF9fKi8gU3ltYm9sKFwiQGRhdGFcIik7XHJcbi8qQF9fTUFOR0xFX1BST1BfXyovIGNvbnN0ICRzeW5jJCA9IC8qQF9fTUFOR0xFX1BST1BfXyovIFN5bWJvbChcIkBzeW5jXCIpO1xyXG5cclxuLypAX19NQU5HTEVfUFJPUF9fKi8gXHJcbmV4cG9ydCBjb25zdCBPUkcgPSB7XHJcbiAgICAvKkBfX01BTkdMRV9QUk9QX18qLyBzeW5jOiAkc3luYyQsXHJcbiAgICAvKkBfX01BTkdMRV9QUk9QX18qLyBleGM6ICRleGMkLFxyXG4gICAgZGF0YTogJGRhdGEkLFxyXG4gICAgdHlwZTogJE9SRy50eXBlLFxyXG4gICAgdXVpZDogJE9SRy51dWlkLFxyXG4gICAgbm9kZTogJE9SRy5ub2RlLFxyXG4gICAgcGF5bG9hZDogJE9SRy5wYXlsb2FkLFxyXG4gICAgaW5kZXg6ICRPUkcuaW5kZXhcclxufVxyXG5cclxuLypAX19QVVJFX18qLyBleHBvcnQgaW50ZXJmYWNlIElNZXRhIHtcclxuICAgIFskT1JHLnV1aWRdPzogc3RyaW5nO1xyXG4gICAgWyRPUkcudHlwZV0/OiBzdHJpbmc7XHJcbiAgICBbJE9SRy5ub2RlXT86IHVua25vd247XHJcbiAgICBbJE9SRy5wYXlsb2FkXT86IHVua25vd247XHJcbiAgICBbJE9SRy5pbmRleF0/OiBudW1iZXI7XHJcbn07XHJcblxyXG4vL1xyXG4vKkBfX01BTkdMRV9QUk9QX18qLyAvKkBfX1BVUkVfXyovIGV4cG9ydCBkZWZhdWx0IE9SRztcclxuLypAX19NQU5HTEVfUFJPUF9fKi8gLypAX19QVVJFX18qLyBleHBvcnQgY29uc3QgJGJpbmRpbmdzJCA9IC8qQF9fTUFOR0xFX1BST1BfXyovIG5ldyBXZWFrTWFwPGFueSwgYW55PigpO1xyXG4vKkBfX01BTkdMRV9QUk9QX18qLyAvKkBfX1BVUkVfXyovIGV4cG9ydCBjb25zdCBiaW5kV2l0aENvbnRleHQgPSAoY29udGV4dDogYW55LCBvYmo6IGFueSkgPT4ge1xyXG4gICAgdHJ5IHsgY29udGV4dFtPUkcuZXhjXSA9IG9iajsgfSBjYXRjaChlOiBhbnkpIHsgY29uc29sZS53YXJuKGUpOyB9O1xyXG4gICAgLypAX19NQU5HTEVfUFJPUF9fKi8gLypAX19QVVJFX18qLyAkYmluZGluZ3MkLnNldChjb250ZXh0LCBvYmopO1xyXG4gICAgcmV0dXJuIG9iajtcclxufVxyXG4iXX0=","// deno-lint-ignore-file no-explicit-any\nimport { UUIDv4 } from \"./Useful\";\n/*@__NOINLINE__*/ const rg = \"register\";\n/*@__MANGLE_PROP__*/ const timers = /*@__MANGLE_PROP__*/ new WeakMap(), tmpSet = new Set();\nexport const hold = (tmp, timeout = 1000) => {\n    // holding from GC\n    /*@__MANGLE_PROP__*/\n    if (typeof tmp == \"object\" || typeof tmp == \"function\") {\n        const obj = tmp?.deref?.() ?? tmp;\n        if (!tmpSet.has(obj)) {\n            tmpSet.add(obj);\n            timers.set(obj, setTimeout((obj) => { return tmpSet.delete(obj); }, timeout, obj));\n        }\n    }\n    //\n    return tmp?.deref?.() ?? tmp;\n};\n// TODO: planned promised...\n/*@__MANGLE_PROP__*/ /*@__PURE___*/\nexport default class UUIDMap {\n    /*@__MANGLE_PROP__*/ #weakMap = /*@__MANGLE_PROP__*/ new WeakMap();\n    /*@__MANGLE_PROP__*/ #refMap = /*@__MANGLE_PROP__*/ new Map();\n    /*@__MANGLE_PROP__*/ #registry = /*@__MANGLE_PROP__*/ new FinalizationRegistry((_) => { });\n    //\n    constructor() {\n        /*@__MANGLE_PROP__*/ this.#weakMap = /*@__MANGLE_PROP__*/ new WeakMap();\n        /*@__MANGLE_PROP__*/ this.#refMap = /*@__MANGLE_PROP__*/ new Map();\n        /*@__MANGLE_PROP__*/ this.#registry = /*@__MANGLE_PROP__*/ new FinalizationRegistry((key) => {\n            this.#refMap.delete(key);\n        });\n    }\n    // when transfer out required\n    delete(key) {\n        if (typeof key == \"object\" || typeof key == \"function\") {\n            return this.#weakMap.delete(key);\n        }\n        return this.#refMap.delete(key);\n    }\n    //\n    add(obj, id = \"\", force = false) {\n        if (!(typeof obj == \"object\" || typeof obj == \"function\"))\n            return obj;\n        // never override already added, except transfer cases\n        if (id && this.#refMap.has(id) && !force) {\n            return id;\n        }\n        ;\n        //\n        if (this.#weakMap.has(obj)) {\n            return this.#weakMap.get(obj);\n        }\n        //\n        this.#weakMap.set(obj, (id ||= UUIDv4()));\n        this.#refMap.set(id, new WeakRef(hold(obj, 1000)));\n        this.#registry?.[rg]?.(obj, id);\n        //\n        return id;\n    }\n    //\n    get(key) {\n        if (typeof key == \"object\" || typeof key == \"function\") {\n            return this.#weakMap.get(key);\n        }\n        return hold(this.#refMap.get(key));\n    }\n}\n//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiVVVJRE1hcC5qcyIsInNvdXJjZVJvb3QiOiIiLCJzb3VyY2VzIjpbIlVVSURNYXAudHMiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IkFBQUEsd0NBQXdDO0FBQ3hDLE9BQU8sRUFBRSxNQUFNLEVBQW9CLE1BQU0sVUFBVSxDQUFDO0FBQ3BELGlCQUFpQixDQUFDLE1BQU0sRUFBRSxHQUFHLFVBQVUsQ0FBQztBQUV4QyxvQkFBb0IsQ0FBQyxNQUFNLE1BQU0sR0FBRyxvQkFBb0IsQ0FBQyxJQUFJLE9BQU8sRUFBRSxFQUFFLE1BQU0sR0FBRyxJQUFJLEdBQUcsRUFBRSxDQUFDO0FBQzNGLE1BQU0sQ0FBQyxNQUFNLElBQUksR0FBRyxDQUFDLEdBQWlDLEVBQUUsT0FBTyxHQUFHLElBQUksRUFBQyxFQUFFO0lBRXJFLGtCQUFrQjtJQUNsQixvQkFBb0I7SUFDcEIsSUFBSSxPQUFPLEdBQUcsSUFBSSxRQUFRLElBQUksT0FBTyxHQUFHLElBQUksVUFBVSxFQUFFLENBQUM7UUFDckQsTUFBTSxHQUFHLEdBQUcsR0FBRyxFQUFFLEtBQUssRUFBRSxFQUFFLElBQUksR0FBRyxDQUFDO1FBQ2xDLElBQUksQ0FBQyxNQUFNLENBQUMsR0FBRyxDQUFDLEdBQUcsQ0FBQyxFQUFFLENBQUM7WUFDbkIsTUFBTSxDQUFDLEdBQUcsQ0FBQyxHQUFHLENBQUMsQ0FBQztZQUNoQixNQUFNLENBQUMsR0FBRyxDQUFDLEdBQUcsRUFBRSxVQUFVLENBQ3RCLENBQUMsR0FBRyxFQUFFLEVBQUUsR0FBRyxPQUFPLE1BQU0sQ0FBQyxNQUFNLENBQUMsR0FBRyxDQUFDLENBQUMsQ0FBQyxDQUFDLEVBQ3ZDLE9BQU8sRUFDUCxHQUFHLENBQ04sQ0FBQyxDQUFDO1FBQ1AsQ0FBQztJQUNMLENBQUM7SUFFRCxFQUFFO0lBQ0YsT0FBTyxHQUFHLEVBQUUsS0FBSyxFQUFFLEVBQUUsSUFBSSxHQUFHLENBQUM7QUFDakMsQ0FBQyxDQUFBO0FBRUQsNEJBQTRCO0FBQzVCLG9CQUFvQixDQUFDLGNBQWM7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QUM7Q0FDSiIsInNvdXJjZXNDb250ZW50IjpbIi8vIGRlbm8tbGludC1pZ25vcmUtZmlsZSBuby1leHBsaWNpdC1hbnlcclxuaW1wb3J0IHsgVVVJRHY0LCB0eXBlIGRULCB0eXBlIHJUIH0gZnJvbSBcIi4vVXNlZnVsXCI7XHJcbi8qQF9fTk9JTkxJTkVfXyovIGNvbnN0IHJnID0gXCJyZWdpc3RlclwiO1xyXG5cclxuLypAX19NQU5HTEVfUFJPUF9fKi8gY29uc3QgdGltZXJzID0gLypAX19NQU5HTEVfUFJPUF9fKi8gbmV3IFdlYWtNYXAoKSwgdG1wU2V0ID0gbmV3IFNldCgpO1xyXG5leHBvcnQgY29uc3QgaG9sZCA9ICh0bXA6IGFueSB8IHVua25vd24gfCBXZWFrUmVmPGFueT4sIHRpbWVvdXQgPSAxMDAwKT0+e1xyXG5cclxuICAgIC8vIGhvbGRpbmcgZnJvbSBHQ1xyXG4gICAgLypAX19NQU5HTEVfUFJPUF9fKi9cclxuICAgIGlmICh0eXBlb2YgdG1wID09IFwib2JqZWN0XCIgfHwgdHlwZW9mIHRtcCA9PSBcImZ1bmN0aW9uXCIpIHtcclxuICAgICAgICBjb25zdCBvYmogPSB0bXA/LmRlcmVmPy4oKSA/PyB0bXA7XHJcbiAgICAgICAgaWYgKCF0bXBTZXQuaGFzKG9iaikpIHtcclxuICAgICAgICAgICAgdG1wU2V0LmFkZChvYmopO1xyXG4gICAgICAgICAgICB0aW1lcnMuc2V0KG9iaiwgc2V0VGltZW91dChcclxuICAgICAgICAgICAgICAgIChvYmopID0+IHsgcmV0dXJuIHRtcFNldC5kZWxldGUob2JqKTsgfSxcclxuICAgICAgICAgICAgICAgIHRpbWVvdXQsXHJcbiAgICAgICAgICAgICAgICBvYmpcclxuICAgICAgICAgICAgKSk7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIC8vXHJcbiAgICByZXR1cm4gdG1wPy5kZXJlZj8uKCkgPz8gdG1wO1xyXG59XHJcblxyXG4vLyBUT0RPOiBwbGFubmVkIHByb21pc2VkLi4uXHJcbi8qQF9fTUFOR0xFX1BST1BfXyovIC8qQF9fUFVSRV9fXyovIFxyXG5leHBvcnQgZGVmYXVsdCBjbGFzcyBVVUlETWFwPFQ9ZFQ+IHtcclxuICAgIC8qQF9fTUFOR0xFX1BST1BfXyovICN3ZWFrTWFwICA9IC8qQF9fTUFOR0xFX1BST1BfXyovIG5ldyBXZWFrTWFwPGRULCBzdHJpbmc+KCk7XHJcbiAgICAvKkBfX01BTkdMRV9QUk9QX18qLyAjcmVmTWFwICAgPSAvKkBfX01BTkdMRV9QUk9QX18qLyBuZXcgTWFwPHN0cmluZywgclQ+KCk7XHJcbiAgICAvKkBfX01BTkdMRV9QUk9QX18qLyAjcmVnaXN0cnkgPSAvKkBfX01BTkdMRV9QUk9QX18qLyBuZXcgRmluYWxpemF0aW9uUmVnaXN0cnk8c3RyaW5nPigoXzogc3RyaW5nKSA9PiB7fSk7XHJcblxyXG4gICAgLy9cclxuICAgIGNvbnN0cnVjdG9yKCkge1xyXG4gICAgICAgIC8qQF9fTUFOR0xFX1BST1BfXyovIHRoaXMuI3dlYWtNYXAgID0gLypAX19NQU5HTEVfUFJPUF9fKi8gbmV3IFdlYWtNYXA8ZFQsIHN0cmluZz4oKTtcclxuICAgICAgICAvKkBfX01BTkdMRV9QUk9QX18qLyB0aGlzLiNyZWZNYXAgICA9IC8qQF9fTUFOR0xFX1BST1BfXyovIG5ldyBNYXA8c3RyaW5nLCByVD4oKTtcclxuICAgICAgICAvKkBfX01BTkdMRV9QUk9QX18qLyB0aGlzLiNyZWdpc3RyeSA9IC8qQF9fTUFOR0xFX1BST1BfXyovIG5ldyBGaW5hbGl6YXRpb25SZWdpc3RyeTxzdHJpbmc+KChrZXk6IHN0cmluZykgPT4ge1xyXG4gICAgICAgICAgICB0aGlzLiNyZWZNYXAuZGVsZXRlKGtleSk7XHJcbiAgICAgICAgfSk7XHJcbiAgICB9XHJcblxyXG4gICAgLy8gd2hlbiB0cmFuc2ZlciBvdXQgcmVxdWlyZWRcclxuICAgIGRlbGV0ZTxSIGV4dGVuZHMgZFQgfCBzdHJpbmc+KGtleTogUik6IHVua25vd24ge1xyXG4gICAgICAgIGlmICh0eXBlb2Yga2V5ID09IFwib2JqZWN0XCIgfHwgdHlwZW9mIGtleSA9PSBcImZ1bmN0aW9uXCIpIHtcclxuICAgICAgICAgICAgcmV0dXJuIHRoaXMuI3dlYWtNYXAuZGVsZXRlKDxkVD4oPHVua25vd24+a2V5KSk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHJldHVybiB0aGlzLiNyZWZNYXAuZGVsZXRlKDxzdHJpbmc+KDx1bmtub3duPmtleSkpO1xyXG4gICAgfVxyXG5cclxuICAgIC8vXHJcbiAgICBhZGQob2JqOiBkVCwgaWQ6IHN0cmluZyA9IFwiXCIsIGZvcmNlID0gZmFsc2UpIHtcclxuICAgICAgICBpZiAoISh0eXBlb2Ygb2JqID09IFwib2JqZWN0XCIgfHwgdHlwZW9mIG9iaiA9PSBcImZ1bmN0aW9uXCIpKSByZXR1cm4gb2JqO1xyXG5cclxuICAgICAgICAvLyBuZXZlciBvdmVycmlkZSBhbHJlYWR5IGFkZGVkLCBleGNlcHQgdHJhbnNmZXIgY2FzZXNcclxuICAgICAgICBpZiAoaWQgJiYgdGhpcy4jcmVmTWFwLmhhcyhpZCkgJiYgIWZvcmNlKSB7IHJldHVybiBpZDsgfTtcclxuXHJcbiAgICAgICAgLy9cclxuICAgICAgICBpZiAodGhpcy4jd2Vha01hcC5oYXMob2JqKSkge1xyXG4gICAgICAgICAgICByZXR1cm4gdGhpcy4jd2Vha01hcC5nZXQob2JqKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIC8vXHJcbiAgICAgICAgdGhpcy4jd2Vha01hcC5zZXQob2JqLCAoaWQgfHw9IFVVSUR2NCgpKSk7XHJcbiAgICAgICAgdGhpcy4jcmVmTWFwLnNldChpZCwgbmV3IFdlYWtSZWY8ZFQ+KCAgaG9sZChvYmosIDEwMDApICApKTtcclxuICAgICAgICB0aGlzLiNyZWdpc3RyeT8uW3JnXT8uKG9iaiwgaWQpO1xyXG5cclxuICAgICAgICAvL1xyXG4gICAgICAgIHJldHVybiBpZDtcclxuICAgIH1cclxuXHJcbiAgICAvL1xyXG4gICAgZ2V0PFIgZXh0ZW5kcyBkVCB8IHN0cmluZz4oa2V5OiBSKTogdW5rbm93biB7XHJcbiAgICAgICAgaWYgKHR5cGVvZiBrZXkgPT0gXCJvYmplY3RcIiB8fCB0eXBlb2Yga2V5ID09IFwiZnVuY3Rpb25cIikge1xyXG4gICAgICAgICAgICByZXR1cm4gdGhpcy4jd2Vha01hcC5nZXQoPGRUPig8dW5rbm93bj5rZXkpKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgcmV0dXJuIGhvbGQodGhpcy4jcmVmTWFwLmdldCg8c3RyaW5nPig8dW5rbm93bj5rZXkpKSk7XHJcbiAgICB9XHJcbn1cclxuIl19","// deno-lint-ignore-file no-explicit-any ban-types\nimport { PMS, TS } from \"./Alias\";\nimport ORG, { $bindings$ } from \"./OrganicType\";\n/*@__MANGLE_PROP__*/ export const UUIDv4 = () => {\n    return (crypto?.randomUUID ? crypto?.randomUUID() : (\"10000000-1000-4000-8000-100000000000\".replace(/[018]/g, c => (+c ^ (crypto.getRandomValues(new Uint8Array(1))[0] & (15 >> (+c / 4)))).toString(16))));\n};\n/*\n * Internal types of meta\n * [\"@meta\"|\"@data\"]: {\n *   !type: string, // interpretation type (how will resolved)\n *   !uuid: string, // located in remote storage pool\n *   !payload: any, // additional descriptions\n *   !index: number // located in transferable list\n * }\n */\n// If someone not in list, will just copy or sharing\n// @ts-ignore \"Transferable list for web workers (automatic)\"\n/*@__MANGLE_PROP__*/ /*@__PURE__*/\nexport const Transferable = [\n    /* @ts-ignore \"\" */ /*@__MANGLE_PROP__*/ /*@__PURE__*/ typeof ArrayBuffer != TS.udf ? ArrayBuffer : null,\n    /* @ts-ignore \"\" */ /*@__MANGLE_PROP__*/ /*@__PURE__*/ typeof MessagePort != TS.udf ? MessagePort : null,\n    /* @ts-ignore \"\" */ /*@__MANGLE_PROP__*/ /*@__PURE__*/ typeof ReadableStream != TS.udf ? ReadableStream : null,\n    /* @ts-ignore \"\" */ /*@__MANGLE_PROP__*/ /*@__PURE__*/ typeof WritableStream != TS.udf ? WritableStream : null,\n    /* @ts-ignore \"\" */ /*@__MANGLE_PROP__*/ /*@__PURE__*/ typeof TransformStream != TS.udf ? TransformStream : null,\n    /* @ts-ignore \"\" */ /*@__MANGLE_PROP__*/ /*@__PURE__*/ typeof WebTransportReceiveStream != TS.udf ? WebTransportReceiveStream : null,\n    /* @ts-ignore \"\" */ /*@__MANGLE_PROP__*/ /*@__PURE__*/ typeof WebTransportSendStream != TS.udf ? WebTransportSendStream : null,\n    /* @ts-ignore \"\" */ /*@__MANGLE_PROP__*/ /*@__PURE__*/ typeof AudioData != TS.udf ? AudioData : null,\n    /* @ts-ignore \"\" */ /*@__MANGLE_PROP__*/ /*@__PURE__*/ typeof ImageBitmap != TS.udf ? ImageBitmap : null,\n    /* @ts-ignore \"\" */ /*@__MANGLE_PROP__*/ /*@__PURE__*/ typeof VideoFrame != TS.udf ? VideoFrame : null,\n    /* @ts-ignore \"\" */ /*@__MANGLE_PROP__*/ /*@__PURE__*/ typeof OffscreenCanvas != TS.udf ? OffscreenCanvas : null,\n    /* @ts-ignore \"\" */ /*@__MANGLE_PROP__*/ /*@__PURE__*/ typeof RTCDataChannel != TS.udf ? RTCDataChannel : null\n].filter((E) => (E != null));\n/*@__MANGLE_PROP__*/ export const isSymbol = (sym) => (typeof sym === 'symbol' || typeof sym == 'object' && Object.prototype.toString.call(sym) == '[object Symbol]');\n/*@__MANGLE_PROP__*/ export const FORBIDDEN_KEYS = new Set([\"bind\", \"toString\", \"then\", \"catch\", \"finally\"]);\n/*@__MANGLE_PROP__*/ export const META_KEYS = new Set(Array.from(Object.values(ORG)));\n/*@__MANGLE_PROP__*/ export const wrapExChanger = (exChanger) => {\n    if (!exChanger)\n        return null;\n    //\n    return new Proxy(exChanger, {\n        get(target, prop) {\n            if (prop == ORG.sync) {\n                return target.sync;\n            }\n            ;\n            if (prop == ORG.exc) {\n                return target;\n            }\n            ;\n            if ( // forbidden actions\n            isSymbol(prop) ||\n                FORBIDDEN_KEYS.has(prop) ||\n                META_KEYS?.has?.(prop)) {\n                return null;\n            }\n            ;\n            return target?.access?.(prop);\n        },\n        set(target, prop, value) {\n            return target?.register?.(value, prop);\n        }\n    });\n};\n/*@__MANGLE_PROP__*/ export const isPromise = (target) => {\n    return target instanceof PMS || target?.then != null && typeof target?.then == \"function\";\n};\n/*@__MANGLE_PROP__*/ export const doOnlyAfterResolve = (meta, cb) => {\n    if (isPromise(meta)) {\n        const chain = meta?.then?.(cb)?.catch?.(console.trace.bind(console)) ?? cb(meta);\n        //console.trace(chain);\n        return chain;\n    }\n    return cb(meta);\n};\nexport const getContext = (wModule) => {\n    return doOnlyAfterResolve(wModule, (mx) => {\n        return wrapExChanger(mx?.[ORG.exc] ?? $bindings$?.get?.(mx) ?? mx);\n    });\n};\nexport const doTransfer = (wModule, name, node = null) => {\n    return doOnlyAfterResolve(wModule, (mx) => {\n        const exChanger = mx?.[ORG.exc] ?? $bindings$?.get?.(mx) ?? mx;\n        return exChanger?.doTransfer?.(name, node);\n    });\n};\nexport const transfer = (wModule, node = null, name = \"\") => {\n    return doOnlyAfterResolve(wModule, (mx) => {\n        const exChanger = mx?.[ORG.exc] ?? $bindings$?.get?.(mx) ?? mx;\n        return exChanger?.transfer?.(node, name);\n    });\n};\nexport { ORG };\n//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiVXNlZnVsLmpzIiwic291cmNlUm9vdCI6IiIsInNvdXJjZXMiOlsiVXNlZnVsLnRzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiJBQUFBLGtEQUFrRDtBQUNqRCxPQUFPLEVBQUUsR0FBRyxFQUFFLEVBQUUsRUFBRSxNQUFNLFNBQVMsQ0FBQztBQUNsQyxPQUFPLEdBQUcsRUFBRSxFQUFFLFVBQVUsRUFBYSxNQUFNLGVBQWUsQ0FBQztBQUc1RCxvQkFBb0IsQ0FBQyxNQUFNLENBQUMsTUFBTSxNQUFNLEdBQUcsR0FBRyxFQUFFO0lBQzVDLE9BQU8sQ0FBQyxNQUFNLEVBQUUsVUFBVSxDQUFDLENBQUMsQ0FBQyxNQUFNLEVBQUUsVUFBVSxFQUFFLENBQUMsQ0FBQyxDQUFDLENBQUMsc0NBQXNDLENBQUMsT0FBTyxDQUFDLFFBQVEsRUFBRSxDQUFDLENBQUMsRUFBRSxDQUFDLENBQUMsQ0FBQyxDQUFDLEdBQUcsQ0FBQyxNQUFNLENBQUMsZUFBZSxDQUFDLElBQUksVUFBVSxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLEdBQUcsQ0FBQyxFQUFFLElBQUksQ0FBQyxDQUFDLENBQUMsR0FBRyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxRQUFRLENBQUMsRUFBRSxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUM7QUFDaE4sQ0FBQyxDQUFDO0FBWUY7Ozs7Ozs7O0dBUUc7QUFFSCxvREFBb0Q7QUFDcEQsNkRBQTZEO0FBQzdELG9CQUFvQixDQUFDLGFBQWE7QUFDbEMsTUFBTSxDQUFDLE1BQU0sWUFBWSxHQUFHO0lBQ3hCLG1CQUFtQixDQUFDLG9CQUFvQixDQUFDLGFBQWEsQ0FBQyxPQUFPLFdBQVcsSUFBa0IsRUFBRSxDQUFDLEdBQUcsQ0FBQyxDQUFDLENBQUMsV0FBVyxDQUFlLENBQUMsQ0FBQyxJQUFJO0lBQ3BJLG1CQUFtQixDQUFDLG9CQUFvQixDQUFDLGFBQWEsQ0FBQyxPQUFPLFdBQVcsSUFBa0IsRUFBRSxDQUFDLEdBQUcsQ0FBQyxD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SUFBSSxFQUFFLE9BQVksRUFBRSxFQUFDLEVBQUU7SUFDM0UsT0FBTyxrQkFBa0IsQ0FBQyxPQUFPLEVBQUUsQ0FBQyxFQUFFLEVBQUMsRUFBRTtRQUNyQyxNQUFNLFNBQVMsR0FBRyxFQUFFLEVBQUUsQ0FBQyxHQUFHLENBQUMsR0FBRyxDQUFDLElBQUksVUFBVSxFQUFFLEdBQUcsRUFBRSxDQUFDLEVBQUUsQ0FBQyxJQUFJLEVBQUUsQ0FBQztRQUMvRCxPQUFPLFNBQVMsRUFBRSxRQUFRLEVBQUUsQ0FBQyxJQUFJLEVBQUUsSUFBSSxDQUFDLENBQUM7SUFDN0MsQ0FBQyxDQUFDLENBQUM7QUFDUCxDQUFDLENBQUE7QUFHRCxPQUFPLEVBQUUsR0FBRyxFQUFFLENBQUMiLCJzb3VyY2VzQ29udGVudCI6WyIvLyBkZW5vLWxpbnQtaWdub3JlLWZpbGUgbm8tZXhwbGljaXQtYW55IGJhbi10eXBlc1xyXG4gaW1wb3J0IHsgUE1TLCBUUyB9IGZyb20gXCIuL0FsaWFzXCI7XHJcbiBpbXBvcnQgT1JHLCB7ICRiaW5kaW5ncyQsIHR5cGUgJE9SRyB9IGZyb20gXCIuL09yZ2FuaWNUeXBlXCI7XHJcblxyXG5cclxuLypAX19NQU5HTEVfUFJPUF9fKi8gZXhwb3J0IGNvbnN0IFVVSUR2NCA9ICgpID0+IHtcclxuICAgIHJldHVybiAoY3J5cHRvPy5yYW5kb21VVUlEID8gY3J5cHRvPy5yYW5kb21VVUlEKCkgOiAoXCIxMDAwMDAwMC0xMDAwLTQwMDAtODAwMC0xMDAwMDAwMDAwMDBcIi5yZXBsYWNlKC9bMDE4XS9nLCBjID0+ICgrYyBeIChjcnlwdG8uZ2V0UmFuZG9tVmFsdWVzKG5ldyBVaW50OEFycmF5KDEpKVswXSAmICgxNSA+PiAoK2MgLyA0KSkpKS50b1N0cmluZygxNikpKSk7XHJcbn07XHJcblxyXG4vKkBfX01BTkdMRV9QUk9QX18qLyAvKkBfX1BVUkVfX18qLyBleHBvcnQgdHlwZSBkVCA9IG9iamVjdCB8IEZ1bmN0aW9uO1xyXG4vKkBfX01BTkdMRV9QUk9QX18qLyAvKkBfX1BVUkVfX18qLyBleHBvcnQgdHlwZSByVCA9IC8qQF9fTUFOR0xFX1BST1BfXyovIFdlYWtSZWY8ZFQ+O1xyXG4vKkBfX01BTkdMRV9QUk9QX18qLyAvKkBfX1BVUkVfX18qLyBleHBvcnQgdHlwZSBNUHJvbWlzZTxUIGV4dGVuZHMgdW5rbm93bj4gPSBQcm9taXNlPFQ+fFR8bnVsbDtcclxuLypAX19NQU5HTEVfUFJPUF9fKi8gLypAX19QVVJFX19fKi8gZXhwb3J0IHR5cGUgSVdyYXA8VCBleHRlbmRzIHVua25vd24+ID0ge1xyXG4gICAgW3BUIGluIGtleW9mIFRdOiBNUHJvbWlzZTxwVD58SVdyYXA8cFQ+O1xyXG59O1xyXG5cclxuLy9cclxuLypAX19NQU5HTEVfUFJPUF9fKi8gLypAX19QVVJFX19fKi8gZXhwb3J0IHR5cGUgRXhDaGFuZ2VyID0gYW55O1xyXG5cclxuLypcclxuICogSW50ZXJuYWwgdHlwZXMgb2YgbWV0YVxyXG4gKiBbXCJAbWV0YVwifFwiQGRhdGFcIl06IHtcclxuICogICAhdHlwZTogc3RyaW5nLCAvLyBpbnRlcnByZXRhdGlvbiB0eXBlIChob3cgd2lsbCByZXNvbHZlZClcclxuICogICAhdXVpZDogc3RyaW5nLCAvLyBsb2NhdGVkIGluIHJlbW90ZSBzdG9yYWdlIHBvb2xcclxuICogICAhcGF5bG9hZDogYW55LCAvLyBhZGRpdGlvbmFsIGRlc2NyaXB0aW9uc1xyXG4gKiAgICFpbmRleDogbnVtYmVyIC8vIGxvY2F0ZWQgaW4gdHJhbnNmZXJhYmxlIGxpc3RcclxuICogfVxyXG4gKi9cclxuXHJcbi8vIElmIHNvbWVvbmUgbm90IGluIGxpc3QsIHdpbGwganVzdCBjb3B5IG9yIHNoYXJpbmdcclxuLy8gQHRzLWlnbm9yZSBcIlRyYW5zZmVyYWJsZSBsaXN0IGZvciB3ZWIgd29ya2VycyAoYXV0b21hdGljKVwiXHJcbi8qQF9fTUFOR0xFX1BST1BfXyovIC8qQF9fUFVSRV9fKi8gXHJcbmV4cG9ydCBjb25zdCBUcmFuc2ZlcmFibGUgPSBbXHJcbiAgICAvKiBAdHMtaWdub3JlIFwiXCIgKi8gLypAX19NQU5HTEVfUFJPUF9fKi8gLypAX19QVVJFX18qLyB0eXBlb2YgQXJyYXlCdWZmZXIgICAgICAgICAgICAgICAhPSBUUy51ZGYgPyBBcnJheUJ1ZmZlciAgICAgICAgICAgICAgIDogbnVsbCxcclxuICAgIC8qIEB0cy1pZ25vcmUgXCJcIiAqLyAvKkBfX01BTkdMRV9QUk9QX18qLyAvKkBfX1BVUkVfXyovIHR5cGVvZiBNZXNzYWdlUG9ydCAgICAgICAgICAgICAgICE9IFRTLnVkZiA/IE1lc3NhZ2VQb3J0ICAgICAgICAgICAgICAgOiBudWxsLFxyXG4gICAgLyogQHRzLWlnbm9yZSBcIlwiICovIC8qQF9fTUFOR0xFX1BST1BfXyovIC8qQF9fUFVSRV9fKi8gdHlwZW9mIFJlYWRhYmxlU3RyZWFtICAgICAgICAgICAgIT0gVFMudWRmID8gUmVhZGFibGVTdHJlYW0gICAgICAgICAgICA6IG51bGwsXHJcbiAgICAvKiBAdHMtaWdub3JlIFwiXCIgKi8gLypAX19NQU5HTEVfUFJPUF9fKi8gLypAX19QVVJFX18qLyB0eXBlb2YgV3JpdGFibGVTdHJlYW0gICAgICAgICAgICAhPSBUUy51ZGYgPyBXcml0YWJsZVN0cmVhbSAgICAgICAgICAgIDogbnVsbCxcclxuICAgIC8qIEB0cy1pZ25vcmUgXCJcIiAqLyAvKkBfX01BTkdMRV9QUk9QX18qLyAvKkBfX1BVUkVfXyovIHR5cGVvZiBUcmFuc2Zvcm1TdHJlYW0gICAgICAgICAgICE9IFRTLnVkZiA/IFRyYW5zZm9ybVN0cmVhbSAgICAgICAgICAgOiBudWxsLFxyXG4gICAgLyogQHRzLWlnbm9yZSBcIlwiICovIC8qQF9fTUFOR0xFX1BST1BfXyovIC8qQF9fUFVSRV9fKi8gdHlwZW9mIFdlYlRyYW5zcG9ydFJlY2VpdmVTdHJlYW0gIT0gVFMudWRmID8gV2ViVHJhbnNwb3J0UmVjZWl2ZVN0cmVhbSA6IG51bGwsXHJcbiAgICAvKiBAdHMtaWdub3JlIFwiXCIgKi8gLypAX19NQU5HTEVfUFJPUF9fKi8gLypAX19QVVJFX18qLyB0eXBlb2YgV2ViVHJhbnNwb3J0U2VuZFN0cmVhbSAgICAhPSBUUy51ZGYgPyBXZWJUcmFuc3BvcnRTZW5kU3RyZWFtICAgIDogbnVsbCxcclxuICAgIC8qIEB0cy1pZ25vcmUgXCJcIiAqLyAvKkBfX01BTkdMRV9QUk9QX18qLyAvKkBfX1BVUkVfXyovIHR5cGVvZiBBdWRpb0RhdGEgICAgICAgICAgICAgICAgICE9IFRTLnVkZiA/IEF1ZGlvRGF0YSAgICAgICAgICAgICAgICAgOiBudWxsLFxyXG4gICAgLyogQHRzLWlnbm9yZSBcIlwiICovIC8qQF9fTUFOR0xFX1BST1BfXyovIC8qQF9fUFVSRV9fKi8gdHlwZW9mIEltYWdlQml0bWFwICAgICAgICAgICAgICAgIT0gVFMudWRmID8gSW1hZ2VCaXRtYXAgICAgICAgICAgICAgICA6IG51bGwsXHJcbiAgICAvKiBAdHMtaWdub3JlIFwiXCIgKi8gLypAX19NQU5HTEVfUFJPUF9fKi8gLypAX19QVVJFX18qLyB0eXBlb2YgVmlkZW9GcmFtZSAgICAgICAgICAgICAgICAhPSBUUy51ZGYgPyBWaWRlb0ZyYW1lICAgICAgICAgICAgICAgIDogbnVsbCxcclxuICAgIC8qIEB0cy1pZ25vcmUgXCJcIiAqLyAvKkBfX01BTkdMRV9QUk9QX18qLyAvKkBfX1BVUkVfXyovIHR5cGVvZiBPZmZzY3JlZW5DYW52YXMgICAgICAgICAgICE9IFRTLnVkZiA/IE9mZnNjcmVlbkNhbnZhcyAgICAgICAgICAgOiBudWxsLFxyXG4gICAgLyogQHRzLWlnbm9yZSBcIlwiICovIC8qQF9fTUFOR0xFX1BST1BfXyovIC8qQF9fUFVSRV9fKi8gdHlwZW9mIFJUQ0RhdGFDaGFubmVsICAgICAgICAgICAgIT0gVFMudWRmID8gUlRDRGF0YUNoYW5uZWwgICAgICAgICAgICA6IG51bGxcclxuXS5maWx0ZXIoKEUpPT4oRSE9bnVsbCkpO1xyXG4gICAgLypAX19NQU5HTEVfUFJPUF9fKi8gZXhwb3J0IGNvbnN0IGlzU3ltYm9sID0gKHN5bTogdW5rbm93bik9Pih0eXBlb2Ygc3ltID09PSdzeW1ib2wnIHx8IHR5cGVvZiBzeW0gPT0gJ29iamVjdCcgJiYgT2JqZWN0LnByb3RvdHlwZS50b1N0cmluZy5jYWxsKHN5bSkgPT0gJ1tvYmplY3QgU3ltYm9sXScpO1xyXG4gICAgLypAX19NQU5HTEVfUFJPUF9fKi8gZXhwb3J0IGNvbnN0IEZPUkJJRERFTl9LRVlTID0gbmV3IFNldChbXCJiaW5kXCIsIFwidG9TdHJpbmdcIiwgXCJ0aGVuXCIsIFwiY2F0Y2hcIiwgXCJmaW5hbGx5XCJdKTtcclxuICAgIC8qQF9fTUFOR0xFX1BST1BfXyovIGV4cG9ydCBjb25zdCBNRVRBX0tFWVMgPSBuZXcgU2V0KEFycmF5LmZyb20oT2JqZWN0LnZhbHVlcyhPUkcpKSk7XHJcbiAgICAvKkBfX01BTkdMRV9QUk9QX18qLyBleHBvcnQgY29uc3Qgd3JhcEV4Q2hhbmdlciA9IChleENoYW5nZXI6IEV4Q2hhbmdlcnxudWxsKTogYW55ID0+IHtcclxuICAgICAgICBpZiAoIWV4Q2hhbmdlcikgcmV0dXJuIG51bGw7XHJcblxyXG4gICAgICAgIC8vXHJcbiAgICAgICAgcmV0dXJuIG5ldyBQcm94eShleENoYW5nZXIsIHtcclxuICAgICAgICAgICAgZ2V0KHRhcmdldDogRXhDaGFuZ2VyLCBwcm9wOiBhbnkpOiBhbnkge1xyXG4gICAgICAgICAgICAgICAgaWYgKHByb3AgPT0gT1JHLnN5bmMpIHsgcmV0dXJuIHRhcmdldC5zeW5jOyB9O1xyXG4gICAgICAgICAgICAgICAgaWYgKHByb3AgPT0gT1JHLmV4YykgeyByZXR1cm4gdGFyZ2V0OyB9O1xyXG4gICAgICAgICAgICAgICAgaWYgKCAvLyBmb3JiaWRkZW4gYWN0aW9uc1xyXG4gICAgICAgICAgICAgICAgICAgIGlzU3ltYm9sKHByb3ApIHx8XHJcbiAgICAgICAgICAgICAgICAgICAgRk9SQklEREVOX0tFWVMuaGFzKHByb3AgYXMgc3RyaW5nKSB8fCBcclxuICAgICAgICAgICAgICAgICAgICBNRVRBX0tFWVM/Lmhhcz8uKHByb3AgYXMgYW55KVxyXG4gICAgICAgICAgICAgICAgKSB7IHJldHVybiBudWxsOyB9O1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuIHRhcmdldD8uYWNjZXNzPy4ocHJvcCk7XHJcbiAgICAgICAgICAgIH0sXHJcbiAgICAgICAgICAgIHNldCh0YXJnZXQ6IEV4Q2hhbmdlciwgcHJvcDogc3RyaW5nLCB2YWx1ZTogYW55KTogYW55IHtcclxuICAgICAgICAgICAgICAgIHJldHVybiB0YXJnZXQ/LnJlZ2lzdGVyPy4odmFsdWUsIHByb3ApO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfSk7XHJcbiAgICB9XHJcblxyXG4vKkBfX01BTkdMRV9QUk9QX18qLyBleHBvcnQgY29uc3QgaXNQcm9taXNlID0gPFQgZXh0ZW5kcyBvYmplY3R8RnVuY3Rpb258dW5rbm93bj4odGFyZ2V0OiBUfFByb21pc2U8VD4pOiBib29sZWFuID0+e1xyXG4gICAgcmV0dXJuIHRhcmdldCBpbnN0YW5jZW9mIFBNUyB8fCAodGFyZ2V0IGFzIGFueSk/LnRoZW4gIT0gbnVsbCAmJiB0eXBlb2YgKHRhcmdldCBhcyBhbnkpPy50aGVuID09IFwiZnVuY3Rpb25cIjtcclxufVxyXG5cclxuLypAX19NQU5HTEVfUFJPUF9fKi8gZXhwb3J0IGNvbnN0IGRvT25seUFmdGVyUmVzb2x2ZSA9IDxUIGV4dGVuZHMgdW5rbm93bnxhbnk+KG1ldGE6IE1Qcm9taXNlPFQ+LCBjYjogKHU6IFQpPT5NUHJvbWlzZTxUPnxudWxsfHZvaWQpOiBNUHJvbWlzZTxhbnk+fG51bGx8dm9pZCA9PiB7XHJcbiAgICBpZiAoaXNQcm9taXNlKG1ldGEpKSB7XHJcbiAgICAgICAgY29uc3QgY2hhaW4gPSAobWV0YSBhcyBhbnkpPy50aGVuPy4oY2IpPy5jYXRjaD8uKGNvbnNvbGUudHJhY2UuYmluZChjb25zb2xlKSkgPz8gY2IobWV0YSBhcyBUKTtcclxuICAgICAgICAvL2NvbnNvbGUudHJhY2UoY2hhaW4pO1xyXG4gICAgICAgIHJldHVybiBjaGFpbjtcclxuICAgIH1cclxuICAgIHJldHVybiBjYihtZXRhIGFzIFQpO1xyXG59XHJcblxyXG5leHBvcnQgY29uc3QgZ2V0Q29udGV4dCA9ICh3TW9kdWxlOiBhbnkpPT57XHJcbiAgICByZXR1cm4gZG9Pbmx5QWZ0ZXJSZXNvbHZlKHdNb2R1bGUsIChteCk9PntcclxuICAgICAgICByZXR1cm4gd3JhcEV4Q2hhbmdlcihteD8uW09SRy5leGNdID8/ICRiaW5kaW5ncyQ/LmdldD8uKG14KSA/PyBteCk7XHJcbiAgICB9KTtcclxufVxyXG5cclxuZXhwb3J0IGNvbnN0IGRvVHJhbnNmZXIgPSAod01vZHVsZTogYW55LCBuYW1lOiBhbnksIG5vZGU6IGFueXxudWxsID0gbnVsbCk9PntcclxuICAgIHJldHVybiBkb09ubHlBZnRlclJlc29sdmUod01vZHVsZSwgKG14KT0+e1xyXG4gICAgICAgIGNvbnN0IGV4Q2hhbmdlciA9IG14Py5bT1JHLmV4Y10gPz8gJGJpbmRpbmdzJD8uZ2V0Py4obXgpID8/IG14O1xyXG4gICAgICAgIHJldHVybiBleENoYW5nZXI/LmRvVHJhbnNmZXI/LihuYW1lLCBub2RlKTtcclxuICAgIH0pO1xyXG59XHJcblxyXG5leHBvcnQgY29uc3QgdHJhbnNmZXIgPSAod01vZHVsZTogYW55LCBub2RlOiBhbnl8bnVsbCA9IG51bGwsIG5hbWU6IGFueSA9IFwiXCIpPT57XHJcbiAgICByZXR1cm4gZG9Pbmx5QWZ0ZXJSZXNvbHZlKHdNb2R1bGUsIChteCk9PntcclxuICAgICAgICBjb25zdCBleENoYW5nZXIgPSBteD8uW09SRy5leGNdID8/ICRiaW5kaW5ncyQ/LmdldD8uKG14KSA/PyBteDtcclxuICAgICAgICByZXR1cm4gZXhDaGFuZ2VyPy50cmFuc2Zlcj8uKG5vZGUsIG5hbWUpO1xyXG4gICAgfSk7XHJcbn1cclxuXHJcblxyXG5leHBvcnQgeyBPUkcgfTtcclxuIl19","var map = {\n\t\"./ExChanger\": 797,\n\t\"./ExChanger.ts\": 797,\n\t\"./FLOW\": 916,\n\t\"./FLOW.ts\": 916,\n\t\"./MessageChannel\": 234,\n\t\"./MessageChannel.ts\": 234\n};\n\nfunction webpackAsyncContext(req) {\n\treturn Promise.resolve().then(() => {\n\t\tif(!__webpack_require__.o(map, req)) {\n\t\t\tvar e = new Error(\"Cannot find module '\" + req + \"'\");\n\t\t\te.code = 'MODULE_NOT_FOUND';\n\t\t\tthrow e;\n\t\t}\n\n\t\tvar id = map[req];\n\t\treturn __webpack_require__(id);\n\t});\n}\nwebpackAsyncContext.keys = () => (Object.keys(map));\nwebpackAsyncContext.id = 262;\nmodule.exports = webpackAsyncContext;","function webpackEmptyAsyncContext(req) {\n\t// Here Promise.resolve().then() is used instead of new Promise() to prevent\n\t// uncaught exception popping up in devtools\n\treturn Promise.resolve().then(() => {\n\t\tvar e = new Error(\"Cannot find module '\" + req + \"'\");\n\t\te.code = 'MODULE_NOT_FOUND';\n\t\tthrow e;\n\t});\n}\nwebpackEmptyAsyncContext.keys = () => ([]);\nwebpackEmptyAsyncContext.resolve = webpackEmptyAsyncContext;\nwebpackEmptyAsyncContext.id = 65;\nmodule.exports = webpackEmptyAsyncContext;","// define getter functions for harmony exports\n__webpack_require__.d = (exports, definition) => {\n\tfor(var key in definition) {\n\t\tif(__webpack_require__.o(definition, key) && !__webpack_require__.o(exports, key)) {\n\t\t\tObject.defineProperty(exports, key, { enumerable: true, get: definition[key] });\n\t\t}\n\t}\n};","__webpack_require__.f = {};\n// This file contains only the entry chunk.\n// The chunk loading function for additional chunks\n__webpack_require__.e = (chunkId) => {\n\treturn Promise.all(Object.keys(__webpack_require__.f).reduce((promises, key) => {\n\t\t__webpack_require__.f[key](chunkId, promises);\n\t\treturn promises;\n\t}, []));\n};","// This function allow to reference async chunks\n__webpack_require__.u = (chunkId) => {\n\t// return url for filenames based on template\n\treturn \"./deps/\" + chunkId + \".mjs\";\n};","__webpack_require__.o = (obj, prop) => (Object.prototype.hasOwnProperty.call(obj, prop))","// define __esModule on exports\n__webpack_require__.r = (exports) => {\n\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n\t}\n\tObject.defineProperty(exports, '__esModule', { value: true });\n};","// deno-lint-ignore-file no-explicit-any\nexport const makeModuleLoader = (exChanger, altName = \"!!import!!\") => {\n    // make import loader support\n    exChanger?.register?.((src = \"\") => {\n        return import(src)?.then(async ($m) => {\n            const { wrapExChanger, transfer, doTransfer } = await import(\"../Library/Utils/Useful\");\n            if (typeof $m?.importContext == \"function\") {\n                $m?.importContext?.(wrapExChanger(exChanger), {\n                    transfer, doTransfer\n                });\n            }\n            return $m;\n        });\n    }, altName || \"!!import!!\");\n    return exChanger;\n};\nexport default makeModuleLoader;\n//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiTWFrZUxvYWRlci5qcyIsInNvdXJjZVJvb3QiOiIiLCJzb3VyY2VzIjpbIk1ha2VMb2FkZXIudHMiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IkFBQUEsd0NBQXdDO0FBQ3hDLE1BQU0sQ0FBQyxNQUFNLGdCQUFnQixHQUFHLENBQUMsU0FBYyxFQUFFLFVBQWtCLFlBQVksRUFBQyxFQUFFO0lBQzlFLDZCQUE2QjtJQUM3QixTQUFTLEVBQUUsUUFBUSxFQUFFLENBQUMsQ0FBQyxNQUFjLEVBQUUsRUFBZ0IsRUFBRTtRQUNyRCxPQUFPLE1BQU0sQ0FBQyxHQUFHLENBQUMsRUFBRSxJQUFJLENBQUMsS0FBSyxFQUFFLEVBQUUsRUFBQyxFQUFFO1lBQ2pDLE1BQU0sRUFBRSxhQUFhLEVBQUUsUUFBUSxFQUFFLFVBQVUsRUFBRSxHQUFHLE1BQU0sTUFBTSxDQUFDLHlCQUF5QixDQUFDLENBQUM7WUFDeEYsSUFBSSxPQUFPLEVBQUUsRUFBRSxhQUFhLElBQUksVUFBVSxFQUFFLENBQUM7Z0JBQUMsRUFBRSxFQUFFLGFBQWEsRUFBRSxDQUFDLGFBQWEsQ0FBQyxTQUFTLENBQUMsRUFBRTtvQkFDeEYsUUFBUSxFQUFFLFVBQVU7aUJBQ3ZCLENBQUMsQ0FBQztZQUFDLENBQUM7WUFDTCxPQUFPLEVBQUUsQ0FBQztRQUNkLENBQUMsQ0FBQyxDQUFDO0lBQ1AsQ0FBQyxFQUFFLE9BQU8sSUFBSSxZQUFZLENBQUMsQ0FBQztJQUM1QixPQUFPLFNBQVMsQ0FBQztBQUNyQixDQUFDLENBQUE7QUFDRCxlQUFlLGdCQUFnQixDQUFDIiwic291cmNlc0NvbnRlbnQiOlsiLy8gZGVuby1saW50LWlnbm9yZS1maWxlIG5vLWV4cGxpY2l0LWFueVxyXG5leHBvcnQgY29uc3QgbWFrZU1vZHVsZUxvYWRlciA9IChleENoYW5nZXI6IGFueSwgYWx0TmFtZTogc3RyaW5nID0gXCIhIWltcG9ydCEhXCIpPT57XHJcbiAgICAvLyBtYWtlIGltcG9ydCBsb2FkZXIgc3VwcG9ydFxyXG4gICAgZXhDaGFuZ2VyPy5yZWdpc3Rlcj8uKChzcmM6IHN0cmluZyA9IFwiXCIpOiBQcm9taXNlPGFueT4gPT4ge1xyXG4gICAgICAgIHJldHVybiBpbXBvcnQoc3JjKT8udGhlbihhc3luYyAoJG0pPT57XHJcbiAgICAgICAgICAgIGNvbnN0IHsgd3JhcEV4Q2hhbmdlciwgdHJhbnNmZXIsIGRvVHJhbnNmZXIgfSA9IGF3YWl0IGltcG9ydChcIi4uL0xpYnJhcnkvVXRpbHMvVXNlZnVsXCIpO1xyXG4gICAgICAgICAgICBpZiAodHlwZW9mICRtPy5pbXBvcnRDb250ZXh0ID09IFwiZnVuY3Rpb25cIikgeyAkbT8uaW1wb3J0Q29udGV4dD8uKHdyYXBFeENoYW5nZXIoZXhDaGFuZ2VyKSwge1xyXG4gICAgICAgICAgICAgICAgdHJhbnNmZXIsIGRvVHJhbnNmZXJcclxuICAgICAgICAgICAgfSk7IH1cclxuICAgICAgICAgICAgcmV0dXJuICRtO1xyXG4gICAgICAgIH0pO1xyXG4gICAgfSwgYWx0TmFtZSB8fCBcIiEhaW1wb3J0ISFcIik7XHJcbiAgICByZXR1cm4gZXhDaGFuZ2VyO1xyXG59XHJcbmV4cG9ydCBkZWZhdWx0IG1ha2VNb2R1bGVMb2FkZXI7XHJcbiJdfQ==","// deno-lint-ignore-file\n// !should to be compiled as worker entry!\nimport exChanger from \"../$core$/Workers/ExChangerUnit\";\nimport makeModuleLoader from \"../$core$/Workers/MakeLoader\";\nexport const moduleLoader = makeModuleLoader(exChanger);\nexport default moduleLoader;\nexport { exChanger };\n//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiaW5kZXguanMiLCJzb3VyY2VSb290IjoiIiwic291cmNlcyI6WyJpbmRleC50cyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiQUFBQSx3QkFBd0I7QUFDeEIsMENBQTBDO0FBQzFDLE9BQU8sU0FBUyxNQUFNLGlDQUFpQyxDQUFDO0FBQ3hELE9BQU8sZ0JBQWdCLE1BQU0sOEJBQThCLENBQUM7QUFDNUQsTUFBTSxDQUFDLE1BQU0sWUFBWSxHQUFHLGdCQUFnQixDQUFDLFNBQVMsQ0FBQyxDQUFDO0FBQ3hELGVBQWUsWUFBWSxDQUFDO0FBQzVCLE9BQU8sRUFBQyxTQUFTLEVBQUMsQ0FBQyIsInNvdXJjZXNDb250ZW50IjpbIi8vIGRlbm8tbGludC1pZ25vcmUtZmlsZVxyXG4vLyAhc2hvdWxkIHRvIGJlIGNvbXBpbGVkIGFzIHdvcmtlciBlbnRyeSFcclxuaW1wb3J0IGV4Q2hhbmdlciBmcm9tIFwiLi4vJGNvcmUkL1dvcmtlcnMvRXhDaGFuZ2VyVW5pdFwiO1xyXG5pbXBvcnQgbWFrZU1vZHVsZUxvYWRlciBmcm9tIFwiLi4vJGNvcmUkL1dvcmtlcnMvTWFrZUxvYWRlclwiO1xyXG5leHBvcnQgY29uc3QgbW9kdWxlTG9hZGVyID0gbWFrZU1vZHVsZUxvYWRlcihleENoYW5nZXIpO1xyXG5leHBvcnQgZGVmYXVsdCBtb2R1bGVMb2FkZXI7XHJcbmV4cG9ydCB7ZXhDaGFuZ2VyfTtcclxuIl19","// Web Worker Unit...\n//import ExChanger from \"../Library/FLOW/ExChanger\";\nimport ExChanger from \"../Library/FLOW/ExChanger\";\nexport default (new ExChanger(self)).initialize();\n//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiRXhDaGFuZ2VyVW5pdC5qcyIsInNvdXJjZVJvb3QiOiIiLCJzb3VyY2VzIjpbIkV4Q2hhbmdlclVuaXQudHMiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IkFBQUEscUJBQXFCO0FBQ3JCLG9EQUFvRDtBQUNwRCxPQUFPLFNBQVMsTUFBTSwyQkFBMkIsQ0FBQztBQUNsRCxlQUFlLENBQUMsSUFBSSxTQUFTLENBQUMsSUFBSSxDQUFDLENBQUMsQ0FBQyxVQUFVLEVBQUUsQ0FBQyIsInNvdXJjZXNDb250ZW50IjpbIi8vIFdlYiBXb3JrZXIgVW5pdC4uLlxyXG4vL2ltcG9ydCBFeENoYW5nZXIgZnJvbSBcIi4uL0xpYnJhcnkvRkxPVy9FeENoYW5nZXJcIjtcclxuaW1wb3J0IEV4Q2hhbmdlciBmcm9tIFwiLi4vTGlicmFyeS9GTE9XL0V4Q2hhbmdlclwiO1xyXG5leHBvcnQgZGVmYXVsdCAobmV3IEV4Q2hhbmdlcihzZWxmKSkuaW5pdGlhbGl6ZSgpO1xyXG4iXX0=","// deno-lint-ignore-file no-explicit-any\nimport { $moduleLoader } from \"./loader\";\nimport { $wrapPromise } from \"../$core$/Library/Handlers/PromiseHandler\";\n// wrapper of module loader (with Proxy)\nexport const moduleLoader = (source = \"\") => {\n    return /*@__MANGLE_PROP__*/ $wrapPromise(import(\"../$worker$/code\")?.then?.(async (worker) => {\n        return /*@__MANGLE_PROP__*/ $moduleLoader(source, await (worker?.default || \"\"))?.catch?.(console.trace.bind(console));\n    }));\n};\n//\nimport ORG from \"../$core$/Library/Utils/OrganicType\";\nexport const sync = ORG.sync;\nexport { getContext, transfer, doTransfer } from \"../$core$/Library/Utils/Useful\";\n//\n//, { ORG }export * from \"./utils\";\n//export * from \"./utils.ts\";\n//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiaW5kZXguanMiLCJzb3VyY2VSb290IjoiIiwic291cmNlcyI6WyJpbmRleC50cyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiQUFBQSx3Q0FBd0M7QUFDeEMsT0FBTyxFQUFFLGFBQWEsRUFBRSxNQUFNLFVBQVUsQ0FBQztBQUN6QyxPQUFPLEVBQUUsWUFBWSxFQUFHLE1BQU0sMkNBQTJDLENBQUM7QUFFMUUsd0NBQXdDO0FBQ3hDLE1BQU0sQ0FBQyxNQUFNLFlBQVksR0FBRyxDQUFvQixTQUFpQixFQUFFLEVBQUMsRUFBRTtJQUNsRSxPQUFPLG9CQUFvQixDQUFDLFlBQVksQ0FBQyxNQUFNLENBQUMsa0JBQWtCLENBQUMsRUFBRSxJQUFJLEVBQUUsQ0FBQyxLQUFLLEVBQUUsTUFBVyxFQUFDLEVBQUU7UUFDN0YsT0FBTyxvQkFBb0IsQ0FBQyxhQUFhLENBQUksTUFBTSxFQUFFLE1BQU0sQ0FBQyxNQUFNLEVBQUUsT0FBTyxJQUFJLEVBQUUsQ0FBQyxDQUFDLEVBQUUsS0FBSyxFQUFFLENBQUMsT0FBTyxDQUFDLEtBQUssQ0FBQyxJQUFJLENBQUMsT0FBTyxDQUFDLENBQUMsQ0FBQztJQUM5SCxDQUFDLENBQUMsQ0FBQyxDQUFDO0FBQ1IsQ0FBQyxDQUFBO0FBRUQsRUFBRTtBQUNGLE9BQU8sR0FBRyxNQUFNLHFDQUFxQyxDQUFDO0FBQ3RELE1BQU0sQ0FBQyxNQUFNLElBQUksR0FBRyxHQUFHLENBQUMsSUFBSSxDQUFDO0FBQzdCLE9BQU8sRUFBRSxVQUFVLEVBQUUsUUFBUSxFQUFFLFVBQVUsRUFBRSxNQUFNLGdDQUFnQyxDQUFDO0FBR2xGLEVBQUU7QUFDRixtQ0FBbUM7QUFDbkMsNkJBQTZCIiwic291cmNlc0NvbnRlbnQiOlsiLy8gZGVuby1saW50LWlnbm9yZS1maWxlIG5vLWV4cGxpY2l0LWFueVxyXG5pbXBvcnQgeyAkbW9kdWxlTG9hZGVyIH0gZnJvbSBcIi4vbG9hZGVyXCI7XHJcbmltcG9ydCB7ICR3cmFwUHJvbWlzZSAgfSBmcm9tIFwiLi4vJGNvcmUkL0xpYnJhcnkvSGFuZGxlcnMvUHJvbWlzZUhhbmRsZXJcIjtcclxuXHJcbi8vIHdyYXBwZXIgb2YgbW9kdWxlIGxvYWRlciAod2l0aCBQcm94eSlcclxuZXhwb3J0IGNvbnN0IG1vZHVsZUxvYWRlciA9IDxUIGV4dGVuZHMgdW5rbm93bj4oc291cmNlOiBzdHJpbmcgPSBcIlwiKT0+e1xyXG4gICAgcmV0dXJuIC8qQF9fTUFOR0xFX1BST1BfXyovICR3cmFwUHJvbWlzZShpbXBvcnQoXCIuLi8kd29ya2VyJC9jb2RlXCIpPy50aGVuPy4oYXN5bmMgKHdvcmtlcjogYW55KT0+e1xyXG4gICAgICAgIHJldHVybiAvKkBfX01BTkdMRV9QUk9QX18qLyAkbW9kdWxlTG9hZGVyPFQ+KHNvdXJjZSwgYXdhaXQgKHdvcmtlcj8uZGVmYXVsdCB8fCBcIlwiKSk/LmNhdGNoPy4oY29uc29sZS50cmFjZS5iaW5kKGNvbnNvbGUpKTtcclxuICAgIH0pKTtcclxufVxyXG5cclxuLy9cclxuaW1wb3J0IE9SRyBmcm9tIFwiLi4vJGNvcmUkL0xpYnJhcnkvVXRpbHMvT3JnYW5pY1R5cGVcIjtcclxuZXhwb3J0IGNvbnN0IHN5bmMgPSBPUkcuc3luYztcclxuZXhwb3J0IHsgZ2V0Q29udGV4dCwgdHJhbnNmZXIsIGRvVHJhbnNmZXIgfSBmcm9tIFwiLi4vJGNvcmUkL0xpYnJhcnkvVXRpbHMvVXNlZnVsXCI7XHJcblxyXG5cclxuLy9cclxuLy8sIHsgT1JHIH1leHBvcnQgKiBmcm9tIFwiLi91dGlsc1wiO1xyXG4vL2V4cG9ydCAqIGZyb20gXCIuL3V0aWxzLnRzXCI7XHJcbiJdfQ==","// deno-lint-ignore-file no-explicit-any\nimport TS from \"../$core$/Library/Utils/Alias\";\n/*@__MANGLE_PROP__*/ /*@__PURE__*/\nconst loadWorker = (WX) => {\n    /*@__PURE__*/ if (WX instanceof Worker) {\n        return WX;\n    }\n    else \n    /*@__PURE__*/ if (typeof WX == \"function\") {\n        return new WX();\n    }\n    else \n    /*@__PURE__*/ if (typeof WX == \"string\") {\n        if (URL.canParse(WX)) {\n            return new Worker(WX, { type: \"module\" });\n        }\n        ;\n        return new Worker(URL.createObjectURL(new Blob([WX], { type: \"application/javascript\" })), { type: \"module\" });\n    }\n    else \n    /*@__PURE__*/ if (WX instanceof Blob || WX instanceof File) {\n        return new Worker(URL.createObjectURL(WX), { type: \"module\" });\n    }\n    /*@__PURE__*/ return (typeof self != TS.udf ? self : null);\n};\n/*@__MANGLE_PROP__*/\nexport const $moduleLoader = async (moduleSource, workerCode = \"\") => {\n    if (!moduleSource || typeof moduleSource != \"string\")\n        throw new Error(\"Invalid module source\");\n    // if url too long, un-compress code\n    const uWorker = loadWorker(workerCode);\n    const EXChanger = (await import(\"../$core$/Library/FLOW/ExChanger\")).default;\n    const exChanger = new EXChanger(uWorker)?.initialize?.();\n    const module = await (await exChanger?.access?.(\"!!import!!\"))?.(moduleSource);\n    return module;\n};\n//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoibG9hZGVyLmpzIiwic291cmNlUm9vdCI6IiIsInNvdXJjZXMiOlsibG9hZGVyLnRzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiJBQUFBLHdDQUF3QztBQUN4QyxPQUFPLEVBQUUsTUFBTSwrQkFBK0IsQ0FBQztBQUUvQyxvQkFBb0IsQ0FBQyxhQUFhO0FBQ2xDLE1BQU0sVUFBVSxHQUFHLENBQUMsRUFBTyxFQUFlLEVBQUU7SUFDeEMsYUFBYSxDQUFDLElBQUksRUFBRSxZQUFZLE1BQU0sRUFBRSxDQUFDO1FBQUMsT0FBTyxFQUFFLENBQUM7SUFBQyxDQUFDOztJQUN0RCxhQUFhLENBQUMsSUFBSSxPQUFPLEVBQUUsSUFBSSxVQUFVLEVBQUUsQ0FBQztRQUFDLE9BQU8sSUFBSSxFQUFFLEVBQUUsQ0FBQztJQUFDLENBQUM7O0lBQy9ELGFBQWEsQ0FBQyxJQUFJLE9BQU8sRUFBRSxJQUFJLFFBQVEsRUFBRSxDQUFDO1FBQ3RDLElBQUksR0FBRyxDQUFDLFFBQVEsQ0FBQyxFQUFFLENBQUMsRUFBRSxDQUFDO1lBQUMsT0FBTyxJQUFJLE1BQU0sQ0FBQyxFQUFFLEVBQUUsRUFBQyxJQUFJLEVBQUUsUUFBUSxFQUFDLENBQUMsQ0FBQztRQUFDLENBQUM7UUFBQSxDQUFDO1FBQ25FLE9BQU8sSUFBSSxNQUFNLENBQUMsR0FBRyxDQUFDLGVBQWUsQ0FBQyxJQUFJLElBQUksQ0FBQyxDQUFDLEVBQUUsQ0FBQyxFQUFFLEVBQUMsSUFBSSxFQUFFLHdCQUF3QixFQUFDLENBQUMsQ0FBQyxFQUFFLEVBQUMsSUFBSSxFQUFFLFFBQVEsRUFBQyxDQUFDLENBQUM7SUFDL0csQ0FBQzs7SUFDRCxhQUFhLENBQUMsSUFBSSxFQUFFLFlBQVksSUFBSSxJQUFJLEVBQUUsWUFBWSxJQUFJLEVBQUUsQ0FBQztRQUFDLE9BQU8sSUFBSSxNQUFNLENBQUMsR0FBRyxDQUFDLGVBQWUsQ0FBQyxFQUFFLENBQUMsRUFBRSxFQUFDLElBQUksRUFBRSxRQUFRLEVBQUMsQ0FBQyxDQUFDO0lBQUMsQ0FBQztJQUM3SCxhQUFhLENBQUMsT0FBTyxDQUFDLE9BQU8sSUFBSSxJQUFJLEVBQUUsQ0FBQyxHQUFHLENBQUMsQ0FBQyxDQUFDLElBQUksQ0FBQyxDQUFDLENBQUMsSUFBSSxDQUFzQixDQUFDO0FBQ3BGLENBQUMsQ0FBQTtBQUVELG9CQUFvQjtBQUNwQixNQUFNLENBQUMsTUFBTSxhQUFhLEdBQUcsS0FBSyxFQUFxQixZQUFvQixFQUFFLGFBQXFCLEVBQUUsRUFBYyxFQUFFO0lBQ2hILElBQUksQ0FBQyxZQUFZLElBQUksT0FBTyxZQUFZLElBQUksUUFBUTtRQUFFLE1BQU0sSUFBSSxLQUFLLENBQUMsdUJBQXVCLENBQUMsQ0FBQztJQUUvRixvQ0FBb0M7SUFDcEMsTUFBTSxPQUFPLEdBQUssVUFBVSxDQUFDLFVBQVUsQ0FBQyxDQUFDO0lBQ3pDLE1BQU0sU0FBUyxHQUFHLENBQUMsTUFBTSxNQUFNLENBQUMsa0NBQWtDLENBQUMsQ0FBQyxDQUFDLE9BQU8sQ0FBQztJQUM3RSxNQUFNLFNBQVMsR0FBRyxJQUFJLFNBQVMsQ0FBQyxPQUFPLENBQUMsRUFBRSxVQUFVLEVBQUUsRUFBRSxDQUFDO0lBQ3pELE1BQU0sTUFBTSxHQUFNLE1BQU0sQ0FBQyxNQUFNLFNBQVMsRUFBRSxNQUFNLEVBQUUsQ0FBQyxZQUFZLENBQVMsQ0FBQSxFQUFFLENBQUMsWUFBWSxDQUFDLENBQUM7SUFDekYsT0FBTyxNQUFNLENBQUM7QUFDbEIsQ0FBQyxDQUFBIiwic291cmNlc0NvbnRlbnQiOlsiLy8gZGVuby1saW50LWlnbm9yZS1maWxlIG5vLWV4cGxpY2l0LWFueVxyXG5pbXBvcnQgVFMgZnJvbSBcIi4uLyRjb3JlJC9MaWJyYXJ5L1V0aWxzL0FsaWFzXCI7XHJcblxyXG4vKkBfX01BTkdMRV9QUk9QX18qLyAvKkBfX1BVUkVfXyovIFxyXG5jb25zdCBsb2FkV29ya2VyID0gKFdYOiBhbnkpOiBXb3JrZXJ8bnVsbCA9PntcclxuICAgIC8qQF9fUFVSRV9fKi8gaWYgKFdYIGluc3RhbmNlb2YgV29ya2VyKSB7IHJldHVybiBXWDsgfSBlbHNlXHJcbiAgICAvKkBfX1BVUkVfXyovIGlmICh0eXBlb2YgV1ggPT0gXCJmdW5jdGlvblwiKSB7IHJldHVybiBuZXcgV1goKTsgfSBlbHNlXHJcbiAgICAvKkBfX1BVUkVfXyovIGlmICh0eXBlb2YgV1ggPT0gXCJzdHJpbmdcIikge1xyXG4gICAgICAgIGlmIChVUkwuY2FuUGFyc2UoV1gpKSB7IHJldHVybiBuZXcgV29ya2VyKFdYLCB7dHlwZTogXCJtb2R1bGVcIn0pOyB9O1xyXG4gICAgICAgIHJldHVybiBuZXcgV29ya2VyKFVSTC5jcmVhdGVPYmplY3RVUkwobmV3IEJsb2IoW1dYXSwge3R5cGU6IFwiYXBwbGljYXRpb24vamF2YXNjcmlwdFwifSkpLCB7dHlwZTogXCJtb2R1bGVcIn0pO1xyXG4gICAgfSBlbHNlXHJcbiAgICAvKkBfX1BVUkVfXyovIGlmIChXWCBpbnN0YW5jZW9mIEJsb2IgfHwgV1ggaW5zdGFuY2VvZiBGaWxlKSB7IHJldHVybiBuZXcgV29ya2VyKFVSTC5jcmVhdGVPYmplY3RVUkwoV1gpLCB7dHlwZTogXCJtb2R1bGVcIn0pOyB9XHJcbiAgICAvKkBfX1BVUkVfXyovIHJldHVybiAodHlwZW9mIHNlbGYgIT0gVFMudWRmID8gc2VsZiA6IG51bGwpIGFzIHVua25vd24gYXMgV29ya2VyO1xyXG59XHJcblxyXG4vKkBfX01BTkdMRV9QUk9QX18qLyBcclxuZXhwb3J0IGNvbnN0ICRtb2R1bGVMb2FkZXIgPSBhc3luYyA8VCBleHRlbmRzIHVua25vd24+KG1vZHVsZVNvdXJjZTogc3RyaW5nLCB3b3JrZXJDb2RlOiBzdHJpbmcgPSBcIlwiKTogUHJvbWlzZTxUPiA9PiB7XHJcbiAgICBpZiAoIW1vZHVsZVNvdXJjZSB8fCB0eXBlb2YgbW9kdWxlU291cmNlICE9IFwic3RyaW5nXCIpIHRocm93IG5ldyBFcnJvcihcIkludmFsaWQgbW9kdWxlIHNvdXJjZVwiKTtcclxuXHJcbiAgICAvLyBpZiB1cmwgdG9vIGxvbmcsIHVuLWNvbXByZXNzIGNvZGVcclxuICAgIGNvbnN0IHVXb3JrZXIgICA9IGxvYWRXb3JrZXIod29ya2VyQ29kZSk7XHJcbiAgICBjb25zdCBFWENoYW5nZXIgPSAoYXdhaXQgaW1wb3J0KFwiLi4vJGNvcmUkL0xpYnJhcnkvRkxPVy9FeENoYW5nZXJcIikpLmRlZmF1bHQ7XHJcbiAgICBjb25zdCBleENoYW5nZXIgPSBuZXcgRVhDaGFuZ2VyKHVXb3JrZXIpPy5pbml0aWFsaXplPy4oKTtcclxuICAgIGNvbnN0IG1vZHVsZSAgICA9IGF3YWl0IChhd2FpdCBleENoYW5nZXI/LmFjY2Vzcz8uKFwiISFpbXBvcnQhIVwiKSBhcyBhbnkpPy4obW9kdWxlU291cmNlKTtcclxuICAgIHJldHVybiBtb2R1bGU7XHJcbn1cclxuIl19"],"names":["__webpack_require__","moduleId","module","cachedModule","__webpack_module_cache__","undefined","exports","__webpack_modules__","installedChunks","installChunk","ObjectProxy","constructor","handlerUtils","this","access","target","args","$hnd","get","set","has","call","apply","construct","deleteProperty","RemoteReferenceHandler","DataHandler","exChanger","super","$exc","$data","t","cmd","meta","data","exc","then","e","$request","$get","_","ObjectPoolMemberHandler","memoryPool","UUIDMap","wrap","uuid","ExChanger","context","TS","udf","FLOW","console","warn","initialize","importToSelf","Error","$imports","$cd","$mp","$dh","$addHandler","PromiseHandler","$sync","sync","$makePromise","ext","Proxy","$getHandler","error","$act","result","cb","transfer","encoded","encode","callTask","res","decode","$importToUnit","source","importToUnit","$importToSelf","register","object","name","add","type","$node","node","real","doTransfer","$name","esm","AT","Atomics","SharedChannel","$binCoder","sharedBuffer","byteOffset","binCoder","rv","$resolveWith","Uint8Array","rj","waitAuto","timeout","self","document","waitAsync","waitSync","$waitSync","_timeout","binaryData","byteLength","grow","int32","Int32Array","load","store","notify","$initials","$promised","promise","value","async","catch","trace","bind","wait","doOnlyAfterResolve","prototype","bin","HANG_TIMEOUT","PromiseStack","Map","ne","allSettled","Array","from","entries","filter","n","map","v","rjb","why","pm","delete","rvb","hook","key","buffer","setTimeout","cs","bf","SharedArrayBuffer","cr","withResolvers","PM","worker","addEventListener","ev","log","dir","status","shared","handler","syncOrAsync","pass","$r","Set","some","I","reason","message","resolved","Object","assign","default","pair","$args","TypeDetector","detection","a","isArray","ArrayBuffer","$buffer","valid","toString","detectType","organic","indexOf","def","UniversalHandler","dataHandler","htp","local","overlap","wrapMeta","$m","w","pt","hasMemoryBuffer","$encoder","$decoder","$hndr","$typeDetector","all","org","push","toTransfer","_transfer","exists","decoded","$decode","o","$encode","$handler","command","length","splice","$resolver","ref","Reflect","err","_uuid","$deferOp","$wrapPromise","raw","PMS","Promise","MakeReference","fx","stringify","JSON","bindCtx","gt","wrapWeakMap","WeakMap","extract","prepare","$ORG","$exc$","Symbol","$data$","ORG","payload","index","$bindings$","bindWithContext","obj","timers","tmpSet","hold","tmp","deref","FinalizationRegistry","id","force","WeakRef","UUIDv4","crypto","randomUUID","replace","c","getRandomValues","Transferable","MessagePort","ReadableStream","WritableStream","TransformStream","WebTransportReceiveStream","WebTransportSendStream","AudioData","ImageBitmap","VideoFrame","OffscreenCanvas","RTCDataChannel","E","isSymbol","sym","FORBIDDEN_KEYS","META_KEYS","values","wrapExChanger","prop","isPromise","getContext","wModule","mx","webpackAsyncContext","req","resolve","code","keys","webpackEmptyAsyncContext","m","d","definition","defineProperty","enumerable","f","chunkId","reduce","promises","u","hasOwnProperty","r","toStringTag","i","ids","modules","runtime","j","installedChunkData","import","race","altName","src","importContext","moduleLoader","moduleSource","workerCode","uWorker","WX","Worker","URL","canParse","createObjectURL","Blob","File","EXChanger","$moduleLoader"],"sourceRoot":""}